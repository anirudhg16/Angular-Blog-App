"use strict";(self.webpackChunkblogApp=self.webpackChunkblogApp||[]).push([[179],{2011:(mt,De,P)=>{P.d(De,{Dh:()=>ue,GT:()=>ne,cc:()=>we,hO:()=>Ue,on:()=>B,pX:()=>te,xv:()=>ae});var h=P(4650),Y=P(9260),O=P(2122);mt=P.hmd(mt);const ee=["ngOnDestroy"],te=(Ie,Ee,Pe,_e={})=>new Proxy(Ie,{get:(ye,Te)=>Pe.runOutsideAngular(()=>{var Fe;if(Ie[Te])return!(null===(Fe=_e?.spy)||void 0===Fe)&&Fe.get&&_e.spy.get(Te,Ie[Te]),Ie[Te];if(ee.indexOf(Te)>-1)return()=>{};const Me=Ee.toPromise().then(V=>{const ge=V&&V[Te];return"function"==typeof ge?ge.bind(V):ge&&ge.then?ge.then(Ve=>Pe.run(()=>Ve)):Pe.run(()=>ge)});return new Proxy(()=>{},{get:(V,ge)=>Me[ge],apply:(V,ge,Ve)=>Me.then(Ze=>{var pt;const it=Ze&&Ze(...Ve);return!(null===(pt=_e?.spy)||void 0===pt)&&pt.apply&&_e.spy.apply(Te,Ve,it),it})})})}),ne=(Ie,Ee)=>{Ee.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(_e=>{Object.defineProperty(Ie.prototype,_e,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,_e))})})};class le{constructor(Ee){return Ee}}const ue=new h.OlP("angularfire2.app.options"),ae=new h.OlP("angularfire2.app.name");function B(Ie,Ee,Pe){const ye="object"==typeof Pe&&Pe||{};ye.name=ye.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const Fe=Y.Z.apps.filter(Me=>Me&&Me.name===ye.name)[0]||Ee.runOutsideAngular(()=>Y.Z.initializeApp(Ie,ye));try{JSON.stringify(Ie)!==JSON.stringify(Fe.options)&&j("error",`${Fe.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Fe)}const j=(Ie,...Ee)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ie](...Ee)},Z={provide:le,useFactory:B,deps:[ue,h.R0b,[new h.FiY,ae]]};let Ue=(()=>{class Ie{constructor(Pe){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",h.q4F.full,Pe.toString())}static initializeApp(Pe,_e){return{ngModule:Ie,providers:[{provide:ue,useValue:Pe},{provide:ae,useValue:_e}]}}}return Ie.\u0275fac=function(Pe){return new(Pe||Ie)(h.LFG(h.Lbi))},Ie.\u0275mod=h.oAB({type:Ie}),Ie.\u0275inj=h.cJS({providers:[Z]}),Ie})();function we(Ie,Ee,Pe,_e,ye){const[,Te,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Me=>Me[0]===Ie)||[];if(Te)return function Ge(Ie,Ee){try{return Ie.toString()===Ee.toString()}catch{return Ie===Ee}}(ye,Fe)||(de("error",`${Ee} was already initialized on the ${Pe} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:ye,was:Fe})),Te;{const Me=_e();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Me,ye]),Me}}const lt=!!mt.hot,de=(Ie,...Ee)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ie](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(mt,De,P)=>{P.d(De,{q4:()=>ko,iC:()=>Vn,HU:()=>Pn,vb:()=>Lr,JM:()=>Aa});var h=P(4650),Y=P(259),O=P(5861),ee=P(9681),te=P(2090),ne=P(4859),le=P(1877),ue=P(8766);const ae="@firebase/installations",B="0.6.4",j=1e4,Z=`w:${B}`,Ue="FIS_v2",we="https://firebaseinstallations.googleapis.com/v1",Ge=36e5,Ee=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(D){return D instanceof te.ZR&&D.code.includes("request-failed")}function _e({projectId:D}){return`${we}/projects/${D}/installations`}function ye(D){return{token:D.token,requestStatus:2,expiresIn:Ze(D.expiresIn),creationTime:Date.now()}}function Te(D,C){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Me({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ge(D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function Ze(D){return Number(D.replace("s","000"))}function ie(){return(ie=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=_e(D),q=Me(D),X=C.getImmediate({optional:!0});if(X){const ht=yield X.getHeartbeatsHeader();ht&&q.append("x-firebase-client",ht)}const W={method:"POST",headers:q,body:JSON.stringify({fid:x,authVersion:Ue,appId:D.appId,sdkVersion:Z})},st=yield ge(()=>fetch(F,W));if(st.ok){const ht=yield st.json();return{fid:ht.fid||x,registrationStatus:2,refreshToken:ht.refreshToken,authToken:ye(ht.authToken)}}throw yield Te("Create Installation",st)})).apply(this,arguments)}function ce(D){return new Promise(C=>{setTimeout(C,D)})}const Se=/^[cdef][\w-]{21}$/,Oe="";function Be(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function et(D){return function me(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Se.test(x)?x:Oe}catch{return Oe}}function Ke(D){return`${D.appName}!${D.appId}`}const nn=new Map;function It(D,C){const x=Ke(D);Tt(x,C),function Bn(D,C){const x=function _n(){return!an&&"BroadcastChannel"in self&&(an=new BroadcastChannel("[Firebase] FID Change"),an.onmessage=D=>{Tt(D.data.key,D.data.fid)}),an}();x&&x.postMessage({key:D,fid:C}),function bn(){0===nn.size&&an&&(an.close(),an=null)}()}(x,C)}function Tt(D,C){const x=nn.get(D);if(x)for(const F of x)F(C)}let an=null;const ii="firebase-installations-database",Rs=1,si="firebase-installations-store";let zr=null;function ds(){return zr||(zr=(0,ue.X3)(ii,Rs,{upgrade:(D,C)=>{0===C&&D.createObjectStore(si)}})),zr}function wn(D,C){return qr.apply(this,arguments)}function qr(){return(qr=(0,O.Z)(function*(D,C){const x=Ke(D),q=(yield ds()).transaction(si,"readwrite"),X=q.objectStore(si),Ae=yield X.get(x);return yield X.put(C,x),yield q.done,(!Ae||Ae.fid!==C.fid)&&It(D,C.fid),C})).apply(this,arguments)}function yt(D){return hs.apply(this,arguments)}function hs(){return(hs=(0,O.Z)(function*(D){const C=Ke(D),F=(yield ds()).transaction(si,"readwrite");yield F.objectStore(si).delete(C),yield F.done})).apply(this,arguments)}function mi(D,C){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(D,C){const x=Ke(D),q=(yield ds()).transaction(si,"readwrite"),X=q.objectStore(si),Ae=yield X.get(x),W=C(Ae);return void 0===W?yield X.delete(x):yield X.put(W,x),yield q.done,W&&(!Ae||Ae.fid!==W.fid)&&It(D,W.fid),W})).apply(this,arguments)}function mr(D){return Ns.apply(this,arguments)}function Ns(){return Ns=(0,O.Z)(function*(D){let C;const x=yield mi(D.appConfig,F=>{const q=function Rt(D){return yr(D||{fid:Be(),registrationStatus:0})}(F),X=function _t(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function St(D,C){return Os.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:fn(D)}:{installationEntry:C}}(D,q);return C=X.registrationPromise,X.installationEntry});return x.fid===Oe?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}}),Ns.apply(this,arguments)}function Os(){return Os=(0,O.Z)(function*(D,C){try{const x=yield function it(D,C){return ie.apply(this,arguments)}(D,C);return wn(D.appConfig,x)}catch(x){throw Pe(x)&&409===x.customData.serverCode?yield yt(D.appConfig):yield wn(D.appConfig,{fid:C.fid,registrationStatus:0}),x}}),Os.apply(this,arguments)}function fn(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(D){let C=yield Or(D.appConfig);for(;1===C.registrationStatus;)yield ce(100),C=yield Or(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield mr(D);return F||x}return C})).apply(this,arguments)}function Or(D){return mi(D,C=>{if(!C)throw Ee.create("installation-not-found");return yr(C)})}function yr(D){return function ua(D){return 1===D.registrationStatus&&D.registrationTime+j<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Gi(){return(Gi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=function qt(D,{fid:C}){return`${_e(D)}/${C}/authTokens:generate`}(D,x),q=function V(D,{refreshToken:C}){const x=Me(D);return x.append("Authorization",function pt(D){return`${Ue} ${D}`}(C)),x}(D,x),X=C.getImmediate({optional:!0});if(X){const ht=yield X.getHeartbeatsHeader();ht&&q.append("x-firebase-client",ht)}const W={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:Z,appId:D.appId}})},st=yield ge(()=>fetch(F,W));if(st.ok)return ye(yield st.json());throw yield Te("Generate Auth Token",st)})).apply(this,arguments)}function Pr(D){return Ai.apply(this,arguments)}function Ai(){return Ai=(0,O.Z)(function*(D,C=!1){let x;const F=yield mi(D.appConfig,X=>{if(!Lt(X))throw Ee.create("not-registered");const Ae=X.authToken;if(!C&&function vr(D){return 2===D.requestStatus&&!function U(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+Ge}(D)}(Ae))return X;if(1===Ae.requestStatus)return x=function $e(D,C){return ve.apply(this,arguments)}(D,C),X;{if(!navigator.onLine)throw Ee.create("app-offline");const W=function L(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}(X);return x=function bt(D,C){return xt.apply(this,arguments)}(D,W),W}});return x?yield x:F.authToken}),Ai.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,C){let x=yield at(D.appConfig);for(;1===x.authToken.requestStatus;)yield ce(100),x=yield at(D.appConfig);const F=x.authToken;return 0===F.requestStatus?Pr(D,C):F})).apply(this,arguments)}function at(D){return mi(D,C=>{if(!Lt(C))throw Ee.create("not-registered");return function z(D){return 1===D.requestStatus&&D.requestTime+j<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function xt(){return xt=(0,O.Z)(function*(D,C){try{const x=yield function rn(D,C){return Gi.apply(this,arguments)}(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield wn(D.appConfig,F),x}catch(x){if(!Pe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield wn(D.appConfig,F)}else yield yt(D.appConfig);throw x}}),xt.apply(this,arguments)}function Lt(D){return void 0!==D&&2===D.registrationStatus}function J(){return(J=(0,O.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield mr(C);return F?F.catch(console.error):Pr(C).catch(console.error),x.fid})).apply(this,arguments)}function We(){return We=(0,O.Z)(function*(D,C=!1){const x=D;return yield function on(D){return Tn.apply(this,arguments)}(x),(yield Pr(x,C)).token}),We.apply(this,arguments)}function Tn(){return(Tn=(0,O.Z)(function*(D){const{registrationPromise:C}=yield mr(D);C&&(yield C)})).apply(this,arguments)}function tu(D){return Ee.create("missing-app-config-values",{valueName:D})}const nu="installations",Nn=D=>{const C=D.getProvider("app").getImmediate(),x=function gc(D){if(!D||!D.options)throw tu("App Configuration");if(!D.name)throw tu("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw tu(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ee._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},mc=D=>{const C=D.getProvider("app").getImmediate(),x=(0,ee._getProvider)(C,nu).getImmediate();return{getId:()=>function he(D){return J.apply(this,arguments)}(x),getToken:q=>function nt(D){return We.apply(this,arguments)}(x,q)}};(function yc(){(0,ee._registerComponent)(new ne.wA(nu,Nn,"PUBLIC")),(0,ee._registerComponent)(new ne.wA("installations-internal",mc,"PRIVATE"))})(),(0,ee.registerVersion)(ae,B),(0,ee.registerVersion)(ae,B,"esm2017");const Zt="@firebase/remote-config",_r=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class go{constructor(C,x,F,q){this.client=C,this.storage=x,this.storageCache=F,this.logger=q}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,q=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${q}.`),q}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(q&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return q;C.eTag=q&&q.eTag;const X=yield x.client.fetch(C),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ae),X})()}}function Ls(D=navigator){return D.languages&&D.languages[0]||D.language}class Wr{constructor(C,x,F,q,X,Ae){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=q,this.apiKey=X,this.appId=Ae}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,W={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},st={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:q,app_id:x.appId,language_code:Ls()},ht={method:"POST",headers:W,body:JSON.stringify(st)},Mt=fetch(Ae,ht),ze=new Promise((Cr,Tr)=>{C.signal.addEventListener(()=>{const Qs=new Error("The operation was aborted.");Qs.name="AbortError",Tr(Qs)})});let br;try{yield Promise.race([Mt,ze]),br=yield Mt}catch(Cr){let Tr="fetch-client-network";throw"AbortError"===Cr?.name&&(Tr="fetch-timeout"),_r.create(Tr,{originalErrorMessage:Cr?.message})}let un=br.status;const ut=br.headers.get("ETag")||void 0;let xa,Et;if(200===br.status){let Cr;try{Cr=yield br.json()}catch(Tr){throw _r.create("fetch-client-parse",{originalErrorMessage:Tr?.message})}xa=Cr.entries,Et=Cr.state}if("INSTANCE_STATE_UNSPECIFIED"===Et?un=500:"NO_CHANGE"===Et?un=304:("NO_TEMPLATE"===Et||"EMPTY_CONFIG"===Et)&&(xa={}),304!==un&&200!==un)throw _r.create("fetch-status",{httpStatus:un});return{status:un,eTag:ut,config:xa}})()}}class Ht{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var q=this;return(0,O.Z)(function*(){yield function ai(D,C){return new Promise((x,F)=>{const q=Math.max(C-Date.now(),0),X=setTimeout(x,q);D.addEventListener(()=>{clearTimeout(X),F(_r.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const X=yield q.client.fetch(C);return yield q.storage.deleteThrottleMetadata(),X}catch(X){if(!function vc(D){if(!(D instanceof te.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(X))throw X;const Ae={throttleEndTimeMillis:Date.now()+(0,te.$s)(F),backoffCount:F+1};return yield q.storage.setThrottleMetadata(Ae),q.attemptFetch(C,Ae)}})()}}class iu{constructor(C,x,F,q,X){this.app=C,this._client=x,this._storageCache=F,this._storage=q,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vs(D,C){const x=D.target.error||void 0;return _r.create(C,{originalErrorMessage:x&&x?.message})}const ui="app_namespace_store";class Kr{constructor(C,x,F,q=function zp(){return new Promise((D,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{C(Vs(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ui,{keyPath:"compositeKey"})}}catch(x){C(_r.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,X)=>{const W=F.transaction([ui],"readonly").objectStore(ui),st=x.createCompositeKey(C);try{const ht=W.get(st);ht.onerror=Mt=>{X(Vs(Mt,"storage-get"))},ht.onsuccess=Mt=>{const ze=Mt.target.result;q(ze?ze.value:void 0)}}catch(ht){X(_r.create("storage-get",{originalErrorMessage:ht?.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const q=yield F.openDbPromise;return new Promise((X,Ae)=>{const st=q.transaction([ui],"readwrite").objectStore(ui),ht=F.createCompositeKey(C);try{const Mt=st.put({compositeKey:ht,value:x});Mt.onerror=ze=>{Ae(Vs(ze,"storage-set"))},Mt.onsuccess=()=>{X()}}catch(Mt){Ae(_r.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,X)=>{const W=F.transaction([ui],"readwrite").objectStore(ui),st=x.createCompositeKey(C);try{const ht=W.delete(st);ht.onerror=Mt=>{X(Vs(Mt,"storage-delete"))},ht.onsuccess=()=>{q()}}catch(ht){X(_r.create("storage-delete",{originalErrorMessage:ht?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Yr{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),q=C.storage.getActiveConfig(),X=yield x;X&&(C.lastFetchStatus=X);const Ae=yield F;Ae&&(C.lastSuccessfulFetchTimestampMillis=Ae);const W=yield q;W&&(C.activeConfig=W)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function wr(){return $l.apply(this,arguments)}function $l(){return($l=(0,O.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}!function Zi(){(0,ee._registerComponent)(new ne.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),q=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw _r.create("registration-window");if(!(0,te.hl)())throw _r.create("indexed-db-unavailable");const{projectId:X,apiKey:Ae,appId:W}=F.options;if(!X)throw _r.create("registration-project-id");if(!Ae)throw _r.create("registration-api-key");if(!W)throw _r.create("registration-app-id");const st=new Kr(W,F.name,x=x||"firebase"),ht=new Yr(st),Mt=new le.Yd(Zt);Mt.logLevel=le.in.ERROR;const ze=new Wr(q,ee.SDK_VERSION,x,X,Ae,W),br=new Ht(ze,st),un=new go(br,st,ht,Mt),ut=new iu(F,un,ht,st,Mt);return function ks(D){const C=(0,te.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ut),ut},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(Zt,"0.4.4"),(0,ee.registerVersion)(Zt,"0.4.4","esm2017")}();const Hl="/firebase-messaging-sw.js",Wi="/firebase-cloud-messaging-push-scope",Us="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",da="https://fcmregistrations.googleapis.com/v1",wc="google.c.a.c_id",zh="google.c.a.c_l",qh="google.c.a.ts",qp="google.c.a.e";var Bs=(()=>{return(D=Bs||(Bs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Bs;var D})();function Ri(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zp(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),q=new Uint8Array(F.length);for(let X=0;X<F.length;++X)q[X]=F.charCodeAt(X);return q}const Ic="fcm_token_details_db",Ec=5,ci="fcm_token_object_Store";function ou(){return ou=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Ic))return null;let C=null;return(yield(0,ue.X3)(Ic,Ec,{upgrade:(F=(0,O.Z)(function*(q,X,Ae,W){var st;if(X<2||!q.objectStoreNames.contains(ci))return;const ht=W.objectStore(ci),Mt=yield ht.index("fcmSenderId").get(D);if(yield ht.clear(),Mt)if(2===X){const ze=Mt;if(!ze.auth||!ze.p256dh||!ze.endpoint)return;C={token:ze.fcmToken,createTime:null!==(st=ze.createTime)&&void 0!==st?st:Date.now(),subscriptionOptions:{auth:ze.auth,p256dh:ze.p256dh,endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:"string"==typeof ze.vapidKey?ze.vapidKey:Ri(ze.vapidKey)}}}else if(3===X){const ze=Mt;C={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:Ri(ze.auth),p256dh:Ri(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:Ri(ze.vapidKey)}}}else if(4===X){const ze=Mt;C={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:Ri(ze.auth),p256dh:Ri(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:Ri(ze.vapidKey)}}}}),function(X,Ae,W,st){return F.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Ic),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),function Zh(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var F}),ou.apply(this,arguments)}const au="firebase-messaging-database",Wp=1,Qr="firebase-messaging-store";let Gl=null;function js(){return Gl||(Gl=(0,ue.X3)(au,Wp,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Qr)}})),Gl}function ha(D){return vo.apply(this,arguments)}function vo(){return vo=(0,O.Z)(function*(D){const C=gs(D),F=yield(yield js()).transaction(Qr).objectStore(Qr).get(C);if(F)return F;{const q=yield function Dc(D){return ou.apply(this,arguments)}(D.appConfig.senderId);if(q)return yield _o(D,q),q}}),vo.apply(this,arguments)}function _o(D,C){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(D,C){const x=gs(D),q=(yield js()).transaction(Qr,"readwrite");return yield q.objectStore(Qr).put(C,x),yield q.done,C})).apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(D){const C=gs(D),F=(yield js()).transaction(Qr,"readwrite");yield F.objectStore(Qr).delete(C),yield F.done})).apply(this,arguments)}function gs({appConfig:D}){return D.appId}const Jt=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cu(D,C){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(D,C){const x=yield Cc(D),F=Wn(C),q={method:"POST",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(ga(D.appConfig),q)).json()}catch(Ae){throw Jt.create("token-subscribe-failed",{errorInfo:Ae?.toString()})}if(X.error)throw Jt.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Jt.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(D,C){const x=yield Cc(D),F=Wn(C.subscriptionOptions),q={method:"PATCH",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${ga(D.appConfig)}/${C.token}`,q)).json()}catch(Ae){throw Jt.create("token-update-failed",{errorInfo:Ae?.toString()})}if(X.error)throw Jt.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Jt.create("token-update-no-token");return X.token})).apply(this,arguments)}function Ni(D,C){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield Cc(D)};try{const X=yield(yield fetch(`${ga(D.appConfig)}/${C}`,F)).json();if(X.error)throw Jt.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(q){throw Jt.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function ga({projectId:D}){return`${da}/projects/${D}/registrations`}function Cc(D){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Wn({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const q={web:{endpoint:x,auth:C,p256dh:D}};return F!==Us&&(q.web.applicationPubKey=F),q}const Tc=6048e5;function ma(){return ma=(0,O.Z)(function*(D){const C=yield function Zl(D,C){return ya.apply(this,arguments)}(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Ri(C.getKey("auth")),p256dh:Ri(C.getKey("p256dh"))},F=yield ha(D.firebaseDependencies);if(F){if(function Wh(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}(F.subscriptionOptions,x))return Date.now()>=F.createTime+Tc?function Sc(D,C){return At.apply(this,arguments)}(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Ni(D.firebaseDependencies,F.token)}catch(q){console.warn(q)}return ql(D.firebaseDependencies,x)}return ql(D.firebaseDependencies,x)}),ma.apply(this,arguments)}function Io(){return Io=(0,O.Z)(function*(D){const C=yield ha(D.firebaseDependencies);C&&(yield Ni(D.firebaseDependencies,C.token),yield function bc(D){return uu.apply(this,arguments)}(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),Io.apply(this,arguments)}function At(){return At=(0,O.Z)(function*(D,C){try{const x=yield function Sn(D,C){return lu.apply(this,arguments)}(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield _o(D.firebaseDependencies,F),x}catch(x){throw yield function Ki(D){return Io.apply(this,arguments)}(D),x}}),At.apply(this,arguments)}function ql(D,C){return du.apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(D,C){const F={token:yield cu(D,C),createTime:Date.now(),subscriptionOptions:C};return yield _o(D,F),F.token})).apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zp(C)})})).apply(this,arguments)}function hu(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Kh(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const q=C.notification.image;q&&(D.notification.image=q);const X=C.notification.icon;X&&(D.notification.icon=X)}(C,D),function En(D,C){C.data&&(D.data=C.data)}(C,D),function Ce(D,C){var x,F,q,X,Ae;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const W=null!==(q=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==q?q:null===(X=C.notification)||void 0===X?void 0:X.click_action;W&&(D.fcmOptions.link=W);const st=null===(Ae=C.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;st&&(D.fcmOptions.analyticsLabel=st)}(C,D),C}function fu(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function Kn(D){return Jt.create("missing-app-config-values",{valueName:D})}fu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ac{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Yh(D){if(!D||!D.options)throw Kn("App Configuration Object");if(!D.name)throw Kn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw Kn(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:q,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Eo(D){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Hl,{scope:Wi}),D.swRegistration.update().catch(()=>{})}catch(C){throw Jt.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Eo(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Jt.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Us)})).apply(this,arguments)}function On(){return On=(0,O.Z)(function*(D,C){if(!navigator)throw Jt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Jt.create("permission-blocked");return yield function Kl(D,C){return pu.apply(this,arguments)}(D,C?.vapidKey),yield function Wl(D,C){return Do.apply(this,arguments)}(D,C?.serviceWorkerRegistration),function wo(D){return ma.apply(this,arguments)}(D)}),On.apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(D,C,x){const F=function _a(D){switch(D){case Bs.NOTIFICATION_CLICKED:return"notification_open";case Bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[wc],message_name:x[zh],message_time:x[qh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gu(){return gu=(0,O.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Bs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(hu(x)):D.onMessageHandler.next(hu(x)));const F=x.data;(function Wt(D){return"object"==typeof D&&!!D&&wc in D})(F)&&"1"===F[qp]&&(yield function Xr(D,C,x){return va.apply(this,arguments)}(D,x.messageType,F))}),gu.apply(this,arguments)}const Yl="@firebase/messaging",Mc=D=>{const C=new Ac(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function li(D,C){return gu.apply(this,arguments)}(C,x)),C},mu=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function xc(D,C){return On.apply(this,arguments)}(C,F)}};function Rc(){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(){try{yield(0,te.eu)()}catch{return!1}return typeof window<"u"&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function $s(){(0,ee._registerComponent)(new ne.wA("messaging",Mc,"PUBLIC")),(0,ee._registerComponent)(new ne.wA("messaging-internal",mu,"PRIVATE")),(0,ee.registerVersion)(Yl,"0.12.4"),(0,ee.registerVersion)(Yl,"0.12.4","esm2017")}();const Xl="analytics",Jp="firebase_id",Fr="origin",wa=6e4,gn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ms="https://www.googletagmanager.com/gtag/js",Hn=new le.Yd("@firebase/analytics"),ei=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function eg(D){if(!D.startsWith(ms)){const C=ei.create("invalid-gtag-resource",{gtagURL:D});return Hn.warn(C.message),""}return D}function tg(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function ys(){return(ys=(0,O.Z)(function*(D,C,x,F,q,X){const Ae=F[q];try{if(Ae)yield C[Ae];else{const st=(yield tg(x)).find(ht=>ht.measurementId===q);st&&(yield C[st.appId])}}catch(W){Hn.error(W)}D("config",q,X)})).apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(D,C,x,F,q){try{let X=[];if(q&&q.send_to){let Ae=q.send_to;Array.isArray(Ae)||(Ae=[Ae]);const W=yield tg(x);for(const st of Ae){const ht=W.find(ze=>ze.measurementId===st),Mt=ht&&C[ht.appId];if(!Mt){X=[];break}X.push(Mt)}}0===X.length&&(X=Object.values(C)),yield Promise.all(X),D("event",F,q||{})}catch(X){Hn.error(X)}})).apply(this,arguments)}const td=30,hi=new class rg{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Lc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Pi(){return(Pi=(0,O.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,q={method:"GET",headers:Lc(F)},X=gn.replace("{app-id}",x),Ae=yield fetch(X,q);if(200!==Ae.status&&304!==Ae.status){let W="";try{const st=yield Ae.json();null!==(C=st.error)&&void 0!==C&&C.message&&(W=st.error.message)}catch{}throw ei.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:W})}return Ae.json()})).apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(D,C=hi,x){const{appId:F,apiKey:q,measurementId:X}=D.options;if(!F)throw ei.create("no-app-id");if(!q){if(X)return{measurementId:X,appId:F};throw ei.create("no-api-key")}const Ae=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},W=new Xh;return setTimeout((0,O.Z)(function*(){W.abort()}),void 0!==x?x:wa),vs({appId:F,apiKey:q,measurementId:X},Ae,W,C)})).apply(this,arguments)}function vs(D,C,x){return Gs.apply(this,arguments)}function Gs(){return Gs=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,q=hi){var X;const{appId:Ae,measurementId:W}=D;try{yield function Vc(D,C){return new Promise((x,F)=>{const q=Math.max(C-Date.now(),0),X=setTimeout(x,q);D.addEventListener(()=>{clearTimeout(X),F(ei.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(F,C)}catch(st){if(W)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${W} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:Ae,measurementId:W};throw st}try{const st=yield function Jh(D){return Pi.apply(this,arguments)}(D);return q.deleteThrottleMetadata(Ae),st}catch(st){const ht=st;if(!function To(D){if(!(D instanceof te.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ht)){if(q.deleteThrottleMetadata(Ae),W)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${W} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:Ae,measurementId:W};throw st}const Mt=503===Number(null===(X=ht?.customData)||void 0===X?void 0:X.httpStatus)?(0,te.$s)(x,q.intervalMillis,td):(0,te.$s)(x,q.intervalMillis),ze={throttleEndTimeMillis:Date.now()+Mt,backoffCount:x+1};return q.setThrottleMetadata(Ae,ze),Hn.debug(`Calling attemptFetch again in ${Mt} millis`),vs(D,ze,F,q)}}),Gs.apply(this,arguments)}class Xh{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let So,_u;function Ao(){return(Ao=(0,O.Z)(function*(D,C,x,F,q){if(q&&q.global)D("event",x,F);else{const X=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(){if(!(0,te.hl)())return Hn.warn(ei.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(D){return Hn.warn(ei.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Yi(){return Yi=(0,O.Z)(function*(D,C,x,F,q,X,Ae){var W;const st=function Co(D){return mn.apply(this,arguments)}(D);st.then(un=>{x[un.measurementId]=un.appId,D.options.measurementId&&un.measurementId!==D.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${un.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(un=>Hn.error(un)),C.push(st);const ht=function ef(){return ba.apply(this,arguments)}().then(un=>{if(un)return F.getId()}),[Mt,ze]=yield Promise.all([st,ht]);(function ng(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(ms)&&x.src.includes(D))return x;return null})(X)||function kc(D,C){const x=function Pc(D,C){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(D,C)),x}("firebase-js-sdk-policy",{createScriptURL:eg}),F=document.createElement("script"),q=`${ms}?l=${D}&id=${C}`;F.src=x?x?.createScriptURL(q):q,F.async=!0,document.head.appendChild(F)}(X,Mt.measurementId),_u&&(q("consent","default",_u),function Is(D){_u=D}(void 0)),q("js",new Date);const br=null!==(W=Ae?.config)&&void 0!==W?W:{};return br[Fr]="firebase",br.update=!0,null!=ze&&(br[Jp]=ze),q("config",Mt.measurementId,br),So&&(q("set",So),function Ro(D){So=D}(void 0)),Mt.measurementId}),Yi.apply(this,arguments)}class nd{constructor(C){this.app=C}_delete(){return delete yi[this.app.options.appId],Promise.resolve()}}let yi={},wu=[];const qs={};let Iu,Er,Zs="dataLayer",rd="gtag",Bc=!1;function sd(D,C,x){!function No(){const D=[];if((0,te.ru)()&&D.push("This is a browser extension environment."),(0,te.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,q)=>`(${q+1}) ${F}`).join(" "),x=ei.create("invalid-analytics-context",{errorInfo:C});Hn.warn(x.message)}}();const F=D.options.appId;if(!F)throw ei.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ei.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=yi[F])throw ei.create("already-exists",{id:F});if(!Bc){!function bo(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Zs);const{wrappedGtag:X,gtagCore:Ae}=function ed(D,C,x,F,q){let X=function(...Ae){window[F].push(arguments)};return window[q]&&"function"==typeof window[q]&&(X=window[q]),window[q]=function Ia(D,C,x,F){function X(){return X=(0,O.Z)(function*(Ae,W,st){try{"event"===Ae?yield function vu(D,C,x,F,q){return di.apply(this,arguments)}(D,C,x,W,st):"config"===Ae?yield function Hs(D,C,x,F,q,X){return ys.apply(this,arguments)}(D,C,x,F,W,st):"consent"===Ae?D("consent","update",st):D("set",W)}catch(ht){Hn.error(ht)}}),X.apply(this,arguments)}return function q(Ae,W,st){return X.apply(this,arguments)}}(X,D,C,x),{gtagCore:X,wrappedGtag:window[q]}}(yi,wu,qs,Zs,rd);Er=X,Iu=Ae,Bc=!0}return yi[F]=function tf(D,C,x,F,q,X,Ae){return Yi.apply(this,arguments)}(D,wu,qs,C,Iu,Zs,x),new nd(D)}function Es(){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}const rf="@firebase/analytics";!function sf(){(0,ee._registerComponent)(new ne.wA(Xl,(C,{options:x})=>sd(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ee._registerComponent)(new ne.wA("analytics-internal",function D(C){try{const x=C.getProvider(Xl).getImmediate();return{logEvent:(F,q,X)=>function Ds(D,C,x,F){D=(0,te.m9)(D),function Ea(D,C,x,F,q){return Ao.apply(this,arguments)}(Er,yi[D.app.options.appId],C,x,F).catch(q=>Hn.error(q))}(x,F,q,X)}}catch(x){throw ei.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ee.registerVersion)(rf,"0.9.5"),(0,ee.registerVersion)(rf,"0.9.5","esm2017")}();var af=P(4408),uf=P(7565);const Po=new class sg extends uf.v{}(class Fy extends af.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):(C.flush(this),0)}});var lf=P(4986),Yn=P(8505),Du=P(9468),Qi=P(5363);const ko=new h.GfV("7.5.0"),Dr="__angularfire_symbol__analyticsIsSupportedValue",bs="__angularfire_symbol__analyticsIsSupported",jc="__angularfire_symbol__remoteConfigIsSupportedValue",Sa="__angularfire_symbol__remoteConfigIsSupported",Cs="__angularfire_symbol__messagingIsSupportedValue",$c="__angularfire_symbol__messagingIsSupported";function Aa(D,C,x){if(C){if(1===C.length)return C[0];const X=C.filter(Ae=>Ae.app===x);if(1===X.length)return X[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[bs]||(globalThis[bs]=Es().then(D=>globalThis[Dr]=D).catch(()=>globalThis[Dr]=!1)),globalThis[$c]||(globalThis[$c]=Rc().then(D=>globalThis[Cs]=D).catch(()=>globalThis[Cs]=!1)),globalThis[Sa]||(globalThis[Sa]=wr().then(D=>globalThis[jc]=D).catch(()=>globalThis[jc]=!1));const Lr=(D,C)=>{const x=C?[C]:(0,Y.C6)(),F=[];return x.forEach(q=>{q.container.getProvider(D).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function Xt(){}class ki{constructor(C,x=Po){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const q=this.zone;return this.delegate.schedule(function(Ae){q.runGuarded(()=>{C.apply(this,[Ae])})},x,F)}}class gt{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xt,{},Xt,Xt)),x.pipe((0,Yn.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pn=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ki(Zone.current)),this.insideAngular=x.run(()=>new ki(Zone.current,lf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(h.LFG(h.R0b))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function vi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Vn(D){return vi(),function Ys(D){return function(x){return(x=x.lift(new gt(D.ngZone))).pipe((0,Du.R)(D.outsideAngular),(0,Qi.Q)(D.insideAngular))}}(vi())(D)}},2090:(mt,De,P)=>{P.d(De,{$s:()=>bt,BH:()=>Te,G6:()=>Se,L:()=>ae,LL:()=>It,Pz:()=>ye,Sg:()=>Fe,UG:()=>ge,US:()=>ne,ZB:()=>Z,ZR:()=>nn,aH:()=>_e,b$:()=>pt,eu:()=>Be,hl:()=>Oe,jU:()=>Ve,m9:()=>vr,ne:()=>Rt,pd:()=>mr,r3:()=>si,ru:()=>Ze,tV:()=>B,uI:()=>V,vZ:()=>qr,w1:()=>ie,xO:()=>mi,xb:()=>ds,z$:()=>Me,zI:()=>et,zd:()=>Cn});const ee=function(U){const L=[];let z=0;for(let he=0;he<U.length;he++){let J=U.charCodeAt(he);J<128?L[z++]=J:J<2048?(L[z++]=J>>6|192,L[z++]=63&J|128):55296==(64512&J)&&he+1<U.length&&56320==(64512&U.charCodeAt(he+1))?(J=65536+((1023&J)<<10)+(1023&U.charCodeAt(++he)),L[z++]=J>>18|240,L[z++]=J>>12&63|128,L[z++]=J>>6&63|128,L[z++]=63&J|128):(L[z++]=J>>12|224,L[z++]=J>>6&63|128,L[z++]=63&J|128)}return L},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let J=0;J<U.length;J+=3){const nt=U[J],We=J+1<U.length,on=We?U[J+1]:0,Tn=J+2<U.length,Rn=Tn?U[J+2]:0;let kr=(15&on)<<2|Rn>>6,xi=63&Rn;Tn||(xi=64,We||(kr=64)),he.push(z[nt>>2],z[(3&nt)<<4|on>>4],z[kr],z[xi])}return he.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(ee(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let z=0,he=0;for(;z<U.length;){const J=U[z++];if(J<128)L[he++]=String.fromCharCode(J);else if(J>191&&J<224){const nt=U[z++];L[he++]=String.fromCharCode((31&J)<<6|63&nt)}else if(J>239&&J<365){const Tn=((7&J)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;L[he++]=String.fromCharCode(55296+(Tn>>10)),L[he++]=String.fromCharCode(56320+(1023&Tn))}else{const nt=U[z++],We=U[z++];L[he++]=String.fromCharCode((15&J)<<12|(63&nt)<<6|63&We)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let J=0;J<U.length;){const nt=z[U.charAt(J++)],on=J<U.length?z[U.charAt(J)]:0;++J;const Rn=J<U.length?z[U.charAt(J)]:64;++J;const Ot=J<U.length?z[U.charAt(J)]:64;if(++J,null==nt||null==on||null==Rn||null==Ot)throw new le;he.push(nt<<2|on>>4),64!==Rn&&(he.push(on<<4&240|Rn>>2),64!==Ot&&he.push(Rn<<6&192|Ot))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ae=function(U){return function(U){const L=ee(U);return ne.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return ne.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Z(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!Ue(z)||(U[z]=Z(U[z],L[z]));return U}function Ue(U){return"__proto__"!==U}const Ie=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&B(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},_e=()=>{var U;return null===(U=Ie())||void 0===U?void 0:U.config},ye=U=>{var L;return null===(L=Ie())||void 0===L?void 0:L[`_${U}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,he)=>{z?this.reject(z):this.resolve(he),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,he))}}}function Fe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=L||"demo-project",J=U.iat||0,nt=U.sub||U.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:J,exp:J+3600,auth_time:J,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(We)),""].join(".")}function Me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function V(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function ge(){var U;const L=null===(U=Ie())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ve(){return"object"==typeof self&&self.self===self}function Ze(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ie(){const U=Me();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Se(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((U,L)=>{try{let z=!0;const he="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(he);J.onsuccess=()=>{J.result.close(),z||self.indexedDB.deleteDatabase(he),U(!0)},J.onupgradeneeded=()=>{z=!1},J.onerror=()=>{var nt;L((null===(nt=J.error)||void 0===nt?void 0:nt.message)||"")}}catch(z){L(z)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nn extends Error{constructor(L,z,he){super(z),this.code=L,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(L,z,he){this.service=L,this.serviceName=z,this.errors=he}create(L,...z){const he=z[0]||{},J=`${this.service}/${L}`,nt=this.errors[L],We=nt?function Kt(U,L){return U.replace(tt,(z,he)=>{const J=L[he];return null!=J?String(J):`<${he}?>`})}(nt,he):"Error";return new nn(J,`${this.serviceName}: ${We} (${J}).`,he)}}const tt=/\{\$([^}]+)}/g;function si(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function ds(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function qr(U,L){if(U===L)return!0;const z=Object.keys(U),he=Object.keys(L);for(const J of z){if(!he.includes(J))return!1;const nt=U[J],We=L[J];if(yt(nt)&&yt(We)){if(!qr(nt,We))return!1}else if(nt!==We)return!1}for(const J of he)if(!z.includes(J))return!1;return!0}function yt(U){return null!==U&&"object"==typeof U}function mi(U){const L=[];for(const[z,he]of Object.entries(U))Array.isArray(he)?he.forEach(J=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(J))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(he));return L.length?"&"+L.join("&"):""}function Cn(U){const L={};return U.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[J,nt]=he.split("=");L[decodeURIComponent(J)]=decodeURIComponent(nt)}}),L}function mr(U){const L=U.indexOf("?");if(!L)return"";const z=U.indexOf("#",L);return U.substring(L,z>0?z:void 0)}function Rt(U,L){const z=new _t(U,L);return z.subscribe.bind(z)}class _t{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(he=>{this.error(he)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,he){let J;if(void 0===L&&void 0===z&&void 0===he)throw new Error("Missing Observer.");J=function Os(U,L){if("object"!=typeof U||null===U)return!1;for(const z of L)if(z in U&&"function"==typeof U[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:he},void 0===J.next&&(J.next=fn),void 0===J.error&&(J.error=fn),void 0===J.complete&&(J.complete=fn);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),nt}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(he){typeof console<"u"&&console.error&&console.error(he)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}const Ai=1e3,$e=2,ve=144e5,at=.5;function bt(U,L=Ai,z=$e){const he=L*Math.pow(z,U),J=Math.round(at*he*(Math.random()-.5)*2);return Math.min(ve,he+J)}function vr(U){return U&&U._delegate?U._delegate:U}},8014:(mt,De,P)=>{var h=P(4650);let Y=null;function O(){return Y}class te{}const ne=new h.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ue(){return(0,h.LFG)(B)}()},providedIn:"platform"}),n})();const ae=new h.OlP("Location Initialized");let B=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){j()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){j()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ne))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Z(){return new B((0,h.LFG)(ne))}()},providedIn:"platform"}),n})();function j(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let lt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ie)},providedIn:"root"}),n})();const de=new h.OlP("appBaseHref");let Ie=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Ge(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Ge(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(de,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ee=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Ge(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Ge(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(de,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Fe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(we(Te(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function ye(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Ue,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(h.LFG(lt))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function _e(){return new Pe((0,h.LFG)(lt))}()},providedIn:"root"}),n})();function Te(n){return n.replace(/\/index.html$/,"")}var Ve=(()=>((Ve=Ve||{})[Ve.Format=0]="Format",Ve[Ve.Standalone=1]="Standalone",Ve))(),Ze=(()=>((Ze=Ze||{})[Ze.Narrow=0]="Narrow",Ze[Ze.Abbreviated=1]="Abbreviated",Ze[Ze.Wide=2]="Wide",Ze[Ze.Short=3]="Short",Ze))(),pt=(()=>((pt=pt||{})[pt.Short=0]="Short",pt[pt.Medium=1]="Medium",pt[pt.Long=2]="Long",pt[pt.Full=3]="Full",pt))(),it=(()=>((it=it||{})[it.Decimal=0]="Decimal",it[it.Group=1]="Group",it[it.List=2]="List",it[it.PercentSign=3]="PercentSign",it[it.PlusSign=4]="PlusSign",it[it.MinusSign=5]="MinusSign",it[it.Exponential=6]="Exponential",it[it.SuperscriptingExponent=7]="SuperscriptingExponent",it[it.PerMille=8]="PerMille",it[it.Infinity=9]="Infinity",it[it.NaN=10]="NaN",it[it.TimeSeparator=11]="TimeSeparator",it[it.CurrencyDecimal=12]="CurrencyDecimal",it[it.CurrencyGroup=13]="CurrencyGroup",it))();function nn(n,e){return wn((0,h.cg1)(n)[h.wAp.DateFormat],e)}function It(n,e){return wn((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function Kt(n,e){return wn((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function tt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===it.CurrencyDecimal)return t[h.wAp.NumberSymbols][it.Decimal];if(e===it.CurrencyGroup)return t[h.wAp.NumberSymbols][it.Group]}return r}function Rs(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function wn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function qr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Cn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,mr={},Ns=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rt=(()=>((Rt=Rt||{})[Rt.Short=0]="Short",Rt[Rt.ShortGMT=1]="ShortGMT",Rt[Rt.Long=2]="Long",Rt[Rt.Extended=3]="Extended",Rt))(),_t=(()=>((_t=_t||{})[_t.FullYear=0]="FullYear",_t[_t.Month=1]="Month",_t[_t.Date=2]="Date",_t[_t.Hours=3]="Hours",_t[_t.Minutes=4]="Minutes",_t[_t.Seconds=5]="Seconds",_t[_t.FractionalSeconds=6]="FractionalSeconds",_t[_t.Day=7]="Day",_t))(),St=(()=>((St=St||{})[St.DayPeriods=0]="DayPeriods",St[St.Days=1]="Days",St[St.Months=2]="Months",St[St.Eras=3]="Eras",St))();function Os(n,e,t,r){let o=function J(n){if(We(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,l=1]=n.split("-").map(m=>+m);return fn(o,u-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Cn))return function nt(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,l,m,w,b),e}(r)}const e=new Date(n);if(!We(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=jn(t,e)||e;let m,l=[];for(;e;){if(m=Ns.exec(e),!m){l.push(e);break}{l=l.concat(m.slice(1));const A=l.pop();if(!A)break;e=A}}let w=o.getTimezoneOffset();r&&(w=L(r,w),o=function he(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function z(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(L(e,o)-o))}(o,r,!0));let b="";return l.forEach(A=>{const N=function U(n){if(vr[n])return vr[n];let e;switch(n){case"G":case"GG":case"GGG":e=qt(St.Eras,Ze.Abbreviated);break;case"GGGG":e=qt(St.Eras,Ze.Wide);break;case"GGGGG":e=qt(St.Eras,Ze.Narrow);break;case"y":e=rn(_t.FullYear,1,0,!1,!0);break;case"yy":e=rn(_t.FullYear,2,0,!0,!0);break;case"yyy":e=rn(_t.FullYear,3,0,!1,!0);break;case"yyyy":e=rn(_t.FullYear,4,0,!1,!0);break;case"Y":e=Lt(1);break;case"YY":e=Lt(2,!0);break;case"YYY":e=Lt(3);break;case"YYYY":e=Lt(4);break;case"M":case"L":e=rn(_t.Month,1,1);break;case"MM":case"LL":e=rn(_t.Month,2,1);break;case"MMM":e=qt(St.Months,Ze.Abbreviated);break;case"MMMM":e=qt(St.Months,Ze.Wide);break;case"MMMMM":e=qt(St.Months,Ze.Narrow);break;case"LLL":e=qt(St.Months,Ze.Abbreviated,Ve.Standalone);break;case"LLLL":e=qt(St.Months,Ze.Wide,Ve.Standalone);break;case"LLLLL":e=qt(St.Months,Ze.Narrow,Ve.Standalone);break;case"w":e=xt(1);break;case"ww":e=xt(2);break;case"W":e=xt(1,!0);break;case"d":e=rn(_t.Date,1);break;case"dd":e=rn(_t.Date,2);break;case"c":case"cc":e=rn(_t.Day,1);break;case"ccc":e=qt(St.Days,Ze.Abbreviated,Ve.Standalone);break;case"cccc":e=qt(St.Days,Ze.Wide,Ve.Standalone);break;case"ccccc":e=qt(St.Days,Ze.Narrow,Ve.Standalone);break;case"cccccc":e=qt(St.Days,Ze.Short,Ve.Standalone);break;case"E":case"EE":case"EEE":e=qt(St.Days,Ze.Abbreviated);break;case"EEEE":e=qt(St.Days,Ze.Wide);break;case"EEEEE":e=qt(St.Days,Ze.Narrow);break;case"EEEEEE":e=qt(St.Days,Ze.Short);break;case"a":case"aa":case"aaa":e=qt(St.DayPeriods,Ze.Abbreviated);break;case"aaaa":e=qt(St.DayPeriods,Ze.Wide);break;case"aaaaa":e=qt(St.DayPeriods,Ze.Narrow);break;case"b":case"bb":case"bbb":e=qt(St.DayPeriods,Ze.Abbreviated,Ve.Standalone,!0);break;case"bbbb":e=qt(St.DayPeriods,Ze.Wide,Ve.Standalone,!0);break;case"bbbbb":e=qt(St.DayPeriods,Ze.Narrow,Ve.Standalone,!0);break;case"B":case"BB":case"BBB":e=qt(St.DayPeriods,Ze.Abbreviated,Ve.Format,!0);break;case"BBBB":e=qt(St.DayPeriods,Ze.Wide,Ve.Format,!0);break;case"BBBBB":e=qt(St.DayPeriods,Ze.Narrow,Ve.Format,!0);break;case"h":e=rn(_t.Hours,1,-12);break;case"hh":e=rn(_t.Hours,2,-12);break;case"H":e=rn(_t.Hours,1);break;case"HH":e=rn(_t.Hours,2);break;case"m":e=rn(_t.Minutes,1);break;case"mm":e=rn(_t.Minutes,2);break;case"s":e=rn(_t.Seconds,1);break;case"ss":e=rn(_t.Seconds,2);break;case"S":e=rn(_t.FractionalSeconds,1);break;case"SS":e=rn(_t.FractionalSeconds,2);break;case"SSS":e=rn(_t.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ai(Rt.Short);break;case"ZZZZZ":e=Ai(Rt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ai(Rt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ai(Rt.Long);break;default:return null}return vr[n]=e,e}(A);b+=N?N(o,t,w):"''"===A?"'":A.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function fn(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function jn(n,e){const t=function ce(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(mr[t]=mr[t]||{},mr[t][e])return mr[t][e];let r="";switch(e){case"shortDate":r=nn(n,pt.Short);break;case"mediumDate":r=nn(n,pt.Medium);break;case"longDate":r=nn(n,pt.Long);break;case"fullDate":r=nn(n,pt.Full);break;case"shortTime":r=It(n,pt.Short);break;case"mediumTime":r=It(n,pt.Medium);break;case"longTime":r=It(n,pt.Long);break;case"fullTime":r=It(n,pt.Full);break;case"short":const o=jn(n,"shortTime"),u=jn(n,"shortDate");r=Or(Kt(n,pt.Short),[o,u]);break;case"medium":const l=jn(n,"mediumTime"),m=jn(n,"mediumDate");r=Or(Kt(n,pt.Medium),[l,m]);break;case"long":const w=jn(n,"longTime"),b=jn(n,"longDate");r=Or(Kt(n,pt.Long),[w,b]);break;case"full":const A=jn(n,"fullTime"),N=jn(n,"fullDate");r=Or(Kt(n,pt.Full),[A,N])}return r&&(mr[t][e]=r),r}function Or(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function yr(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),u+l}function rn(n,e,t=0,r=!1,o=!1){return function(u,l){let m=function Gi(n,e){switch(n){case _t.FullYear:return e.getFullYear();case _t.Month:return e.getMonth();case _t.Date:return e.getDate();case _t.Hours:return e.getHours();case _t.Minutes:return e.getMinutes();case _t.Seconds:return e.getSeconds();case _t.FractionalSeconds:return e.getMilliseconds();case _t.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===_t.Hours)0===m&&-12===t&&(m=12);else if(n===_t.FractionalSeconds)return function ua(n,e){return yr(n,3).substring(0,e)}(m,e);const w=tt(l,it.MinusSign);return yr(m,e,w,r,o)}}function qt(n,e,t=Ve.Format,r=!1){return function(o,u){return function Pr(n,e,t,r,o,u){switch(t){case St.Months:return function Oe(n,e,t){const r=(0,h.cg1)(n),u=wn([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return wn(u,t)}(e,o,r)[n.getMonth()];case St.Days:return function Se(n,e,t){const r=(0,h.cg1)(n),u=wn([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return wn(u,t)}(e,o,r)[n.getDay()];case St.DayPeriods:const l=n.getHours(),m=n.getMinutes();if(u){const b=function si(n){const e=(0,h.cg1)(n);return Rs(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?qr(r):[qr(r[0]),qr(r[1])])}(e),A=function zr(n,e,t){const r=(0,h.cg1)(n);Rs(r);const u=wn([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return wn(u,t)||[]}(e,o,r),N=b.findIndex($=>{if(Array.isArray($)){const[Q,pe]=$,Ne=l>=Q.hours&&m>=Q.minutes,je=l<pe.hours||l===pe.hours&&m<pe.minutes;if(Q.hours<pe.hours){if(Ne&&je)return!0}else if(Ne||je)return!0}else if($.hours===l&&$.minutes===m)return!0;return!1});if(-1!==N)return A[N]}return function me(n,e,t){const r=(0,h.cg1)(n),u=wn([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return wn(u,t)}(e,o,r)[l<12?0:1];case St.Eras:return function Be(n,e){return wn((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function Ai(n){return function(e,t,r){const o=-1*r,u=tt(t,it.MinusSign),l=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case Rt.Short:return(o>=0?"+":"")+yr(l,2,u)+yr(Math.abs(o%60),2,u);case Rt.ShortGMT:return"GMT"+(o>=0?"+":"")+yr(l,1,u);case Rt.Long:return"GMT"+(o>=0?"+":"")+yr(l,2,u)+":"+yr(Math.abs(o%60),2,u);case Rt.Extended:return 0===r?"Z":(o>=0?"+":"")+yr(l,2,u)+":"+yr(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}const $e=0,ve=4;function bt(n){return fn(n.getFullYear(),n.getMonth(),n.getDate()+(ve-n.getDay()))}function xt(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();o=1+Math.floor((l+u)/7)}else{const u=bt(t),l=function at(n){const e=fn(n,$e,1).getDay();return fn(n,0,1+(e<=ve?ve:ve+7)-e)}(u.getFullYear()),m=u.getTime()-l.getTime();o=1+Math.round(m/6048e5)}return yr(o,n,tt(r,it.MinusSign))}}function Lt(n,e=!1){return function(t,r){return yr(bt(t).getFullYear(),n,tt(r,it.MinusSign),e)}}const vr={};function L(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function We(n){return n instanceof Date&&!isNaN(n.valueOf())}const Ps=/\s+/,oi=[];let rt=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this.initialClasses=oi,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ps):oi}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ps):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ps).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Mi{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Mi(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),ks(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ks(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ks(n,e){n.context.$implicit=e.item}let zi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ca,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ut("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ut("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ca{constructor(){this.$implicit=null,this.ngIf=null}}function Ut(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}const Zi=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),su=new h.OlP("DATE_PIPE_DEFAULT_OPTIONS");let ps=(()=>{class n{constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,u){if(null==t||""===t||t!=t)return null;try{return Os(t,r??this.defaultOptions?.dateFormat??"mediumDate",u||this.locale,o??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(l){throw function Ht(n,e){return new h.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(Zi,24),h.Y36(su,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Ic=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const ci="server";function au(n){return n===ci}let js=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new ha((0,h.LFG)(ne),window)}),n})();class ha{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function _o(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vo(this.window.history)||vo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function vo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bo extends te{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hs extends bo{static makeCurrent(){!function ee(n){Y||(Y=n)}(new Hs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function vu(){return ys=ys||document.querySelector("base"),ys?ys.getAttribute("href"):null}();return null==t?null:function Ia(n){di=di||document.createElement("a"),di.setAttribute("href",n);const e=di.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ru(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let di,ys=null;const ed=new h.OlP("TRANSITION_ID"),td=[{provide:h.ip1,useFactory:function ng(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[ed,ne,h.zs3],multi:!0}];let rg=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const hi=new h.OlP("EventManagerPlugins");let Lc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hi),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Jh{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Pi=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let u=o.get(t)??0;return u+=r,u>0?o.set(t,u):o.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Co=(()=>{class n extends Pi{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const u=this.styleRef.get(r);u?u.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ne))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vs=/%COMP%/g,Ea=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function xo(n,e){return e.flat(100).map(t=>t.replace(vs,n))}function zs(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _s=(()=>{class n{constructor(t,r,o,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new fi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof Ro?o.applyToHost(t):o instanceof Is&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case h.ifc.Emulated:u=new Ro(l,m,r,this.appId,w);break;case h.ifc.ShadowDom:return new _u(l,m,t,r);default:u=new Is(l,m,r,w)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lc),h.LFG(Co),h.LFG(h.AFp),h.LFG(Ea))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class fi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ws(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ws(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=mn[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=mn[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zs(r)):this.eventManager.addEventListener(e,t,zs(r))}}function ws(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _u extends fi{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=xo(o.id,o.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Is extends fi{constructor(e,t,r,o,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=xo(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ro extends Is{constructor(e,t,r,o,u){const l=o+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Ao(n){return"_ngcontent-%COMP%".replace(vs,n)}(l),this.hostAttr=function Uc(n){return"_nghost-%COMP%".replace(vs,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let ef=(()=>{class n extends Jh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ne))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ba=["alt","control","meta","shift"],tf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nd=(()=>{class n extends Jh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),ba.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let o=tf[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ba.forEach(l=>{l!==o&&(0,Yi[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ne))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const No=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Iu(){Hs.makeCurrent()},multi:!0},{provide:ne,useFactory:function Bc(){return(0,h.RDi)(document),document},deps:[]}]),sd=new h.OlP(""),od=[{provide:h.rWj,useClass:class Fc{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Eu=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Er(){return new h.qLn},deps:[]},{provide:hi,useClass:ef,multi:!0,deps:[ne,h.R0b,h.Lbi]},{provide:hi,useClass:nd,multi:!0,deps:[ne]},{provide:_s,useClass:_s,deps:[Lc,Co,h.AFp,Ea]},{provide:h.FYo,useExisting:_s},{provide:Pi,useExisting:Co},{provide:Co,useClass:Co,deps:[ne]},{provide:Lc,useClass:Lc,deps:[hi,h.R0b]},{provide:class bc{},useClass:rg,deps:[]},[]];let Es=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:ed,useExisting:h.AFp},td]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(sd,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Eu,...od],imports:[Ic,h.hGG]}),n})(),Oo=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ne))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ad(){return new Oo((0,h.LFG)(ne))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var An=P(2011),Aa=P(4986),Lr=P(9751),Xt=P(8996),ki=P(7669);function gt(...n){const e=(0,ki.yG)(n);return(0,Xt.D)(n,e)}var Pn=P(2122),vi=P(8189);function _i(...n){return function hf(){return(0,vi.J)(1)}()((0,Xt.D)(n,(0,ki.yG)(n)))}var dr=P(4482);function Ks(...n){const e=(0,ki.yG)(n);return(0,dr.e)((t,r)=>{(e?_i(n,t,e):_i(n,t)).subscribe(r)})}var Vn=P(5403);function Ys(){return(0,dr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Vn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var ft=P(4004);function D(n,e){return(0,dr.e)(function ud(n,e,t,r,o){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,Vn.x)(l,A=>{const N=b++;w=m?n(w,A,N):(m=!0,A),r&&l.next(w)},o&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}var C=P(4671);function F(n,e){return n===e}function q(n,e){return(0,dr.e)((t,r)=>{let o=0;t.subscribe((0,Vn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}P(9800);var ut,Ae=P(3942),W=P(5861),st=P(9681),ht=P(4859),Mt=P(1877),ze=P(2090),br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},un={},xa=xa||{},Et=br||self;function Cr(){}function Tr(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qs(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var bu="closure_uid_"+(1e9*Math.random()>>>0),H0=0;function cg(n,e,t){return n.call.apply(n.bind,arguments)}function G0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function hr(n,e,t){return(hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cg:G0).apply(null,arguments)}function cd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function or(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function Fo(){this.s=this.s,this.o=this.o}Fo.prototype.s=!1,Fo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function ug(n){Object.prototype.hasOwnProperty.call(n,bu)&&n[bu]||(n[bu]=++H0)}(this)},Fo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ma=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function lg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ly(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Tr(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ti.prototype.h=function(){this.defaultPrevented=!0};var q0=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",Cr,e),Et.removeEventListener("test",Cr,e)}catch{}return n}();function ff(n){return/^[\s\xa0]*$/.test(n)}var dg=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ld(n,e){return n<e?-1:n>e?1:0}function Cu(){var n=Et.navigator;return n&&(n=n.userAgent)?n:""}function wi(n){return-1!=Cu().indexOf(n)}function dd(n){return dd[" "](n),n}dd[" "]=Cr;var fd,n,Ts=wi("Opera"),Tu=wi("Trident")||wi("MSIE"),fg=wi("Edge"),hd=fg||Tu,pf=wi("Gecko")&&!(-1!=Cu().toLowerCase().indexOf("webkit")&&!wi("Edge"))&&!(wi("Trident")||wi("MSIE"))&&!wi("Edge"),gf=-1!=Cu().toLowerCase().indexOf("webkit")&&!wi("Edge");function pg(){var n=Et.document;return n?n.documentMode:void 0}e:{var Hc="",pd=(n=Cu(),pf?/rv:([^\);]+)(\)|;)/.exec(n):fg?/Edge\/([\d\.]+)/.exec(n):Tu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gf?/WebKit\/(\S+)/.exec(n):Ts?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pd&&(Hc=pd?pd[1]:""),Tu){var Gc=pg();if(null!=Gc&&Gc>parseFloat(Hc)){fd=String(Gc);break e}}fd=Hc}var Vy={};var mf=Et.document&&Tu&&(pg()||parseInt(fd,10))||void 0;function ar(n,e){if(ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pf){e:{try{dd(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ra[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ar.X.h.call(this)}}or(ar,ti);var Ra={2:"touch",3:"pen",4:"mouse"};ar.prototype.h=function(){ar.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Na="closure_listenable_"+(1e6*Math.random()|0),Zc=0;function gg(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Zc,this.ba=this.ea=!1}function Su(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function yf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vf(n){const e={};for(const t in n)e[t]=n[t];return e}const mg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _f(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<mg.length;u++)t=mg[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function gd(n){this.src=n,this.g={},this.h=0}function md(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Ma(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Su(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Wc(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}gd.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Wc(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new gg(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var yd="closure_lm_"+(1e6*Math.random()|0),Js={};function Au(n,e,t,r,o){if(r&&r.once)return vd(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Au(n,e[u],t,r,o);return null}return t=Pa(t),n&&n[Na]?n.N(e,t,Qs(r)?!!r.capture:!!r,o):yg(n,e,t,!1,r,o)}function yg(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Qs(o)?!!o.capture:!!o,m=wd(n);if(m||(n[yd]=m=new gd(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function wf(){const e=Kc;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)q0||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Oa(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vd(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)vd(n,e[u],t,r,o);return null}return t=Pa(t),n&&n[Na]?n.O(e,t,Qs(r)?!!r.capture:!!r,o):yg(n,e,t,!0,r,o)}function xu(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)xu(n,e[u],t,r,o);else r=Qs(r)?!!r.capture:!!r,t=Pa(t),n&&n[Na]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Wc(u=n.g[e],t,r,o))&&(Su(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=wd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Wc(e,t,r,o)),(t=-1<n?e[n]:null)&&_d(t))}function _d(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Na])md(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Oa(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=wd(e))?(md(t,n),0==t.h&&(t.src=null,e[yd]=null)):Su(n)}}}function Oa(n){return n in Js?Js[n]:Js[n]="on"+n}function Kc(n,e){if(n.ba)n=!0;else{e=new ar(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&_d(n),n=t.call(r,e)}return n}function wd(n){return(n=n[yd])instanceof gd?n:null}var If="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pa(n){return"function"==typeof n?n:(n[If]||(n[If]=function(e){return n.handleEvent(e)}),n[If])}function fr(){Fo.call(this),this.i=new gd(this),this.P=this,this.I=null}function Sr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ti(e,n);else if(e instanceof ti)e.target=e.target||n;else{var o=e;_f(e=new ti(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Id(l,r,!0,e)&&o}if(o=Id(l=e.g=n,r,!0,e)&&o,o=Id(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Id(l=e.g=t[u],r,!1,e)&&o}function Id(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&md(n.i,l),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}or(fr,Fo),fr.prototype[Na]=!0,fr.prototype.removeEventListener=function(n,e,t,r){xu(this,n,e,t,r)},fr.prototype.M=function(){if(fr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Su(t[r]);delete n.g[e],n.h--}}this.I=null},fr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ef=Et.JSON.stringify;function Uy(){var n=Ru;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Qc,Yc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Df,n=>n.reset());class Df{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _g(n){Et.setTimeout(()=>{throw n},0)}function Mu(n,e){Qc||function By(){var n=Et.Promise.resolve(void 0);Qc=function(){n.then(ka)}}(),Ed||(Qc(),Ed=!0),Ru.add(n,e)}var Ed=!1,Ru=new class vg{constructor(){this.h=this.g=null}add(e,t){const r=Yc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ka(){for(var n;n=Uy();){try{n.h.call(n.g)}catch(t){_g(t)}var e=Yc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ed=!1}function Jc(n,e){fr.call(this),this.h=n||1,this.g=e||Et,this.j=hr(this.lb,this),this.l=Date.now()}function Dd(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function bd(n,e,t){if("function"==typeof n)t&&(n=hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function jy(n){n.g=bd(()=>{n.g=null,n.i&&(n.i=!1,jy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}or(Jc,fr),(ut=Jc.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Sr(this,"tick"),this.ca&&(Dd(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){Jc.X.M.call(this),Dd(this),delete this.g};class Cd extends Fo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jy(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xc(n){Fo.call(this),this.h=n,this.g={}}or(Xc,Fo);var bf=[];function Fa(n,e,t,r){Array.isArray(t)||(t&&(bf[0]=t.toString()),t=bf);for(var o=0;o<t.length;o++){var u=Au(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Cf(n){yf(n.g,function(e,t){this.g.hasOwnProperty(t)&&_d(e)},n),n.g={}}function La(){this.g=!0}function Xs(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Sd(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Ef(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Xc.prototype.M=function(){Xc.X.M.call(this),Cf(this)},Xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},La.prototype.Aa=function(){this.g=!1},La.prototype.info=function(){};var Ji={},Nu=null;function eo(){return Nu=Nu||new fr}function Eg(n){ti.call(this,Ji.Pa,n)}function Lo(n){const e=eo();Sr(e,new Eg(e))}function Dg(n,e){ti.call(this,Ji.STAT_EVENT,n),this.stat=e}function hn(n){const e=eo();Sr(e,new Dg(e,n))}function Ou(n,e){ti.call(this,Ji.Qa,n),this.size=e}function Va(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}Ji.Pa="serverreachability",or(Eg,ti),Ji.STAT_EVENT="statevent",or(Dg,ti),Ji.Qa="timingevent",or(Ou,ti);var el={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ua={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ba(){}function Tf(){}Ba.prototype.h=null;var nl,tl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function to(){ti.call(this,"d")}function Ad(){ti.call(this,"c")}function xd(){}function Pu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Xc(this),this.O=Vr,this.T=new Jc(n=hd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ku}function ku(){this.i=null,this.g="",this.h=!1}or(to,ti),or(Ad,ti),or(xd,Ba),xd.prototype.g=function(){return new XMLHttpRequest},xd.prototype.i=function(){return{}},nl=new xd;var Vr=45e3,Fu={},$a={};function Md(n,e,t){n.K=1,n.v=dt(H(e)),n.s=t,n.P=!0,Xi(n,null)}function Xi(n,e){n.F=Date.now(),rl(n),n.A=H(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Ag(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ku,n.g=OD(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Cd(hr(n.La,n,n.g),n.N)),Fa(n.S,n.g,"readystatechange",n.ib),e=n.H?vf(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Lo(),function wg(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var A=b[0];b=b[1];var N=A.split("_");l=2<=N.length&&"type"==N[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Lu(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Sf(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=bg(n,t),o==$a){4==e&&(n.o=4,hn(14),r=!1),Xs(n.j,n.m,null,"[Incomplete Response]");break}if(o==Fu){n.o=4,hn(15),Xs(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xs(n.j,n.m,o,null),Cg(n,o)}Lu(n)&&o!=$a&&o!=Fu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,hn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ky(e),e.K=!0,hn(11))):(Xs(n.j,n.m,t,"[Invalid Chunked Response]"),Ha(n),no(n))}function bg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?$a:(t=Number(e.substring(t,r)),isNaN(t)?Fu:(r+=1)+t>e.length?$a:(e=e.substr(r,t),n.C=r+t,e))}function rl(n){n.V=Date.now()+n.O,Rd(n,n.O)}function Rd(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Va(hr(n.gb,n),e)}function es(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function no(n){0==n.l.G||n.I||Bg(n.l,n)}function Ha(n){es(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Dd(n.T),Cf(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Cg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Qn(t.h,n)))if(!n.J&&Qn(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ug(t),Fd(t)}Uu(t),hn(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Va(hr(t.cb,t),6e3));if(1>=W0(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Bu(t,11)}else if((n.J||t.g==n)&&Ug(t),!ff(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const A=b[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const pe=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pe){var u=r.h;u.g||-1==pe.indexOf("spdy")&&-1==pe.indexOf("quic")&&-1==pe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Mg(u,u.h),u.h=null))}if(r.D){const Ne=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.za=Ne,He(r.F,r.D,Ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Yy(r,r.H?r.ka:null,r.V),l.J){K0(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&(es(m),rl(m)),r.g=l}else Wy(r);0<t.i.length&&jo(t)}else"stop"!=b[0]&&"close"!=b[0]||Bu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Bu(t,7):Zy(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Lo()}catch{}}function p(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Tr(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function f(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Tr(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function y(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Tr(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=Pu.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==Bo(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const A=Bo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||hd||this.g&&(this.h.h||this.g.fa()||zy(this.g)))){this.I||4!=A||7==e||Lo(),es(this);var t=this.g.aa();this.Y=t;t:if(Lu(this)){var r=zy(this.g);n="";var o=r.length,u=4==Bo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ha(this),no(this);var l="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function Td(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ff(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,hn(12),Ha(this),no(this);break e}Xs(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cg(this,t)}this.P?(Sf(this,A,l),hd&&this.i&&3==A&&(Fa(this.S,this.T,"tick",this.hb),this.T.start())):(Xs(this.j,this.m,l,null),Cg(this,l)),4==A&&Ha(this),this.i&&!this.I&&(4==A?Bg(this.l,this):(this.i=!1,rl(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,hn(12)):(this.o=0,hn(13)),Ha(this),no(this)}}}catch{}},ut.hb=function(){if(this.g){var n=Bo(this.g),e=this.g.fa();this.C<e.length&&(es(this),Sf(this,n,e),this.i&&4!=n&&rl(this))}},ut.cancel=function(){this.I=!0,Ha(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Ig(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Lo(),hn(17)),Ha(this),this.o=2,no(this)):Rd(this,this.V-n)};var _=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function R(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof R){this.h=void 0!==e?e:n.h,oe(this,n.j),this.s=n.s,this.g=n.g,Le(this,n.m),this.l=n.l,e=n.i;var t=new ol;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ot(this,t),this.o=n.o}else n&&(t=String(n).match(_))?(this.h=!!e,oe(this,t[1]||"",!0),this.s=xn(t[2]||""),this.g=xn(t[3]||"",!0),Le(this,t[4]),this.l=xn(t[5]||"",!0),ot(this,t[6]||"",!0),this.o=xn(t[7]||"")):(this.h=!!e,this.i=new ol(null,this.h))}function H(n){return new R(n)}function oe(n,e,t){n.j=t?xn(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Le(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ot(n,e,t){e instanceof ol?(n.i=e,function Hy(n,e){e&&!n.j&&(Vo(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(al(this,r),Ag(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ur(e,Nd)),n.i=new ol(e,n.h))}function He(n,e,t){n.i.set(e,t)}function dt(n){return He(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function xn(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ur(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,il),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function il(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}R.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ur(e,Tg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ur(e,Tg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ur(t,"/"==t.charAt(0)?$y:Sg,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ur(t,sl)),n.join("")};var Tg=/[#\/\?@]/g,Sg=/[#\?:]/g,$y=/[#\?]/g,Nd=/[#\?@]/g,sl=/#/g;function ol(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Vo(n){n.g||(n.g=new Map,n.h=0,n.i&&function T(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function al(n,e){Vo(n),e=Uo(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Af(n,e){return Vo(n),e=Uo(n,e),n.g.has(e)}function Ag(n,e,t){al(n,e),0<t.length&&(n.i=null,n.g.set(Uo(n,e),lg(t)),n.h+=t.length)}function Uo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xf(n){this.l=n||TD,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ga&&Et.g.Ga()&&Et.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=ol.prototype).add=function(n,e){Vo(this),this.i=null,n=Uo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Vo(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ut.oa=function(){Vo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ut.W=function(n){Vo(this);let e=[];if("string"==typeof n)Af(this,n)&&(e=e.concat(this.g.get(Uo(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return Vo(this),this.i=null,Af(this,n=Uo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var TD=10;function xg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function W0(n){return n.h?1:n.g?n.g.size:0}function Qn(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mg(n,e){n.g?n.g.add(e):n.h=e}function K0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Rg(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lg(n.i)}function Ng(){}function SD(){this.g=new Ng}function AD(n,e,t){const r=t||"";try{p(n,function(o,u){let l=o;Qs(o)&&(l=Ef(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Og(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Od(n){this.l=n.ac||null,this.j=n.jb||!1}function Gy(n,e){fr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Y0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xf.prototype.cancel=function(){if(this.i=Rg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ng.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},Ng.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},or(Od,Ba),Od.prototype.g=function(){return new Gy(this.l,this.j)},Od.prototype.i=function(n){return function(){return n}}({}),or(Gy,fr);var Y0=0;function Pd(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ul(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kd(n)}function kd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=Gy.prototype).open=function(n,e){if(this.readyState!=Y0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kd(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ul(this)),this.readyState=Y0},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kd(this)),this.g&&(this.readyState=3,kd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pd(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ul(this):kd(this),3==this.readyState&&Pd(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,ul(this))},ut.Ua=function(n){this.g&&(this.response=n,ul(this))},ut.ga=function(){this.g&&ul(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Gy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Q0=Et.JSON.parse;function Gn(n){fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=MD,this.K=this.L=!1}or(Gn,fr);var MD="",RD=/^https?$/i,J0=["POST","PUT"];function Pg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ND(n),Fg(n)}function ND(n){n.D||(n.D=!0,Sr(n,"complete"),Sr(n,"error"))}function kg(n){if(n.h&&typeof xa<"u"&&(!n.C[1]||4!=Bo(n)||2!=n.aa()))if(n.v&&4==Bo(n))bd(n.Ha,0,n);else if(Sr(n,"readystatechange"),4==Bo(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(_)[1]||null;if(!o&&Et.self&&Et.self.location){var u=Et.self.location.protocol;o=u.substr(0,u.length-1)}r=!RD.test(o?o.toLowerCase():"")}t=r}if(t)Sr(n,"complete"),Sr(n,"success");else{n.m=6;try{var l=2<Bo(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",ND(n)}}finally{Fg(n)}}}function Fg(n,e){if(n.g){Lg(n);const t=n.g,r=n.C[0]?Cr:null;n.g=null,n.C=null,e||Sr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Lg(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function Bo(n){return n.g?n.g.readyState:0}function zy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case MD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Vu(n){let e="";return yf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function qy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Vu(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):He(n,e,t))}function cl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Mf(n){this.Ca=0,this.i=[],this.j=new La,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=cl("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=cl("baseRetryDelayMs",5e3,n),this.bb=cl("retryDelaySeedMs",1e4,n),this.$a=cl("forwardChannelMaxRetries",2,n),this.ta=cl("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new xf(n&&n.concurrentRequestLimit),this.Fa=new SD,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Zy(n){if(Rf(n),3==n.G){var e=n.U++,t=H(n.F);He(t,"SID",n.I),He(t,"RID",e),He(t,"TYPE","terminate"),Nf(n,t),(e=new Pu(n,n.j,e,void 0)).K=2,e.v=dt(H(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=OD(e.l,null),e.g.da(e.v)),e.F=Date.now(),rl(e)}iw(n)}function Fd(n){n.g&&(Ky(n),n.g.cancel(),n.g=null)}function Rf(n){Fd(n),n.u&&(Et.clearTimeout(n.u),n.u=null),Ug(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function jo(n){xg(n.h)||n.m||(n.m=!0,Mu(n.Ja,n),n.C=0)}function Vg(n,e){var t;t=e?e.m:n.U++;const r=H(n.F);He(r,"SID",n.I),He(r,"RID",t),He(r,"AID",n.T),Nf(n,r),n.o&&n.s&&qy(r,n.o,n.s),t=new Pu(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=tw(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Mg(n.h,t),Md(t,r,e)}function Nf(n,e){n.ia&&yf(n.ia,function(t,r){He(e,r,t)}),n.l&&p({},function(t,r){He(e,r,t)})}function tw(n,e,t){t=Math.min(n.i.length,t);var r=n.l?hr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const A=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{AD(A,l,"req"+b+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Wy(n){n.g||n.u||(n.Z=1,Mu(n.Ia,n),n.A=0)}function Uu(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Va(hr(n.Ia,n),rw(n,n.A)),n.A++,0))}function Ky(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function nw(n){n.g=new Pu(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=H(n.sa);He(e,"RID","rpc"),He(e,"SID",n.I),He(e,"CI",n.L?"0":"1"),He(e,"AID",n.T),He(e,"TYPE","xmlhttp"),Nf(n,e),n.o&&n.s&&qy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=dt(H(e)),t.s=null,t.P=!0,Xi(t,n)}function Ug(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function Bg(n,e){var t=null;if(n.g==e){Ug(n),Ky(n),n.g=null;var r=2}else{if(!Qn(n.h,e))return;t=e.D,K0(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Sr(r=eo(),new Ou(r,t)),jo(n)}else Wy(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function ew(n,e){return!(W0(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Va(hr(n.Ja,n,e),rw(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uu(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Bu(n,5);break;case 4:Bu(n,10);break;case 3:Bu(n,6);break;default:Bu(n,2)}}function rw(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=hr(n.kb,n);t||(t=new R("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||oe(t,"https"),dt(t)),function xD(n,e){const t=new La;if(Et.Image){const r=new Image;r.onload=cd(Og,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cd(Og,t,r,"TestLoadImage: error",!1,e),r.onabort=cd(Og,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cd(Og,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else hn(2);n.G=0,n.l&&n.l.va(e),iw(n),Rf(n)}function iw(n){if(n.G=0,n.la=[],n.l){const e=Rg(n.h);(0!=e.length||0!=n.i.length)&&(Ly(n.la,e),Ly(n.la,n.i),n.h.i.length=0,lg(n.i),n.i.length=0),n.l.ua()}}function Yy(n,e,t){var r=t instanceof R?H(t):new R(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Le(r,r.m);else{var o=Et.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new R(null,void 0);r&&oe(u,r),e&&(u.g=e),o&&Le(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&He(r,t,e),He(r,"VER",n.ma),Nf(n,r),r}function OD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gn(t&&n.Da&&!n.ra?new Od({jb:!0}):n.ra)).Ka(n.H),e}function sw(){}function ju(){if(Tu&&!(10<=Number(mf)))throw Error("Environmental error: no available transport.")}function ts(n,e){fr.call(this),this.g=new Mf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!ff(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ff(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vd(this)}function ll(n){to.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ld(){Ad.call(this),this.status=1}function Vd(n){this.g=n}(ut=Gn.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nl.g(),this.C=function ja(n){return n.h||(n.h=n.i())}(this.u?this.u:nl),this.g.onreadystatechange=hr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Pg(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Et.FormData&&n instanceof Et.FormData,!(0<=Ma(J0,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Lg(this),0<this.B&&((this.K=function X0(n){return Tu&&function ni(){return function hg(n){var e=Vy;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=dg(String(fd)).split("."),t=dg("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=ld(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||ld(0==o[2].length,0==u[2].length)||ld(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hr(this.qa,this)):this.A=bd(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Pg(this,u)}},ut.qa=function(){typeof xa<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sr(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Sr(this,"complete"),Sr(this,"abort"),Fg(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fg(this,!0)),Gn.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?kg(this):this.fb())},ut.fb=function(){kg(this)},ut.aa=function(){try{return 2<Bo(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Q0(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=Mf.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Pu(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=vf(u),_f(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tw(this,o,e),He(t=H(this.F),"RID",n),He(t,"CVER",22),this.D&&He(t,"X-HTTP-Session-Id",this.D),Nf(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Vu(u)))+"&"+e:this.o&&qy(t,this.o,u)),Mg(this.h,o),this.Ya&&He(t,"TYPE","init"),this.O?(He(t,"$req",e),He(t,"SID","null"),o.Z=!0,Md(o,t,null)):Md(o,t,e),this.G=2}}else 3==this.G&&(n?Vg(this,n):0==this.i.length||xg(this.h)||Vg(this))},ut.Ia=function(){if(this.u=null,nw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Va(hr(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,hn(10),Fd(this),nw(this))},ut.cb=function(){null!=this.v&&(this.v=null,Fd(this),Uu(this),hn(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))},(ut=sw.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},ju.prototype.g=function(n,e){return new ts(n,e)},or(ts,fr),ts.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;hn(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Yy(n,null,n.V),jo(n)},ts.prototype.close=function(){Zy(this.g)},ts.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Ef(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&jo(e)},ts.prototype.M=function(){this.g.l=null,delete this.j,Zy(this.g),delete this.g,ts.X.M.call(this)},or(ll,to),or(Ld,Ad),or(Vd,sw),Vd.prototype.xa=function(){Sr(this.g,"a")},Vd.prototype.wa=function(n){Sr(this.g,new ll(n))},Vd.prototype.va=function(n){Sr(this.g,new Ld)},Vd.prototype.ua=function(){Sr(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,ts.prototype.send=ts.prototype.u,ts.prototype.open=ts.prototype.m,ts.prototype.close=ts.prototype.close,el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,Ua.COMPLETE="complete",Tf.EventType=tl,tl.OPEN="a",tl.CLOSE="b",tl.ERROR="c",tl.MESSAGE="d",fr.prototype.listen=fr.prototype.N,Gn.prototype.listenOnce=Gn.prototype.O,Gn.prototype.getLastError=Gn.prototype.Oa,Gn.prototype.getLastErrorCode=Gn.prototype.Ea,Gn.prototype.getStatus=Gn.prototype.aa,Gn.prototype.getResponseJson=Gn.prototype.Sa,Gn.prototype.getResponseText=Gn.prototype.fa,Gn.prototype.send=Gn.prototype.da,Gn.prototype.setWithCredentials=Gn.prototype.Ka;var ow=un.createWebChannelTransport=function(){return new ju},PD=un.getStatEventTarget=function(){return eo()},Qy=un.ErrorCode=el,kD=un.EventType=Ua,aw=un.Event=Ji,Jy=un.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Xy=un.FetchXmlHttpFactory=Od,Ud=un.WebChannel=Tf,FD=un.XhrIo=Gn;const jg="@firebase/firestore";class Jn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");let Bd="9.19.0";const $u=new Mt.Yd("@firebase/firestore");function ev(){return $u.logLevel}function Re(n,...e){if($u.logLevel<=Mt.in.DEBUG){const t=e.map(Hu);$u.debug(`Firestore (${Bd}): ${n}`,...t)}}function ur(n,...e){if($u.logLevel<=Mt.in.ERROR){const t=e.map(Hu);$u.error(`Firestore (${Bd}): ${n}`,...t)}}function $o(n,...e){if($u.logLevel<=Mt.in.WARN){const t=e.map(Hu);$u.warn(`Firestore (${Bd}): ${n}`,...t)}}function Hu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${Bd}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function vt(n,e){n||Je()}function Xe(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jn.UNAUTHENTICATED))}shutdown(){}}class UD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cw{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,W.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new tv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new Jn(e)}}class BD{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class jD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new BD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ss{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $D{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.T=t.token,new Ss(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function GD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class lw{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=GD(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function jd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function nv(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new Un(0,0))}static max(){return new wt(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Of{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Of.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Of?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ye extends Of{construct(e,t,r){return new Ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Ye(t)}static emptyPath(){return new Ye([])}}const dw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Of{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return dw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new be(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new be(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new be(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new be(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Ye.fromString(e))}static fromName(e){return new qe(Ye.fromString(e).popFirst(5))}static empty(){return new qe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ye.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Ye(e.slice()))}}class $g{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function rv(n){return n.fields.find(e=>2===e.kind)}function Gu(n){return n.fields.filter(e=>2!==e.kind)}$g.UNKNOWN_ID=-1;class Pf{constructor(e,t){this.fieldPath=e,this.kind=t}}class kf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kf(0,Fi.min())}}function ZD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=wt.fromTimestamp(1e9===r?new Un(t+1,0):new Un(t,r));return new Fi(o,qe.empty(),e)}function iv(n){return new Fi(n.readTime,n.key,-1)}class Fi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fi(wt.min(),qe.empty(),-1)}static max(){return new Fi(wt.max(),qe.empty(),-1)}}function Ga(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const hw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ho(n){return sv.apply(this,arguments)}function sv(){return sv=(0,W.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==hw)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),sv.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},w=>r(w))}),l=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(A=>{l[b]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class ov{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Br,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new $d(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const o=Gg(r.target.error);this.R.reject(new $d(e,o))}}static open(e,t,r,o){try{return new ov(t,e.transaction(o,r))}catch(u){throw new $d(t,u)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KD(t)}}class Go{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Go.S((0,ze.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),As(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ze.hl)())return!1;if(Go.C())return!0;const e=(0,ze.z$)(),t=Go.S(e),r=0<t&&t<10,o=Go.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,W.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new $d(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new be(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new be(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new $d(e,m))},u.onupgradeneeded=l=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.M(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,W.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=ov.open(u.db,e,l?"readonly":"readwrite",r),b=o(w).next(A=>(w.P(),A)).catch(A=>(w.abort(A),re.reject(A))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,A="FirebaseError"!==b.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class WD{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return As(this.L.delete())}}class $d extends be{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dl(n){return"IndexedDbTransactionError"===n.name}class KD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),As(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),As(this.store.add(e))}get(e){return As(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),As(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),As(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}X(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const l=Gg(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new re((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const w=new WD(m),b=t(m.primaryKey,m.value,w);if(b instanceof re){const A=b.catch(N=>(w.done(),re.reject(N)));r.push(A)}w.isDone?o():null===w.K?m.continue():m.continue(w.K)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function As(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Gg(r.target.error);t(o)}})}let fw=!1;function Gg(n){const e=Go.S((0,ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fw||(fw=!0,setTimeout(()=>{throw r},0)),r}}return n}class zg{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){dl(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ho(r)}yield t.et(6e4)}))}}class YD{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,W.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Re("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(Re("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=iv(u);Ga(l,r)>0&&(r=l)}),new Fi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Li=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ff(n){return null==n}function Lf(n){return 0===n&&1/n==-1/0}function pw(n){return"number"==typeof n&&Number.isInteger(n)&&!Lf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=av(e)),e=QD(n.get(t),e);return av(e)}function QD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function av(n){return n+"\x01\x01"}function zo(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ye.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Je(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:Je()}u=l+2}return new Ye(r)}const uv=["userId","batchId"];function Vf(n,e){return[n,Ii(e)]}function qg(n,e,t){return[n,Ii(e),t]}const hS={},cv=["prefixPath","collectionGroup","readTime","documentId"],JD=["prefixPath","collectionGroup","documentId"],fS=["collectionGroup","readTime","prefixPath","documentId"],Hd=["canonicalId","targetId"],gw=["targetId","path"],XD=["path","targetId"],mw=["collectionId","parent"],eb=["indexId","uid"],tb=["uid","sequenceNumber"],Zg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gd=["indexId","uid","orderedDocumentKey"],lv=["userId","collectionPath","documentId"],Uf=["userId","collectionPath","largestBatchId"],dv=["userId","collectionGroup","largestBatchId"],Bf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yw=[...Bf,"documentOverlays"],Wg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kg=Wg,hv=[...Kg,"indexConfiguration","indexState","indexEntries"];class Yg extends Hg{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function pr(n,e){const t=Xe(n);return Go.O(t.at,e)}function vw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Xn{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new Xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jf(this.root,e,this.comparator,!0)}}class jf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??jr.RED,this.left=o??jr.EMPTY,this.right=u??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new jr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return jr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,o){return this}insert(n,e,t){return new jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(e){return new _w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class _w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $r(n){return n.hasNext()?n.getNext():void 0}class Ei{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Ei([])}unionWith(e){let t=new yn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ei(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nb("Invalid base64 string: "+o):o}}(e);return new cr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const ww=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zu(n){if(vt(!!n),"string"==typeof n){let e=0;const t=ww.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fl(n){return"string"==typeof n?cr.fromBase64String(n):cr.fromUint8Array(n)}function Qg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Iw(n){const e=n.mapValue.fields.__previous_value__;return Qg(e)?Iw(e):e}function $f(n){const e=zu(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class pv{constructor(e,t,r,o,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class qu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}const Zu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jg={nullValue:"NULL_VALUE"};function pl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qg(n)?4:nm(n)?9007199254740991:10:Je()}function qo(n,e){if(n===e)return!0;const t=pl(n);if(t!==pl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $f(n).isEqual($f(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=zu(r.timestampValue),l=zu(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,fl(n.bytesValue).isEqual(fl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return er(r.geoPointValue.latitude)===er(o.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return er(r.integerValue)===er(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=er(r.doubleValue),l=er(o.doubleValue);return u===l?Lf(u)===Lf(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return jd(n.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(vw(u)!==vw(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!qo(u[m],l[m])))return!1;return!0}(n,e);default:return Je()}var o}function Vi(n,e){return void 0!==(n.values||[]).find(t=>qo(t,e))}function Zo(n,e){if(n===e)return 0;const t=pl(n),r=pl(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=er(o.integerValue||o.doubleValue),m=er(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return Ew(n.timestampValue,e.timestampValue);case 4:return Ew($f(n),$f(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=fl(o),m=fl(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Vt(l[w],m[w]);if(0!==b)return b}return Vt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Vt(er(o.latitude),er(u.latitude));return 0!==l?l:Vt(er(o.longitude),er(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=Zo(l[w],m[w]);if(b)return b}return Vt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Zu.mapValue&&u===Zu.mapValue)return 0;if(o===Zu.mapValue)return 1;if(u===Zu.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const N=Vt(m[A],b[A]);if(0!==N)return N;const $=Zo(l[m[A]],w[b[A]]);if(0!==$)return $}return Vt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw Je()}}function Ew(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=zu(n),r=zu(e),o=Vt(t.seconds,r.seconds);return 0!==o?o:Vt(t.nanos,r.nanos)}function zd(n){return Xg(n)}function Xg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=zu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fl(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Xg(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${Xg(r.fields[m])}`;return u+"}"}(n.mapValue):Je();var e}function gl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gv(n){return!!n&&"integerValue"in n}function Hf(n){return!!n&&"arrayValue"in n}function em(n){return!!n&&"nullValue"in n}function Dw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tm(n){return!!n&&"mapValue"in n}function Wu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rm(n){return"nullValue"in n?Jg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gl(qu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Je()}function gS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gl(qu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Zu:Je()}function im(n,e){const t=Zo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rb(n,e){const t=Zo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wu(t)}setAll(e){let t=zn.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=Wu(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());tm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];tm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){hl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ar(Wu(this.value))}}function mv(n){const e=[];return hl(n.fields,(t,r)=>{const o=new zn([t]);if(tm(r)){const u=mv(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Ei(e)}class Mn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Mn(e,0,wt.min(),wt.min(),wt.min(),Ar.empty(),0)}static newFoundDocument(e,t,r,o){return new Mn(e,1,t,wt.min(),r,o,0)}static newNoDocument(e,t){return new Mn(e,2,t,wt.min(),wt.min(),Ar.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,wt.min(),wt.min(),Ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class za{constructor(e,t){this.position=e,this.inclusive=t}}function sm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):Zo(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Wo(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qo(n.position[t],e.position[t]))return!1;return!0}class qa{constructor(e,t="asc"){this.field=e,this.dir=t}}function om(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class qd{}class Yt extends qd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new sb(e,t,r):"array-contains"===t?new ub(e,r):"in"===t?new wv(e,r):"not-in"===t?new Iv(e,r):"array-contains-any"===t?new cb(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ob(e,r):new ab(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zo(t,this.value)):null!==t&&pl(this.value)===pl(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class cn extends qd{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new cn(e,t)}matches(e){return ml(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ml(n){return"and"===n.op}function yv(n){return"or"===n.op}function vv(n){return Zd(n)&&ml(n)}function Zd(n){for(const e of n.filters)if(e instanceof cn)return!1;return!0}function _v(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+zd(n.value);if(vv(n))return n.filters.map(e=>_v(e)).join(",");{const e=n.filters.map(t=>_v(t)).join(",");return`${n.op}(${e})`}}function ib(n,e){return n instanceof Yt?(t=n,(r=e)instanceof Yt&&t.op===r.op&&t.field.isEqual(r.field)&&qo(t.value,r.value)):n instanceof cn?function(t,r){return r instanceof cn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&ib(u,r.filters[l]),!0)}(n,e):void Je();var t,r}function bw(n,e){const t=n.filters.concat(e);return cn.create(t,n.op)}function Cw(n){return n instanceof Yt?`${(e=n).field.canonicalString()} ${e.op} ${zd(e.value)}`:n instanceof cn?function(e){return e.op.toString()+" {"+e.getFilters().map(Cw).join(" ,")+"}"}(n):"Filter";var e}class sb extends Yt{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class ob extends Yt{constructor(e,t){super(e,"in",t),this.keys=Tw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ab extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=Tw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class ub extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hf(t)&&Vi(t.arrayValue,this.value)}}class wv extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vi(this.value.arrayValue,t)}}class Iv extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vi(this.value.arrayValue,t)}}class cb extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vi(this.value.arrayValue,r))}}class Ev{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function Dv(n,e=null,t=[],r=[],o=null,u=null,l=null){return new Ev(n,e,t,r,o,u,l)}function yl(n){const e=Xe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_v(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),e.ft=t}return e.ft}function Gf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!om(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ib(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wo(n.startAt,e.startAt)&&Wo(n.endAt,e.endAt)}function am(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function um(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function Sw(n,e,t){let r=Jg,o=!0;for(const u of um(n,e)){let l=Jg,m=!0;switch(u.op){case"<":case"<=":l=rm(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Jg}im({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];im({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function Aw(n,e,t){let r=Zu,o=!0;for(const u of um(n,e)){let l=Zu,m=!0;switch(u.op){case">=":case">":l=gS(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Zu}rb({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];rb({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Ko{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this.wt=null}}function bv(n,e,t,r,o,u,l,m){return new Ko(n,e,t,r,o,u,l,m)}function Wd(n){return new Ko(n)}function lb(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function cm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Cv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Kd(n){return null!==n.collectionGroup}function vl(n){const e=Xe(n);if(null===e.dt){e.dt=[];const t=Cv(e),r=cm(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new qa(t)),e.dt.push(new qa(zn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new qa(zn.keyField(),u))}}}return e.dt}function Di(n){const e=Xe(n);if(!e.wt)if("F"===e.limitType)e.wt=Dv(e.path,e.collectionGroup,vl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of vl(e))t.push(new qa(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new za(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new za(e.startAt.position,e.startAt.inclusive):null;e.wt=Dv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function zf(n,e){e.getFirstInequalityField(),Cv(n);const t=n.filters.concat([e]);return new Ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lm(n,e,t){return new Ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ui(n,e){return Gf(Di(n),Di(e))&&n.limitType===e.limitType}function Yd(n){return`${yl(Di(n))}|lt:${n.limitType}`}function Hr(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Cw(r)).join(", ")}]`),Ff(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),`Target(${t})`}(Di(n))}; limitType=${n.limitType})`}function ro(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of vl(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=sm(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,vl(t),r)||t.endAt&&!function(o,u,l){const m=sm(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,vl(t),r)));var t,r}function qf(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ns(n){return(e,t)=>{let r=!1;for(const o of vl(n)){const u=Tv(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Tv(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),w=l.data.field(o);return null!==m&&null!==w?Zo(m,w):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}class rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return fv(this.inner)}size(){return this.innerSize}}const Qd=new Xn(qe.comparator);function xr(){return Qd}const _l=new Xn(qe.comparator);function Yo(...n){let e=_l;for(const t of n)e=e.insert(t.key,t);return e}function wl(n){let e=_l;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bi(){return Qo()}function Il(){return Qo()}function Qo(){return new rs(n=>n.toString(),(n,e)=>n.isEqual(e))}const xw=new Xn(qe.comparator),Mw=new yn(qe.comparator);function Bt(...n){let e=Mw;for(const t of n)e=e.add(t);return e}const Rw=new yn(Vt);function Zf(){return Rw}function Sv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lf(e)?"-0":e}}function Av(n){return{integerValue:""+n}}function xv(n,e){return pw(e)?Av(e):Sv(n,e)}class Wf{constructor(){this._=void 0}}function db(n,e,t){return n instanceof Jd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Ku?dm(n,e):n instanceof Za?Nw(n,e):function(r,o){const u=Mv(r,o),l=Kf(u)+Kf(r._t);return gv(u)&&gv(r._t)?Av(l):Sv(r.serializer,l)}(n,e)}function hb(n,e,t){return n instanceof Ku?dm(n,e):n instanceof Za?Nw(n,e):t}function Mv(n,e){return n instanceof Wa?gv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jd extends Wf{}class Ku extends Wf{constructor(e){super(),this.elements=e}}function dm(n,e){const t=hm(e);for(const r of n.elements)t.some(o=>qo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Za extends Wf{constructor(e){super(),this.elements=e}}function Nw(n,e){let t=hm(e);for(const r of n.elements)t=t.filter(o=>!qo(o,r));return{arrayValue:{values:t}}}class Wa extends Wf{constructor(e,t){super(),this.serializer=e,this._t=t}}function Kf(n){return er(n.integerValue||n.doubleValue)}function hm(n){return Hf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Yf{constructor(e,t){this.field=e,this.transform=t}}class Nv{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Xd{}function Ov(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new eh(n.key,kn.none()):new Dl(n.key,n.data,kn.none());{const t=n.data,r=Ar.empty();let o=new yn(zn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Jo(n.key,r,new Ei(o.toArray()),kn.none())}}function Ow(n,e,t){n instanceof Dl?function(r,o,u){const l=r.value.clone(),m=kv(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Jo?function(r,o,u){if(!Qf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=kv(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Pv(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function El(n,e,t,r){return n instanceof Dl?function(o,u,l,m){if(!Qf(o.precondition,u))return l;const w=o.value.clone(),b=Fw(o.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jo?function(o,u,l,m){if(!Qf(o.precondition,u))return l;const w=Fw(o.fieldTransforms,m,u),b=u.data;return b.setAll(Pv(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Qf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Pw(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Mv(r.transform,o||null);null!=u&&(null===t&&(t=Ar.empty()),t.set(r.field,u))}return t||null}function kw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&jd(t,r,(o,u)=>function Rv(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ku&&r instanceof Ku||t instanceof Za&&r instanceof Za?jd(t.elements,r.elements,qo):t instanceof Wa&&r instanceof Wa?qo(t._t,r._t):t instanceof Jd&&r instanceof Jd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Dl extends Xd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Jo extends Xd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Pv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kv(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,hb(l,m,t[o]))}return r}function Fw(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,db(u,l,e))}return r}class eh extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fv extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Ow(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Il();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const w=Ov(l,m);null!==w&&r.set(o.key,w),l.isValidDocument()||l.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(t,r)=>kw(t,r))&&jd(this.baseMutations,e.baseMutations,(t,r)=>kw(t,r))}}class Xf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=xw;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new Xf(e,t,r,o)}}class fm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uw{constructor(e){this.count=e}}var lr,en;function Lv(n){switch(n){default:return Je();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function ep(n){if(void 0===n)return ur("GRPC error has no .code"),se.UNKNOWN;switch(n){case lr.OK:return se.OK;case lr.CANCELLED:return se.CANCELLED;case lr.UNKNOWN:return se.UNKNOWN;case lr.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case lr.INTERNAL:return se.INTERNAL;case lr.UNAVAILABLE:return se.UNAVAILABLE;case lr.UNAUTHENTICATED:return se.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case lr.NOT_FOUND:return se.NOT_FOUND;case lr.ALREADY_EXISTS:return se.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return se.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case lr.ABORTED:return se.ABORTED;case lr.OUT_OF_RANGE:return se.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return se.UNIMPLEMENTED;case lr.DATA_LOSS:return se.DATA_LOSS;default:return Je()}}(en=lr||(lr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Xo{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return gm}static getOrCreateInstance(){return null===gm&&(gm=new Xo),gm}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let gm=null;class tp{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tp(wt.min(),o,Zf(),xr(),Bt())}}class bl{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bl(r,t,Bt(),Bt(),Bt())}}class ea{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class mm{constructor(e,t){this.targetId=e,this.Et=t}}class Bw{constructor(e,t,r=cr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class ym{constructor(){this.At=0,this.Rt=jw(),this.vt=cr.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Bt(),t=Bt(),r=Bt();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Je()}}),new bl(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=jw()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class mS{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=xr(),this.qt=fb(),this.Ut=new yn(Vt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.Wt(o)&&t(o)})}Jt(e){var t;const r=e.targetId,o=e.Et.count,u=this.Yt(r);if(u){const l=u.target;if(am(l))if(0===o){const m=new qe(l.path);this.Qt(r,m,Mn.newNoDocument(m,wt.min()))}else vt(1===o);else{const m=this.Zt(r);m!==o&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=Xo.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:m,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((u,l)=>{const m=this.Yt(l);if(m){if(u.current&&am(m.target)){const w=new qe(m.target.path);null!==this.Lt.get(w)||this.te(l,w)||this.Qt(l,w,Mn.newNoDocument(w,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=Bt();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.Yt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const o=new tp(e,t,this.Ut,this.Lt,r);return this.Lt=xr(),this.qt=fb(),this.Ut=new yn(Vt),o}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const o=this.jt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new ym,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new yn(Vt),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new ym),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function fb(){return new Xn(qe.comparator)}function jw(){return new Xn(qe.comparator)}const pb={asc:"ASCENDING",desc:"DESCENDING"},$w={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gb={and:"AND",or:"OR"};class Mr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mb(n,e){return Cl(n,e.toTimestamp())}function tr(n){return vt(!!n),wt.fromTimestamp(function(e){const t=zu(e);return new Un(t.seconds,t.nanos)}(n))}function Vv(n,e){return(t=n,new Ye(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Uv(n){const e=Ye.fromString(n);return vt(zv(e)),e}function th(n,e){return Vv(n.databaseId,e.path)}function Ci(n,e){const t=Uv(e);if(t.get(1)!==n.databaseId.projectId)throw new be(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(zw(t))}function Bv(n,e){return Vv(n.databaseId,e)}function Gw(n){const e=Uv(n);return 4===e.length?Ye.emptyPath():zw(e)}function nh(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zw(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jv(n,e,t){return{name:th(n,e),fields:t.value.mapValue.fields}}function yb(n,e,t){const r=Ci(n,e.name),o=tr(e.updateTime),u=e.createTime?tr(e.createTime):wt.min(),l=new Ar({mapValue:{fields:e.fields}}),m=Mn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Bi(n,e){let t;if(e instanceof Dl)t={update:jv(n,e.key,e.value)};else if(e instanceof eh)t={delete:th(n,e.key)};else if(e instanceof Jo)t={update:jv(n,e.key,e.data),updateMask:Eb(e.fieldMask)};else{if(!(e instanceof Fv))return Je();t={verify:th(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Jd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ku)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Za)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wa)return{fieldPath:u.field.canonicalString(),increment:l._t};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:mb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Je()),t;var o}function Hv(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?kn.updateTime(tr(o.updateTime)):void 0!==o.exists?kn.exists(o.exists):kn.none():kn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(vt("REQUEST_TIME"===l.setToServerValue),m=new Jd):"appendMissingElements"in l?m=new Ku(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Za(l.removeAllFromArray.values||[]):"increment"in l?m=new Wa(u,l.increment):Je();const w=zn.fromServerFormat(l.fieldPath);return new Yf(w,m)}(n,o)):[];var o;if(e.update){const o=Ci(n,e.update.name),u=new Ar({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ei((e.updateMask.fieldPaths||[]).map(b=>zn.fromServerFormat(b)));return new Jo(o,u,l,t,r)}return new Dl(o,u,t,r)}if(e.delete){const o=Ci(n,e.delete);return new eh(o,t)}if(e.verify){const o=Ci(n,e.verify);return new Fv(o,t)}return Je()}function io(n,e){return{documents:[Bv(n,e.path)]}}function is(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Bv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Bv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return rh(cn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Yu((A=b).field),direction:_b(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.useProto3Json||Ff(b)?b:{value:b});var b,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function xs(n){let e=Gw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=Gv(A);return N instanceof cn&&vv(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new qa(Qu((N=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,Ff(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new za((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new za(A.values||[],!A.before)}(t.endAt)),bv(e,o,l,u,m,"F",w,b)}function Gv(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Qu(e.unaryFilter.field);return Yt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Qu(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Qu(e.unaryFilter.field);return Yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Qu(e.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}(n):void 0!==n.fieldFilter?Yt.create(Qu((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return cn.create(e.compositeFilter.filters.map(t=>Gv(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Je()}}(e.compositeFilter.op))}(n):Je();var e}function _b(n){return pb[n]}function wb(n){return $w[n]}function Ib(n){return gb[n]}function Yu(n){return{fieldPath:n.canonicalString()}}function Qu(n){return zn.fromServerFormat(n.fieldPath)}function rh(n){return n instanceof Yt?function(e){if("=="===e.op){if(Dw(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NAN"}};if(em(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Dw(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NOT_NAN"}};if(em(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yu(e.field),op:wb(e.op),value:e.value}}}(n):n instanceof cn?function(e){const t=e.getFilters().map(r=>rh(r));return 1===t.length?t[0]:{compositeFilter:{op:Ib(e.op),filters:t}}}(n):Je()}function Eb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ju{constructor(e,t,r,o,u=wt.min(),l=wt.min(),m=cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new Ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class qv{constructor(e){this.se=e}}function np(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:th(o=n.se,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Cl(o,u.version.toTimestamp()),createTime:Cl(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Xu(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:Xu(e.version)}}var o,u;return r}function vm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Xu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ec(n){const e=new Un(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function Ka(n,e){const t=(e.baseMutations||[]).map(u=>Hv(n.se,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>Hv(n.se,u)),o=Un.fromMillis(e.localWriteTimeMs);return new Jf(e.batchId,o,t,r)}function tc(n){const e=ec(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ec(n.lastLimboFreeSnapshotVersion):wt.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=Di(Wd(Gw(o.documents[0])))):r=Di(xs(n.query)),new Ju(r,n.targetId,0,n.lastListenSequenceNumber,e,t,cr.fromBase64String(n.resumeToken))}function Zv(n,e){const t=Xu(e.snapshotVersion),r=Xu(e.lastLimboFreeSnapshotVersion);let o;o=am(e.target)?io(n.se,e.target):is(n.se,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function _m(n){const e=xs({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lm(e,e.limit,"L"):e}function wm(n,e){return new fm(e.largestBatchId,Hv(n.se,e.overlayMutation))}function Wv(n,e){const t=e.path.lastSegment();return[n,Ii(e.path.popLast()),t]}function Kv(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Xu(r.readTime),documentKey:Ii(r.documentKey.path),largestBatchId:r.largestBatchId}}class Kw{getBundleMetadata(e,t){return Yv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ec(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Yv(e).put({bundleId:(r=t).id,createTime:Xu(tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Qv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:_m(o.bundledQuery),readTime:ec(o.readTime)};var o})}saveNamedQuery(e,t){return Qv(e).put({name:(r=t).name,readTime:Xu(tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Yv(n){return pr(n,"bundles")}function Qv(n){return pr(n,"namedQueries")}class Im{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new Im(e,t.uid||"")}getOverlay(e,t){return rp(e).get(Wv(this.userId,t)).next(r=>r?wm(this.serializer,r):null)}getOverlays(e,t){const r=bi();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new fm(t,l);o.push(this.re(e,m))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(Ii(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(rp(e).J("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=bi(),u=Ii(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return rp(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=wm(this.serializer,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=bi();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rp(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,b,A)=>{const N=wm(this.serializer,b);u.size()<o||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):A.done()}).next(()=>u)}re(e,t){return rp(e).put(function(r,o,u){const[l,m,w]=Wv(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Bi(r.se,u.mutation)}}(this.serializer,this.userId,t))}}function rp(n){return pr(n,"documentOverlays")}class Tl{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),Lf(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(fl(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?nm(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Je()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const o of Object.keys(r))this.fe(o,t),this.ue(r[o],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const o of r)this.ue(o,t)}_e(e,t){this.ae(t,37),qe.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function Db(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Yw(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Db(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Tl.pe=new Tl;class bb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const o=t.codePointAt(0);this.Te(240|o>>>18),this.Te(128|63&o>>>12),this.Te(128|63&o>>>6),this.Te(128|63&o)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const o=t.codePointAt(0);this.Re(240|o>>>18),this.Re(128|63&o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o)}}this.ve()}Ve(e){const t=this.Se(e),r=Yw(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ce(e){const t=this.Se(e),r=Yw(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Cb{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class Tb{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class ip{constructor(){this.Me=new bb,this.Fe=new Cb(this.Me),this.Be=new Tb(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Sl{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Sl(this.indexId,this.documentKey,this.arrayValue,r)}}function nc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Qw(n.arrayValue,e.arrayValue),0!==t?t:(t=Qw(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function Qw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Sb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){vt(e.collectionGroup===this.collectionId);const t=rv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Gu(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ge){const l=r[o];if(!this.je(this.Ge,l)||!this.We(this.Ue[u++],l))return!1;++o}for(;o<r.length;++o)if(u>=this.Ue.length||!this.We(this.Ue[u++],r[o]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Jw(n){var e,t;if(vt(n instanceof Yt||n instanceof cn),n instanceof Yt){if(n instanceof wv){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Yt.create(n.field,"==",u)))||[];return cn.create(o,"or")}return n}const r=n.filters.map(o=>Jw(o));return cn.create(r,n.op)}function Ab(n){if(0===n.getFilters().length)return[];const e=Em(Jw(n));return vt(Xw(e)),Jv(e)||Xv(e)?[e]:e.getFilters()}function Jv(n){return n instanceof Yt}function Xv(n){return n instanceof cn&&vv(n)}function Xw(n){return Jv(n)||Xv(n)||function(e){if(e instanceof cn&&yv(e)){for(const t of e.getFilters())if(!Jv(t)&&!Xv(t))return!1;return!0}return!1}(n)}function Em(n){if(vt(n instanceof Yt||n instanceof cn),n instanceof Yt)return n;if(1===n.filters.length)return Em(n.filters[0]);const e=n.filters.map(r=>Em(r));let t=cn.create(e,n.op);return t=sp(t),Xw(t)?t:(vt(t instanceof cn),vt(ml(t)),vt(t.filters.length>1),t.filters.reduce((r,o)=>Dm(r,o)))}function Dm(n,e){let t;return vt(n instanceof Yt||n instanceof cn),vt(e instanceof Yt||e instanceof cn),t=n instanceof Yt?e instanceof Yt?cn.create([n,e],"and"):e_(n,e):e instanceof Yt?e_(e,n):function(r,o){if(vt(r.filters.length>0&&o.filters.length>0),ml(r)&&ml(o))return bw(r,o.getFilters());const u=yv(r)?r:o,l=yv(r)?o:r,m=u.filters.map(w=>Dm(w,l));return cn.create(m,"or")}(n,e),sp(t)}function e_(n,e){if(ml(e))return bw(e,n.getFilters());{const t=e.filters.map(r=>Dm(n,r));return cn.create(t,"or")}}function sp(n){if(vt(n instanceof Yt||n instanceof cn),n instanceof Yt)return n;const e=n.getFilters();if(1===e.length)return sp(e[0]);if(Zd(n))return n;const t=e.map(o=>sp(o)),r=[];return t.forEach(o=>{o instanceof Yt?r.push(o):o instanceof cn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:cn.create(r,n.op)}class eI{constructor(){this.He=new bm}addToCollectionParentIndex(e,t){return this.He.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Fi.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class bm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new yn(Ye.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new yn(Ye.comparator)).toArray()}}const op=new Uint8Array(0);class tI{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new bm,this.Ye=new rs(r=>yl(r),(r,o)=>Gf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const u={collectionId:r,parent:Ii(o)};return t_(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[nv(t),""],!1,!0);return t_(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(zo(l.parent))}return r})}addFieldIndex(e,t){const r=ap(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=so(e);return u.next(m=>{l.put(Kv(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ap(e),o=so(e),u=ih(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ih(e);let o=!0;const u=new Map;return re.forEach(this.Ze(t),l=>this.Xe(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=Bt();const m=[];return re.forEach(u,(w,b)=>{var A;Re("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Nt=>`${Nt.fieldPath}:${Nt.kind}`).join(",")}`} to execute ${yl(t)}`);const N=function(Nt,Gt){const zt=rv(Gt);if(void 0===zt)return null;for(const sn of um(Nt,zt.fieldPath))switch(sn.op){case"array-contains-any":return sn.value.arrayValue.values||[];case"array-contains":return[sn.value]}return null}(b,w),$=function(Nt,Gt){const zt=new Map;for(const sn of Gu(Gt))for(const ls of um(Nt,sn.fieldPath))switch(ls.op){case"==":case"in":zt.set(sn.fieldPath.canonicalString(),ls.value);break;case"not-in":case"!=":return zt.set(sn.fieldPath.canonicalString(),ls.value),Array.from(zt.values())}return null}(b,w),Q=function(Nt,Gt){const zt=[];let sn=!0;for(const ls of Gu(Gt)){const $h=0===ls.kind?Sw(Nt,ls.fieldPath,Nt.startAt):Aw(Nt,ls.fieldPath,Nt.startAt);zt.push($h.value),sn&&(sn=$h.inclusive)}return new za(zt,sn)}(b,w),pe=function(Nt,Gt){const zt=[];let sn=!0;for(const ls of Gu(Gt)){const $h=0===ls.kind?Aw(Nt,ls.fieldPath,Nt.endAt):Sw(Nt,ls.fieldPath,Nt.endAt);zt.push($h.value),sn&&(sn=$h.inclusive)}return new za(zt,sn)}(b,w),Ne=this.tn(w,b,Q),je=this.tn(w,b,pe),Ft=this.en(w,b,$),$t=this.nn(w.indexId,N,Ne,Q.inclusive,je,pe.inclusive,Ft);return re.forEach($t,Nt=>r.H(Nt,t.limit).next(Gt=>{Gt.forEach(zt=>{const sn=qe.fromSegments(zt.documentKey);l.has(sn)||(l=l.add(sn),m.push(sn))})}))}).next(()=>m)}return re.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:Ab(cn.create(e.filters,"and")).map(r=>Dv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,o,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const $=t?this.sn(t[N/b]):op,Q=this.rn(e,$,r[N%b],o),pe=this.on(e,$,u[N%b],l),Ne=m.map(je=>this.rn(e,$,je,!0));A.push(...this.createRange(Q,pe,Ne))}return A}rn(e,t,r,o){const u=new Sl(e,qe.empty(),t,r);return o?u:u.qe()}on(e,t,r,o){const u=new Sl(e,qe.empty(),t,r);return o?u.qe():u}Xe(e,t){const r=new Sb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.Qe(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.Ze(t);return re.forEach(o,u=>this.Xe(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new yn(zn.comparator),b=!1;for(const A of m.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}un(e,t){const r=new ip;for(const o of Gu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.Le(o.kind);Tl.pe.oe(u,l)}return r.$e()}sn(e){const t=new ip;return Tl.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new ip;return Tl.pe.oe(gl(this.databaseId,t),r.Le(function(o){const u=Gu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let o=[];o.push(new ip);let u=0;for(const l of Gu(e)){const m=r[u++];for(const w of o)if(this.an(t,l.fieldPath)&&Hf(m))o=this.hn(o,l,m);else{const b=w.Le(l.kind);Tl.pe.oe(m,b)}}return this.ln(o)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const w=new ip;w.seed(m.$e()),Tl.pe.oe(l,w.Le(t.kind)),u.push(w)}return u}an(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ap(e),o=so(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return re.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{l.push(function(b,A){const N=A?new kf(A.sequenceNumber,new Fi(ec(A.readTime),new qe(zo(A.documentKey)),A.largestBatchId)):kf.empty(),$=b.fields.map(([Q,pe])=>new Pf(zn.fromServerFormat(Q),pe));return new $g(b.indexId,b.collectionGroup,$,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=ap(e),u=so(e);return this.fn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,w=>u.put(Kv(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?re.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),re.forEach(m,w=>this.dn(e,o,w).next(b=>{const A=this.wn(u,w);return b.isEqual(A)?re.resolve():this._n(e,u,w,b,A)}))))})}mn(e,t,r,o){return ih(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,o){return ih(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const o=ih(e);let u=new yn(nc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(l,m)=>{u=u.add(new Sl(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new yn(nc);const o=this.un(t,e);if(null==o)return r;const u=rv(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Hf(l))for(const m of l.arrayValue.values||[])r=r.add(new Sl(t.indexId,e.key,this.sn(m),o))}else r=r.add(new Sl(t.indexId,e.key,op,o));return r}_n(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,A,N){const $=m.getIterator(),Q=w.getIterator();let pe=$r($),Ne=$r(Q);for(;pe||Ne;){let je=!1,Ft=!1;if(pe&&Ne){const $t=b(pe,Ne);$t<0?Ft=!0:$t>0&&(je=!0)}else null!=pe?Ft=!0:je=!0;je?(A(Ne),Ne=$r(Q)):Ft?(N(pe),pe=$r($)):(pe=$r($),Ne=$r(Q))}}(o,u,nc,m=>{l.push(this.mn(e,t,r,m))},m=>{l.push(this.gn(e,t,r,m))}),re.waitFor(l)}fn(e){let t=1;return so(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>nc(l,m)).filter((l,m,w)=>!m||0!==nc(l,w[m-1]));const o=[];o.push(e);for(const l of r){const m=nc(l,e),w=nc(l,t);if(0===m)o[0]=e.qe();else if(m>0&&w<0)o.push(l),o.push(l.qe());else if(w>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.yn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,op,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,op,[]]))}return u}yn(e,t){return nc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nI)}getMinOffset(e,t){return re.mapArray(this.Ze(t),r=>this.Xe(e,r).next(o=>o||Je())).next(nI)}}function t_(n){return pr(n,"collectionParents")}function ih(n){return pr(n,"indexEntries")}function ap(n){return pr(n,"indexConfiguration")}function so(n){return pr(n,"indexState")}function nI(n){vt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Ga(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Fi(e.readTime,e.documentKey,t)}const rI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xb(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:l},(A,N,$)=>(m++,$.delete()));u.push(w.next(()=>{vt(1===m)}));const b=[];for(const A of t.mutations){const N=qg(e,A.key.path,t.batchId);u.push(o.delete(N)),b.push(A.key)}return re.waitFor(u).next(()=>b)}function sh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(41943040,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);class n_{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.pn={}}static ie(e,t,r,o){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new n_(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=up(e),l=Ya(e);return l.add({}).next(m=>{vt("number"==typeof m);const w=new Jf(m,t,r,o),b=function($,Q,pe){const Ne=pe.baseMutations.map(Ft=>Bi($.se,Ft)),je=pe.mutations.map(Ft=>Bi($.se,Ft));return{userId:Q,batchId:pe.batchId,localWriteTimeMs:pe.localWriteTime.toMillis(),baseMutations:Ne,mutations:je}}(this.serializer,this.userId,w),A=[];let N=new yn(($,Q)=>Vt($.canonicalString(),Q.canonicalString()));for(const $ of o){const Q=qg(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),A.push(l.put(b)),A.push(u.put(Q,hS))}return N.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.pn[m]=w.keys()}),re.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Ya(e).get(t).next(r=>r?(vt(r.userId===this.userId),Ka(this.serializer,r)):null)}In(e,t){return this.pn[t]?re.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.pn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ya(e).Z({index:"userMutationsIndex",range:o},(l,m,w)=>{m.userId===this.userId&&(vt(m.batchId>=r),u=Ka(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ya(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).j("userMutationsIndex",t).next(r=>r.map(o=>Ka(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return up(e).Z({range:o},(l,m,w)=>{const[b,A,N]=l,$=zo(A);if(b===this.userId&&t.path.isEqual($))return Ya(e).get(N).next(Q=>{if(!Q)throw Je();vt(Q.userId===this.userId),u.push(Ka(this.serializer,Q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Vt);const o=[];return t.forEach(u=>{const l=Vf(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=up(e).Z({range:m},(b,A,N)=>{const[$,Q,pe]=b,Ne=zo(Q);$===this.userId&&u.path.isEqual(Ne)?r=r.add(pe):N.done()});o.push(w)}),re.waitFor(o).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Vf(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new yn(Vt);return up(e).Z({range:l},(w,b,A)=>{const[N,$,Q]=w,pe=zo($);N===this.userId&&r.isPrefixOf(pe)?pe.length===o&&(m=m.add(Q)):A.done()}).next(()=>this.Tn(e,m))}Tn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ya(e).get(u).next(l=>{if(null===l)throw Je();vt(l.userId===this.userId),r.push(Ka(this.serializer,l))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return xb(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return up(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=zo(u[1]);o.push(w)}else m.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return r_(e,this.userId,t)}An(e){return Ct(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function r_(n,e,t){const r=Vf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return up(n).Z({range:u,Y:!0},(m,w,b)=>{const[A,N,$]=m;A===e&&N===o&&(l=!0),b.done()}).next(()=>l)}function Ya(n){return pr(n,"mutations")}function up(n){return pr(n,"documentMutations")}function Ct(n){return pr(n,"mutationQueues")}class Al{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Al(0)}static bn(){return new Al(-1)}}class Mb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new Al(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>wt.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Vn(e,o)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oh(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return oh(e).Z((l,m)=>{const w=tc(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return oh(e).Z((r,o)=>{const u=tc(o);t(u)})}Pn(e){return xl(e).get("targetGlobalKey").next(t=>(vt(null!==t),t))}Vn(e,t){return xl(e).put("targetGlobalKey",t)}Sn(e,t){return oh(e).put(Zv(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return oh(e).Z({range:o,index:"queryTargetsIndex"},(l,m,w)=>{const b=tc(m);Gf(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=rc(e);return t.forEach(l=>{const m=Ii(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=rc(e);return re.forEach(t,u=>{const l=Ii(u.path);return re.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=rc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=rc(e);let u=Bt();return o.Z({range:r,Y:!0},(l,m,w)=>{const b=zo(l[1]),A=new qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Ii(t.path),o=IDBKeyRange.bound([r],[nv(r)],!1,!0);let u=0;return rc(e).Z({index:"documentTargetsIndex",Y:!0,range:o},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}ne(e,t){return oh(e).get(t).next(r=>r?tc(r):null)}}function oh(n){return pr(n,"targets")}function xl(n){return pr(n,"targetGlobal")}function rc(n){return pr(n,"targetDocuments")}function cp([n,e],[t,r]){const o=Vt(n,t);return 0===o?Vt(e,r):o}class Cm{constructor(e){this.Cn=e,this.buffer=new yn(cp),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cp(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nr{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){dl(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ho(r)}yield t.$n(3e5)}))}}class yS{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Li.ct);const r=new Cm(t);return this.Mn.forEachTarget(e,o=>r.kn(o.sequenceNumber)).next(()=>this.Mn.Bn(e,o=>r.kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(rI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rI):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,o,u,l,m,w,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,l=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),ev()<=Mt.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-A}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class iI{constructor(e,t){this.db=e,this.garbageCollector=new yS(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,o)=>t(o))}addReference(e,t,r){return lp(e,r)}removeReference(e,t,r){return lp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lp(e,t)}Kn(e,t){return function(r,o){let u=!1;return Ct(r).X(l=>r_(r,l,o).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Un(e,(l,m)=>{if(m<=t){const w=this.Kn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,wt.min()),rc(e).delete([0,Ii(l.path)])))});o.push(w)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lp(e,t)}Un(e,t){const r=rc(e);let o,u=Li.ct;return r.Z({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==Li.ct&&t(new qe(zo(o)),u),u=b,o=w):u=Li.ct}).next(()=>{u!==Li.ct&&t(new qe(zo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lp(n,e){return rc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ii(e.path),sequenceNumber:r}));var r}class sI{constructor(){this.changes=new rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ml(e).put(r)}removeEntry(e,t,r){return Ml(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],vm(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=Mn.newInvalidDocument(t);return Ml(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(dp(t))},(o,u)=>{r=this.Qn(t,u)}).next(()=>r)}zn(e,t){let r={size:0,document:Mn.newInvalidDocument(t)};return Ml(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(dp(t))},(o,u)=>{r={document:this.Qn(t,u),size:sh(u)}}).next(()=>r)}getEntries(e,t){let r=xr();return this.jn(e,t,(o,u)=>{const l=this.Qn(o,u);r=r.insert(o,l)}).next(()=>r)}Wn(e,t){let r=xr(),o=new Xn(qe.comparator);return this.jn(e,t,(u,l)=>{const m=this.Qn(u,l);r=r.insert(u,m),o=o.insert(u,sh(l))}).next(()=>({documents:r,Hn:o}))}jn(e,t,r){if(t.isEmpty())return re.resolve();let o=new yn(ah);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(dp(o.first()),dp(o.last())),l=o.getIterator();let m=l.getNext();return Ml(e).Z({index:"documentKeyIndex",range:u},(w,b,A)=>{const N=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&ah(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?A.G(dp(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),vm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ml(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=xr();for(const A of w){const N=this.Qn(qe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);N.isFoundDocument()&&(ro(t,N)||o.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=xr();const l=uI(t,r),m=uI(t,Fi.max());return Ml(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,A)=>{const N=this.Qn(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new aI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return s_(e).get("remoteDocumentGlobalKey").next(t=>(vt(!!t),t))}Gn(e,t){return s_(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function Ww(n,e){let t;if(e.document)t=yb(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=ec(e.noDocument.readTime);t=Mn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=qe.fromSegments(e.unknownDocument.path),o=ec(e.unknownDocument.version);t=Mn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Un(r[0],r[1]);return wt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return Mn.newInvalidDocument(e)}}function i_(n){return new oI(n)}class aI extends sI{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new rs(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new yn((u,l)=>Vt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Yn.get(u);if(t.push(this.Jn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=np(this.Jn.serializer,l);o=o.add(u.path.popLast());const b=sh(w);r+=b-m.size,t.push(this.Jn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=np(this.Jn.serializer,l.convertToNoDocument(wt.min()));t.push(this.Jn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Jn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:o})=>(o.forEach((u,l)=>{this.Yn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function s_(n){return pr(n,"remoteDocumentGlobal")}function Ml(n){return pr(n,"remoteDocumentsV14")}function dp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uI(n,e){const t=e.documentKey.path.toArray();return[n,vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ah(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Vt(t[u],r[u]),o)return o;return o=Vt(t.length,r.length),o||(o=Vt(t[t.length-2],r[r.length-2]),o||Vt(t[t.length-1],r[r.length-1]))}class Rb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cI{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&El(r.mutation,o,Ei.empty(),Un.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const o=bi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Yo();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=bi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=xr();const l=Qo(),m=Qo();return t.forEach((w,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof Jo)?u=u.insert(b.key,b):void 0!==A?(l.set(b.key,A.mutation.getFieldMask()),El(A.mutation,b,A.mutation.getFieldMask(),Un.now())):l.set(b.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var N;return m.set(b,new Rb(A,null!==(N=l.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Qo();let o=new Xn((l,m)=>l-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let A=r.get(w)||Ei.empty();A=m.applyToLocalView(b,A),r.set(w,A);const N=(o.get(m.batchId)||Bt()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,A=w.value,N=Il();A.forEach($=>{if(!u.has($)){const Q=Ov(t.get($),r.get($));null!==Q&&N.set($,Q),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Kd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve(bi());let m=-1,w=u;return l.next(b=>re.forEach(b,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?re.resolve():this.remoteDocumentCache.getEntry(e,A).next($=>{w=w.insert(A,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Bt())).next(A=>({batchId:m,changes:wl(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let o=Yo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Yo();return this.indexManager.getCollectionParents(e,o).next(l=>re.forEach(l,m=>{const w=(b=t,A=m.child(o),new Ko(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Mn.newInvalidDocument(b)))});let l=Yo();return u.forEach((m,w)=>{const b=o.get(m);void 0!==b&&El(b.mutation,w,Ei.empty(),Un.now()),ro(t,w)&&(l=l.insert(m,w))}),l})}}class Nb{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:tr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:_m(r.bundledQuery),readTime:tr(r.readTime)}),re.resolve();var r}}class Tm{constructor(){this.overlays=new Xn(qe.comparator),this.ts=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bi();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.re(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ts.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ts.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=bi(),u=t.length+1,l=new qe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Xn((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=bi(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=bi(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=o)););return re.resolve(m)}re(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ts.get(o.largestBatchId).delete(r.key);this.ts.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new fm(t,r));let u=this.ts.get(t);void 0===u&&(u=Bt(),this.ts.set(t,u)),this.ts.set(t,u.add(r.key))}}class Sm{constructor(){this.es=new yn(Nr.ns),this.ss=new yn(Nr.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new Nr(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new Nr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new qe(new Ye([])),r=new Nr(t,e),o=new Nr(t,e+1),u=[];return this.ss.forEachInRange([r,o],l=>{this.us(l),u.push(l.key)}),u}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new qe(new Ye([])),r=new Nr(t,e),o=new Nr(t,e+1);let u=Bt();return this.ss.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Nr(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Nr{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return qe.comparator(e.key,t.key)||Vt(e.ds,t.ds)}static rs(e,t){return Vt(e.ds,t.ds)||qe.comparator(e.key,t.key)}}class lI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new yn(Nr.ns)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new Jf(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this._s=this._s.add(new Nr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ys(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nr(t,0),o=new Nr(t,Number.POSITIVE_INFINITY),u=[];return this._s.forEachInRange([r,o],l=>{const m=this.gs(l.ds);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Vt);return t.forEach(o=>{const u=new Nr(o,0),l=new Nr(o,Number.POSITIVE_INFINITY);this._s.forEachInRange([u,l],m=>{r=r.add(m.ds)})}),re.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const l=new Nr(new qe(u),0);let m=new yn(Vt);return this._s.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w.ds)),!0)},l),re.resolve(this.ps(m))}ps(e){const t=[];return e.forEach(r=>{const o=this.gs(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return re.forEach(t.mutations,o=>{const u=new Nr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new Nr(t,0),o=this._s.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ob{constructor(e){this.Ts=e,this.docs=new Xn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=xr();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Mn.newInvalidDocument(o))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=xr();const l=t.path,m=new qe(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:A}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||Ga(iv(A),r)<=0||(o.has(A.key)||ro(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,o){Je()}Es(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new hp(this)}getSize(e){return re.resolve(this.size)}}class hp extends sI{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Jn.addEntry(e,o)):this.Jn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class fp{constructor(e){this.persistence=e,this.As=new rs(t=>yl(t),Gf),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Sm,this.targetCount=0,this.bs=Al.vn()}forEachTarget(e,t){return this.As.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),re.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Sn(t),re.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.As.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.As.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.vs.containsKey(t))}}class dI{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Li(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new fp(this),this.indexManager=new eI,this.remoteDocumentCache=new Ob(r=>this.referenceDelegate.Cs(r)),this.serializer=new qv(t),this.xs=new Nb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new lI(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new Pb(this.Vs.next());return this.referenceDelegate.Ns(),r(o).next(u=>this.referenceDelegate.ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Os(e,t){return re.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class Pb extends Hg{constructor(e){super(),this.currentSequenceNumber=e}}class Am{constructor(e){this.persistence=e,this.$s=new Sm,this.Ms=null}static Fs(e){return new Am(e)}get Bs(){if(this.Ms)return this.Ms;throw Je()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),re.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(o=>this.Bs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Bs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Bs,r=>{const o=qe.fromPath(r);return this.Ls(e,o).next(u=>{u||t.removeEntry(o,wt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return re.or([()=>re.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class hI{constructor(e){this.serializer=e}M(e,t,r,o){const u=new ov("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uv,{unique:!0}),m.createObjectStore("documentMutations"),o_(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=re.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),o_(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uv,{unique:!0});const A=w.store("mutations"),N=b.map($=>A.put($));return re.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.qs(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Us(u)))),r<7&&o>=7&&(l=l.next(()=>this.Ks(u))),r<8&&o>=8&&(l=l.next(()=>this.Gs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.Qs(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:lv});w.createIndex("collectionPathOverlayIndex",Uf,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",dv,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:cv});w.createIndex("documentKeyIndex",JD),w.createIndex("collectionGroupIndex",fS)}(e)).next(()=>this.zs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.js(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:eb}).createIndex("sequenceNumberIndex",tb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Zg}).createIndex("documentKeyIndex",Gd,{unique:!1})}(e))),l}Us(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=sh(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>re.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>re.forEach(m,w=>{vt(w.userId===u.userId);const b=Ka(this.serializer,w);return xb(e,u.userId,b).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,m)=>{const w=new Ye(l),b=[0,Ii(w)];u.push(t.get(b).next(A=>A?re.resolve():t.put({targetId:0,path:Ii(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:mw});const r=t.store("collectionParents"),o=new bm,u=l=>{if(o.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Ii(w)})}};return t.store("remoteDocuments").Z({Y:!0},(l,m)=>{const w=new Ye(l);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([l,m,w],b)=>{const A=zo(m);return u(A.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,o)=>{const u=tc(o),l=Zv(this.serializer,u);return t.put(l)})}zs(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new qe(Ye.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):Je()).path.toArray();var b;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>re.waitFor(o))}js(e,t){const r=t.store("mutations"),o=i_(this.serializer),u=new dI(Am.Fs,this.serializer.se);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let A=null!==(b=m.get(w.userId))&&void 0!==b?b:Bt();Ka(this.serializer,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),re.forEach(m,(w,b)=>{const A=new Jn(b),N=Im.ie(this.serializer,A),$=u.getIndexManager(A),Q=n_.ie(A,this.serializer,$,u.referenceDelegate);return new cI(o,Q,N,$).recalculateAndSaveOverlaysForDocumentKeys(new Yg(t,Li.ct),w).next()})})}}function o_(n){n.createObjectStore("targetDocuments",{keyPath:gw}).createIndex("documentTargetsIndex",XD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hd,{unique:!0}),n.createObjectStore("targetGlobal")}const xm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class a_{constructor(e,t,r,o,u,l,m,w,b,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=u,this.window=l,this.document=m,this.Hs=b,this.Js=A,this.Ys=N,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=$=>Promise.resolve(),!a_.D())throw new be(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iI(this,o),this.si=t+"main",this.serializer=new qv(w),this.ii=new Go(this.si,this.Ys,new hI(this.serializer)),this.Ds=new Mb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=i_(this.serializer),this.xs=new Kw,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===A&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(se.FAILED_PRECONDITION,xm);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Li(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,W.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,W.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(dl(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return uh(e).get("owner").next(t=>re.resolve(this._i(t)))}mi(e){return Mm(e).delete(this.clientId)}gi(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=pr(r,"clientMetadata");return o.j().next(u=>{const l=e.pi(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return re.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?re.resolve(!0):uh(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new be(se.FAILED_PRECONDITION,xm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mm(e).j().next(r=>void 0===this.pi(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,W.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Yg(t,Li.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Mm(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return n_.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tI(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return Im.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Ys)?hv:14===l?Kg:13===l?Wg:12===l?yw:11===l?Bf:void Je();var l;let m;return this.ii.runTransaction(e,o,u,w=>(m=new Yg(w,this.Vs?this.Vs.next():Li.ct),"readwrite-primary"===t?this.li(m).next(b=>!!b||this.fi(m)).next(b=>{if(!b)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new be(se.FAILED_PRECONDITION,hw);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Pi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Pi(e){return uh(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(se.FAILED_PRECONDITION,xm)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uh(e).put("owner",t)}static D(){return Go.D()}di(e){const t=uh(e);return t.get("owner").next(r=>this._i(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,ze.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uh(n){return pr(n,"owner")}function Mm(n){return pr(n,"clientMetadata")}function u_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fI{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=o}static Di(e,t){let r=Bt(),o=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new fI(e,t.fromCache,r,o)}}class kb{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ni(e,t).next(u=>u||this.ki(e,t,o,r)).next(u=>u||this.Oi(e,t))}Ni(e,t){if(lb(t))return re.resolve(null);let r=Di(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=lm(t,null,"F"),r=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Bt(...u);return this.xi.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.$i(t,m);return this.Mi(t,b,l,w.readTime)?this.Ni(e,lm(t,null,"F")):this.Fi(e,b,t,w)}))})))}ki(e,t,r,o){return lb(t)||o.isEqual(wt.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(u=>{const l=this.$i(t,u);return this.Mi(t,l,r,o)?this.Oi(e,t):(ev()<=Mt.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Hr(t)),this.Fi(e,l,t,ZD(o,-1)))})}$i(e,t){let r=new yn(ns(e));return t.forEach((o,u)=>{ro(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Oi(e,t){return ev()<=Mt.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Hr(t)),this.xi.getDocumentsMatchingQuery(e,t,Fi.min())}Fi(e,t,r,o){return this.xi.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class vS{constructor(e,t,r,o){this.persistence=e,this.Bi=t,this.serializer=o,this.Li=new Xn(Vt),this.qi=new rs(u=>yl(u),Gf),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function Fb(n,e,t,r){return new vS(n,e,t,r)}function c_(n,e){return ch.apply(this,arguments)}function ch(){return ch=(0,W.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Bt();for(const b of o){l.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(b=>({Qi:b,removedBatchIds:l,addedBatchIds:m}))})})}),ch.apply(this,arguments)}function pI(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function lh(n,e,t){let r=Bt(),o=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=xr();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(wt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Re("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{zi:l,ji:o}})}function Vb(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dh(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ds.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Ds.allocateTargetId(r).next(l=>(o=new Ju(e,l,0,r.currentSequenceNumber),t.Ds.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Li.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function hh(n,e,t){return l_.apply(this,arguments)}function l_(){return l_=(0,W.Z)(function*(n,e,t){const r=Xe(n),o=r.Li.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!dl(l))throw l;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Li=r.Li.remove(e),r.qi.delete(o.target)}),l_.apply(this,arguments)}function d_(n,e,t){const r=Xe(n);let o=wt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const A=Xe(m),N=A.qi.get(b);return void 0!==N?re.resolve(A.Li.get(N)):A.Ds.getTargetData(w,b)}(r,l,Di(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Bi.getDocumentsMatchingQuery(l,e,t?o:wt.min(),t?u:Bt())).next(m=>(yI(r,qf(e),m),{documents:m,Wi:u})))}function mI(n,e){const t=Xe(n),r=Xe(t.Ds),o=t.Li.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function h_(n,e){const t=Xe(n),r=t.Ui.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ki.getAllFromCollectionGroup(o,e,ZD(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(yI(t,e,o),o))}function yI(n,e,t){let r=n.Ui.get(e)||wt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ui.set(e,r)}function Rl(){return Rl=(0,W.Z)(function*(n,e,t,r){const o=Xe(n);let u=Bt(),l=xr();for(const b of t){const A=e.Hi(b.metadata.name);b.document&&(u=u.add(A));const N=e.Ji(b);N.setReadTime(e.Yi(b.metadata.readTime)),l=l.insert(A,N)}const m=o.Ki.newChangeBuffer({trackRemovals:!0}),w=yield dh(o,(b=r,Di(Wd(Ye.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>lh(b,m,l).next(A=>(m.apply(b),A)).next(A=>o.Ds.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Ds.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.zi,A.ji)).next(()=>A.zi)))}),Rl.apply(this,arguments)}function Bb(n,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,W.Z)(function*(n,e,t=Bt()){const r=yield dh(n,Di(_m(e.bundledQuery))),o=Xe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=tr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.xs.saveNamedQuery(u,e);const m=r.withResumeToken(cr.EMPTY_BYTE_STRING,l);return o.Li=o.Li.insert(m.targetId,m),o.Ds.updateTargetData(u,m).next(()=>o.Ds.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Ds.addMatchingKeys(u,t,r.targetId)).next(()=>o.xs.saveNamedQuery(u,e))})}),Rm.apply(this,arguments)}function vI(n,e){return`firestore_clients_${n}_${e}`}function f_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function p_(n,e){return`firestore_targets_${n}_${e}`}class pp{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new be(o.error.code,o.error.message))),l?new pp(e,t,o.state,u):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new be(r.error.code,r.error.message))),u?new gp(e,r.state,o):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Zf();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=pw(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new fh(e,u):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class g_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new g_(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Nm{constructor(){this.activeTargetIds=Zf()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Om{constructor(e,t,r,o,u){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Xn(Vt),this.started=!1,this.ur=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.cr=vI(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new Nm),this.hr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const t=yield e.syncEngine.bi();for(const o of t){if(o===e.nr)continue;const u=e.getItem(vI(e.persistenceKey,o));if(u){const l=fh.Zi(o,u);l&&(e.rr=e.rr.insert(l.clientId,l))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const o=e.gr(r);o&&e.yr(o)}for(const o of e.ur)e.ir(o);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(p_(this.persistenceKey,e));if(r){const o=gp.Zi(e,r);o&&(t=o.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(p_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Tr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,W.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const o=t.br(r.key);return t.Pr(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.Pr(o.clientId,o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.gr(r.newValue);if(o)return t.yr(o)}}else if(r.key===t.ar){const o=function(u){let l=Li.ct;if(null!=u)try{const m=JSON.parse(u);vt("number"==typeof m),l=m}catch(m){ur("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Li.ct&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.kr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Or(u)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const o=new pp(this.currentUser,e,t,r),u=f_(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Tr(e){const t=f_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const o=p_(this.persistenceKey,e),u=new gp(e,t,r);this.setItem(o,u.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return fh.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return pp.Zi(new Jn(void 0!==r[2]?r[2]:null),o,t)}Cr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return gp.Zi(o,t)}gr(e){return g_.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,W.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),o=this.pr(this.rr),u=this.pr(r),l=[],m=[];return u.forEach(w=>{o.has(w)||l.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Fr(l,m).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=Zf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class _I{constructor(){this.Br=new Nm,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Nm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jb{qr(e){}shutdown(){}}class wI{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ph=null;function m_(){return null===ph?ph=268435456+Math.round(2147483648*Math.random()):ph++,"0x"+ph.toString(16)}const II={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $b{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const pi="WebChannelConnection";class Hb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,o,u){const l=m_(),m=this.ao(e,t);Re("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.ho(w,o,u),this.lo(e,m,w,r).then(b=>(Re("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw $o("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}fo(e,t,r,o,u,l){return this.co(e,t,r,o,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ao(e,t){return`${this.ro}/v1/${t}:${II[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){const u=m_();return new Promise((l,m)=>{const w=new FD;w.setWithCredentials(!0),w.listenOnce(kD.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Qy.NO_ERROR:const A=w.getResponseJson();Re(pi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),l(A);break;case Qy.TIMEOUT:Re(pi,`RPC '${e}' ${u} timed out`),m(new be(se.DEADLINE_EXCEEDED,"Request time out"));break;case Qy.HTTP_ERROR:const N=w.getStatus();if(Re(pi,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let $=w.getResponseJson();Array.isArray($)&&($=$[0]);const Q=$?.error;if(Q&&Q.status&&Q.message){const pe=function(Ne){const je=Ne.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(je)>=0?je:se.UNKNOWN}(Q.status);m(new be(pe,Q.message))}else m(new be(se.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new be(se.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Re(pi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Re(pi,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",b,r,15)})}wo(e,t,r){const o=m_(),u=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ow(),m=PD(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new Xy({})),this.ho(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const b=u.join("");Re(pi,`Creating RPC '${e}' stream ${o}: ${b}`,w);const A=l.createWebChannel(b,w);let N=!1,$=!1;const Q=new $b({Wr:Ne=>{$?Re(pi,`Not sending because RPC '${e}' stream ${o} is closed:`,Ne):(N||(Re(pi,`Opening RPC '${e}' stream ${o} transport.`),A.open(),N=!0),Re(pi,`RPC '${e}' stream ${o} sending:`,Ne),A.send(Ne))},Hr:()=>A.close()}),pe=(Ne,je,Ft)=>{Ne.listen(je,$t=>{try{Ft($t)}catch(Nt){setTimeout(()=>{throw Nt},0)}})};return pe(A,Ud.EventType.OPEN,()=>{$||Re(pi,`RPC '${e}' stream ${o} transport opened.`)}),pe(A,Ud.EventType.CLOSE,()=>{$||($=!0,Re(pi,`RPC '${e}' stream ${o} transport closed`),Q.so())}),pe(A,Ud.EventType.ERROR,Ne=>{$||($=!0,$o(pi,`RPC '${e}' stream ${o} transport errored:`,Ne),Q.so(new be(se.UNAVAILABLE,"The operation could not be completed")))}),pe(A,Ud.EventType.MESSAGE,Ne=>{var je;if(!$){const Ft=Ne.data[0];vt(!!Ft);const Nt=Ft.error||(null===(je=Ft[0])||void 0===je?void 0:je.error);if(Nt){Re(pi,`RPC '${e}' stream ${o} received error:`,Nt);const Gt=Nt.status;let zt=function(ls){const $h=lr[ls];if(void 0!==$h)return ep($h)}(Gt),sn=Nt.message;void 0===zt&&(zt=se.INTERNAL,sn="Unknown error status: "+Gt+" with message "+Nt.message),$=!0,Q.so(new be(zt,sn)),A.close()}else Re(pi,`RPC '${e}' stream ${o} received:`,Ft),Q.io(Ft)}}),pe(m,aw.STAT_EVENT,Ne=>{Ne.stat===Jy.PROXY?Re(pi,`RPC '${e}' stream ${o} detected buffering proxy`):Ne.stat===Jy.NOPROXY&&Re(pi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Q.no()},0),Q}}function EI(){return typeof window<"u"?window:null}function Pm(){return typeof document<"u"?document:null}function mp(n){return new Mr(n,!0)}class y_{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=o,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class DI{constructor(e,t,r,o,u,l,m,w){this.Ws=e,this.bo=r,this.Po=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new y_(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,W.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,W.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,W.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.Ko(r,o)},r=>{e(()=>{const o=new be(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(o)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(o=>{r(()=>this.Go(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}ko(){var e=this;this.state=5,this.Co.Ao((0,W.Z)(function*(){e.state=0,e.start()}))}Go(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bI extends DI{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function $v(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Je(),o=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(vt(void 0===b||"string"==typeof b),cr.fromBase64String(b||"")):(vt(void 0===b||b instanceof Uint8Array),cr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?se.UNKNOWN:ep(w.code);return new be(b,w.message||"")}(l);t=new Bw(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ci(n,r.document.name),u=tr(r.document.updateTime),l=r.document.createTime?tr(r.document.createTime):wt.min(),m=new Ar({mapValue:{fields:r.document.fields}}),w=Mn.newFoundDocument(o,u,l,m);t=new ea(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=Ci(n,r.document),u=r.readTime?tr(r.readTime):wt.min(),l=Mn.newNoDocument(o,u);t=new ea([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Ci(n,r.document);t=new ea([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Je();{const r=e.filter,u=new Uw(r.count||0);t=new mm(r.targetId,u)}}var w;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?tr(u.readTime):wt.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=nh(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;return l=am(m)?{documents:io(o,m)}:{query:is(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=Hw(o,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(l.readTime=Cl(o,u.snapshotVersion.toTimestamp())),l}(this.serializer,e);const r=function Zw(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=nh(this.serializer),t.removeTarget=e,this.Fo(t)}}class CI extends DI{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function vb(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let u=tr(r.updateTime?r.updateTime:o);return u.isEqual(wt.min())&&(u=tr(o)),new Nv(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.Zo(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=nh(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bi(this.serializer,r))};this.Fo(t)}}class Gb extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.eu=!1}nu(){if(this.eu)throw new be(se.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(se.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.fo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(se.UNKNOWN,u.toString())})}terminate(){this.eu=!0}}class qb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(ur(t),this.ru=!1):Re("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class Zb{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=u,this._u.qr(m=>{r.enqueueAndForget((0,W.Z)(function*(){var w;ji(l)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,W.Z)(function*(b){const A=Xe(b);A.du.add(4),yield ic(A),A.mu.set("Unknown"),A.du.delete(4),yield yp(A)}),function(b){return w.apply(this,arguments)})(l))}))}),this.mu=new qb(r,o)}}function yp(n){return vp.apply(this,arguments)}function vp(){return vp=(0,W.Z)(function*(n){if(ji(n))for(const e of n.wu)yield e(!0)}),vp.apply(this,arguments)}function ic(n){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,W.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Fm.apply(this,arguments)}function gh(n,e){const t=Xe(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),Vm(t)?__(t):Ol(t).No()&&v_(t,e))}function _p(n,e){const t=Xe(n),r=Ol(t);t.fu.delete(e),r.No()&&Lm(t,e),0===t.fu.size&&(r.No()?r.$o():ji(t)&&t.mu.set("Unknown"))}function v_(n,e){n.gu.Ot(e.targetId),Ol(n).jo(e)}function Lm(n,e){n.gu.Ot(e),Ol(n).Wo(e)}function __(n){n.gu=new mS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),Ol(n).start(),n.mu.ou()}function Vm(n){return ji(n)&&!Ol(n).xo()&&n.fu.size>0}function ji(n){return 0===Xe(n).du.size}function w_(n){n.gu=void 0}function Wb(n){return TI.apply(this,arguments)}function TI(){return TI=(0,W.Z)(function*(n){n.fu.forEach((e,t)=>{v_(n,e)})}),TI.apply(this,arguments)}function SI(n,e){return wp.apply(this,arguments)}function wp(){return wp=(0,W.Z)(function*(n,e){w_(n),Vm(n)?(n.mu.au(e),__(n)):n.mu.set("Unknown")}),wp.apply(this,arguments)}function Kb(n,e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,W.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof Bw&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.fu.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.fu.delete(m),o.gu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Um(n,r)}else if(e instanceof ea?n.gu.Kt(e):e instanceof mm?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(wt.min()))try{const r=yield pI(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.gu.Xt(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.fu.get(w);b&&o.fu.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=o.fu.get(m);if(!w)return;o.fu.set(m,w.withResumeToken(cr.EMPTY_BYTE_STRING,w.snapshotVersion)),Lm(o,m);const b=new Ju(w.target,m,1,w.sequenceNumber);v_(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield Um(n,r)}var r}),Ip.apply(this,arguments)}function Um(n,e,t){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,W.Z)(function*(n,e,t){if(!dl(e))throw e;n.du.add(1),yield ic(n),n.mu.set("Offline"),t||(t=()=>pI(n.localStore)),n.asyncQueue.enqueueRetryable((0,W.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield yp(n)}))}),Bm.apply(this,arguments)}function jm(n,e){return e().catch(t=>Um(n,t,e))}function Nl(n){return $m.apply(this,arguments)}function $m(){return $m=(0,W.Z)(function*(n){const e=Xe(n),t=sc(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;AI(e);)try{const o=yield Vb(e.localStore,r);if(null===o){0===e.lu.length&&t.$o();break}r=o.batchId,xI(e,o)}catch(o){yield Um(e,o)}MI(e)&&RI(e)}),$m.apply(this,arguments)}function AI(n){return ji(n)&&n.lu.length<10}function xI(n,e){n.lu.push(e);const t=sc(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function MI(n){return ji(n)&&!sc(n).xo()&&n.lu.length>0}function RI(n){sc(n).start()}function Yb(n){return I_.apply(this,arguments)}function I_(){return I_=(0,W.Z)(function*(n){sc(n).tu()}),I_.apply(this,arguments)}function NI(n){return OI.apply(this,arguments)}function OI(){return OI=(0,W.Z)(function*(n){const e=sc(n);for(const t of n.lu)e.Yo(t.mutations)}),OI.apply(this,arguments)}function PI(n,e,t){return E_.apply(this,arguments)}function E_(){return E_=(0,W.Z)(function*(n,e,t){const r=n.lu.shift(),o=Xf.from(r,e,t);yield jm(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Nl(n)}),E_.apply(this,arguments)}function Qb(n,e){return kI.apply(this,arguments)}function kI(){return kI=(0,W.Z)(function*(n,e){var t;e&&sc(n).Jo&&(yield(t=(0,W.Z)(function*(r,o){if(Lv(u=o.code)&&u!==se.ABORTED){const l=r.lu.shift();sc(r).Oo(),yield jm(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Nl(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),MI(n)&&RI(n)}),kI.apply(this,arguments)}function FI(n,e){return D_.apply(this,arguments)}function D_(){return D_=(0,W.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=ji(t);t.du.add(3),yield ic(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield yp(t)}),D_.apply(this,arguments)}function b_(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,W.Z)(function*(n,e){const t=Xe(n);e?(t.du.delete(2),yield yp(t)):e||(t.du.add(2),yield ic(t),t.mu.set("Unknown"))}),Hm.apply(this,arguments)}function Ol(n){return n.yu||(n.yu=function(e,t,r){const o=Xe(e);return o.nu(),new bI(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Jr:Wb.bind(null,n),Zr:SI.bind(null,n),zo:Kb.bind(null,n)}),n.wu.push(function(){var e=(0,W.Z)(function*(t){t?(n.yu.Oo(),Vm(n)?__(n):n.mu.set("Unknown")):(yield n.yu.stop(),w_(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function sc(n){return n.pu||(n.pu=function(e,t,r){const o=Xe(e);return o.nu(),new CI(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Jr:Yb.bind(null,n),Zr:Qb.bind(null,n),Xo:NI.bind(null,n),Zo:PI.bind(null,n)}),n.wu.push(function(){var e=(0,W.Z)(function*(t){t?(n.pu.Oo(),yield Nl(n)):(yield n.pu.stop(),n.lu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class C_{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new C_(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mh(n,e){if(ur("AsyncQueue",`${e}: ${n}`),dl(n))return new be(se.UNAVAILABLE,`${e}: ${n}`);throw n}class yh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new yh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new yh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class LI{constructor(){this.Iu=new Xn(qe.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Je():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class vh{constructor(e,t,r,o,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new vh(e,t,yh.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ui(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Jb{constructor(){this.Eu=void 0,this.listeners=[]}}class Ep{constructor(){this.queries=new rs(e=>Yd(e),Ui),this.onlineState="Unknown",this.Au=new Set}}function Gm(n,e){return zm.apply(this,arguments)}function zm(){return zm=(0,W.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Jb),o)try{u.Eu=yield t.onListen(r)}catch(l){const m=mh(l,`Initialization of query '${Hr(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Ru(t.onlineState),u.Eu&&e.vu(u.Eu)&&T_(t)}),zm.apply(this,arguments)}function qm(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,W.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Zm.apply(this,arguments)}function VI(n,e){const t=Xe(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.vu(o)&&(r=!0);l.Eu=o}}r&&T_(t)}function UI(n,e,t){const r=Xe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function T_(n){n.Au.forEach(e=>{e.next()})}class BI{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new vh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=vh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class jI{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class $I{constructor(e){this.serializer=e}Hi(e){return Ci(this.serializer,e)}Ji(e){return e.metadata.exists?yb(this.serializer,e.document,!1):Mn.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return tr(e)}}class Xb{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HI(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=Ye.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new $I(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.Hi(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||Bt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,W.Z)(function*(){const t=yield function Ub(n,e,t,r){return Rl.apply(this,arguments)}(e.localStore,new $I(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const o of e.queries)yield Bb(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function HI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class GI{constructor(e){this.key=e}}class _h{constructor(e){this.key=e}}class zI{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Bt(),this.mutatedKeys=Bt(),this.Ku=ns(e),this.Gu=new yh(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new LI,o=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const $=o.get(A),Q=ro(this.query,N)?N:null,pe=!!$&&this.mutatedKeys.has($.key),Ne=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let je=!1;$&&Q?$.data.isEqual(Q.data)?pe!==Ne&&(r.track({type:3,doc:Q}),je=!0):this.Wu($,Q)||(r.track({type:2,doc:Q}),je=!0,(w&&this.Ku(Q,w)>0||b&&this.Ku(Q,b)<0)&&(m=!0)):!$&&Q?(r.track({type:0,doc:Q}),je=!0):$&&!Q&&(r.track({type:1,doc:$}),je=!0,(w||b)&&(m=!0)),je&&(Q?(l=l.add(Q),u=Ne?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Gu:l,ju:r,Mi:m,mutatedKeys:u}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.ju.Tu();u.sort((b,A)=>function(N,$){const Q=pe=>{switch(pe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return Q(N)-Q($)}(b.type,A.type)||this.Ku(b.doc,A.doc)),this.Hu(r);const l=t?this.Ju():[],m=0===this.Uu.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new vh(this.query,e.Gu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:l}:{Yu:l}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new LI,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Bt(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new _h(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new GI(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Bt();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return vh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class S_{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ta{constructor(e){this.key=e,this.ec=!1}}class eC{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new rs(m=>Yd(m),Ui),this.ic=new Map,this.rc=new Set,this.oc=new Xn(qe.comparator),this.uc=new Map,this.cc=new Sm,this.ac={},this.hc=new Map,this.lc=Al.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function A_(n,e){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,W.Z)(function*(n,e){const t=$_(n);let r,o;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.tc();else{const l=yield dh(t.localStore,Di(e));t.isPrimaryClient&&gh(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield x_(t,e,r,"current"===m,l.resumeToken)}return o}),Pl.apply(this,arguments)}function x_(n,e,t,r,o){return M_.apply(this,arguments)}function M_(){return M_=(0,W.Z)(function*(n,e,t,r,o){n.dc=(N,$,Q)=>{return(pe=(0,W.Z)(function*(Ne,je,Ft,$t){let Nt=je.view.zu(Ft);Nt.Mi&&(Nt=yield d_(Ne.localStore,je.query,!1).then(({documents:sn})=>je.view.zu(sn,Nt)));const Gt=$t&&$t.targetChanges.get(je.targetId),zt=je.view.applyChanges(Nt,Ne.isPrimaryClient,Gt);return Cp(Ne,je.targetId,zt.Yu),zt.snapshot}),function(Ne,je,Ft,$t){return pe.apply(this,arguments)})(n,N,$,Q);var pe};const u=yield d_(n.localStore,e,!0),l=new zI(e,u.Wi),m=l.zu(u.documents),w=bl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(m,n.isPrimaryClient,w);Cp(n,t,b.Yu);const A=new S_(e,t,l);return n.sc.set(e,A),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),b.snapshot}),M_.apply(this,arguments)}function tC(n,e){return wh.apply(this,arguments)}function wh(){return wh=(0,W.Z)(function*(n,e){const t=Xe(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(u=>!Ui(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_p(t.remoteStore,r.targetId),Ih(t,r.targetId)}).catch(Ho))):(Ih(t,r.targetId),yield hh(t.localStore,r.targetId,!0))}),wh.apply(this,arguments)}function R_(){return R_=(0,W.Z)(function*(n,e,t){const r=H_(n);try{const o=yield function(u,l){const m=Xe(u),w=Un.now(),b=l.reduce(($,Q)=>$.add(Q.key),Bt());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Q=xr(),pe=Bt();return m.Ki.getEntries($,b).next(Ne=>{Q=Ne,Q.forEach((je,Ft)=>{Ft.isValidDocument()||(pe=pe.add(je))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Q)).next(Ne=>{A=Ne;const je=[];for(const Ft of l){const $t=Pw(Ft,A.get(Ft.key).overlayedDocument);null!=$t&&je.push(new Jo(Ft.key,$t,mv($t.value.mapValue),kn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,je,l)}).next(Ne=>{N=Ne;const je=Ne.applyToLocalDocumentSet(A,pe);return m.documentOverlayCache.saveOverlays($,Ne.batchId,je)})}).then(()=>({batchId:N.batchId,changes:wl(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let w=u.ac[u.currentUser.toKey()];w||(w=new Xn(Vt)),w=w.insert(l,m),u.ac[u.currentUser.toKey()]=w}(r,o.batchId,t),yield na(r,o.changes),yield Nl(r.remoteStore)}catch(o){const u=mh(o,"Failed to persist write");t.reject(u)}}),R_.apply(this,arguments)}function qI(n,e){return Km.apply(this,arguments)}function Km(){return Km=(0,W.Z)(function*(n,e){const t=Xe(n);try{const r=yield function gI(n,e){const t=Xe(n),r=e.snapshotVersion;let o=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Ki.newChangeBuffer({trackRemovals:!0});o=t.Li;const m=[];e.targetChanges.forEach((A,N)=>{const $=o.get(N);if(!$)return;m.push(t.Ds.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Ds.addMatchingKeys(u,A.addedDocuments,N)));let Q=$.withSequenceNumber(u.currentSequenceNumber);var pe,Ne,je;e.targetMismatches.has(N)?Q=Q.withResumeToken(cr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):A.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(A.resumeToken,r)),o=o.insert(N,Q),Ne=Q,je=A,(0===(pe=$).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-pe.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&m.push(t.Ds.updateTargetData(u,Q))});let w=xr(),b=Bt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(lh(u,l,e.documentUpdates).next(A=>{w=A.zi,b=A.ji})),!r.isEqual(wt.min())){const A=t.Ds.getLastRemoteSnapshotVersion(u).next(N=>t.Ds.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return re.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Li=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.uc.get(u);l&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.ec=!0:o.modifiedDocuments.size>0?vt(l.ec):o.removedDocuments.size>0&&(vt(l.ec),l.ec=!1))}),yield na(t,r,e)}catch(r){yield Ho(r)}}),Km.apply(this,arguments)}function N_(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((u,l)=>{const m=l.view.Ru(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Xe(u);m.onlineState=l;let w=!1;m.queries.forEach((b,A)=>{for(const N of A.listeners)N.Ru(l)&&(w=!0)}),w&&T_(m)}(r.eventManager,e),o.length&&r.nc.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O_(n,e,t){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,W.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),u=o&&o.key;if(u){let l=new Xn(qe.comparator);l=l.insert(u,Mn.newNoDocument(u,wt.min()));const m=Bt().add(u),w=new tp(wt.min(),new Map,new yn(Vt),l,m);yield qI(r,w),r.oc=r.oc.remove(u),r.uc.delete(e),B_(r)}else yield hh(r.localStore,e,!1).then(()=>Ih(r,e,t)).catch(Ho)}),Ym.apply(this,arguments)}function P_(n,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,W.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const o=yield function Lb(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ki.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const A=w.batch,N=A.keys();let $=re.resolve();return N.forEach(Q=>{$=$.next(()=>b.getEntry(m,Q)).next(pe=>{const Ne=w.docVersions.get(Q);vt(null!==Ne),pe.version.compareTo(Ne)<0&&(A.applyToRemoteDocument(pe,w),pe.isValidDocument()&&(pe.setReadTime(w.commitVersion),b.addEntry(pe)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Bt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);V_(t,r,null),L_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield na(t,o)}catch(o){yield Ho(o)}}),Dp.apply(this,arguments)}function ZI(n,e,t){return bp.apply(this,arguments)}function bp(){return bp=(0,W.Z)(function*(n,e,t){const r=Xe(n);try{const o=yield function(u,l){const m=Xe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(vt(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);V_(r,e,t),L_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield na(r,o)}catch(o){yield Ho(o)}}),bp.apply(this,arguments)}function F_(){return F_=(0,W.Z)(function*(n,e){const t=Xe(n);ji(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Xe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=mh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),F_.apply(this,arguments)}function L_(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function V_(n,e,t){const r=Xe(n);let o=r.ac[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function Ih(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||U_(n,r)})}function U_(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(_p(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),B_(n))}function Cp(n,e,t){for(const r of t)r instanceof GI?(n.cc.addReference(r.key,e),WI(n,r)):r instanceof _h?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||U_(n,r.key)):Je()}function WI(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.rc.add(r),B_(n))}function B_(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new qe(Ye.fromString(e)),r=n.lc.next();n.uc.set(r,new ta(t)),n.oc=n.oc.insert(t,r),gh(n.remoteStore,new Ju(Di(Wd(t.path)),r,2,Li.ct))}}function na(n,e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,W.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[],l=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,w)=>{l.push(r.dc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const A=fI.Di(w.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.nc.zo(o),yield(m=(0,W.Z)(function*(w,b){const A=Xe(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>re.forEach(b,$=>re.forEach($.Vi,Q=>A.persistence.referenceDelegate.addReference(N,$.targetId,Q)).next(()=>re.forEach($.Si,Q=>A.persistence.referenceDelegate.removeReference(N,$.targetId,Q)))))}catch(N){if(!dl(N))throw N;Re("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const $=N.targetId;if(!N.fromCache){const Q=A.Li.get($),Ne=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);A.Li=A.Li.insert($,Ne)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),Qm.apply(this,arguments)}function nC(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,W.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield c_(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(l=>{l.forEach(m=>{m.reject(new be(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield na(t,r.Qi)}var o}),Jm.apply(this,arguments)}function KI(n,e){const t=Xe(n),r=t.uc.get(e);if(r&&r.ec)return Bt().add(r.key);{let o=Bt();const u=t.ic.get(e);if(!u)return o;for(const l of u){const m=t.sc.get(l);o=o.unionWith(m.view.Qu)}return o}}function rC(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,W.Z)(function*(n,e){const t=Xe(n),r=yield d_(t.localStore,e.query,!0),o=e.view.Xu(r);return t.isPrimaryClient&&Cp(t,e.targetId,o.Yu),o}),Xm.apply(this,arguments)}function iC(n,e){return ri.apply(this,arguments)}function ri(){return ri=(0,W.Z)(function*(n,e){const t=Xe(n);return h_(t.localStore,e).then(r=>na(t,r))}),ri.apply(this,arguments)}function Eh(n,e,t,r){return j_.apply(this,arguments)}function j_(){return j_=(0,W.Z)(function*(n,e,t,r){const o=Xe(n),u=yield function(l,m){const w=Xe(l),b=Xe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.In(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):re.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Nl(o.remoteStore):"acknowledged"===t||"rejected"===t?(V_(o,e,r||null),L_(o,e),m=e,Xe(Xe(o.localStore).mutationQueue).En(m)):Je(),yield na(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),j_.apply(this,arguments)}function YI(){return YI=(0,W.Z)(function*(n,e){const t=Xe(n);if($_(t),H_(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield oC(t,r.toArray());t.fc=!0,yield b_(t.remoteStore,!0);for(const u of o)gh(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Ih(t,l),hh(t.localStore,l,!0))),_p(t.remoteStore,l)}),yield o,yield oC(t,r),function(u){const l=Xe(u);l.uc.forEach((m,w)=>{_p(l.remoteStore,w)}),l.cc.ls(),l.uc=new Map,l.oc=new Xn(qe.comparator)}(t),t.fc=!1,yield b_(t.remoteStore,!1)}}),YI.apply(this,arguments)}function oC(n,e,t){return ey.apply(this,arguments)}function ey(){return ey=(0,W.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[];for(const l of e){let m;const w=r.ic.get(l);if(w&&0!==w.length){m=yield dh(r.localStore,Di(w[0]));for(const b of w){const A=r.sc.get(b),N=yield rC(r,A);N.snapshot&&u.push(N.snapshot)}}else{const b=yield mI(r.localStore,l);m=yield dh(r.localStore,b),yield x_(r,ty(b),l,!1,m.resumeToken)}o.push(m)}return r.nc.zo(u),o}),ey.apply(this,arguments)}function ty(n){return bv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Tp(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).bi()}function aC(n,e,t,r){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,W.Z)(function*(n,e,t,r){const o=Xe(n);if(o.fc)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield h_(o.localStore,qf(u[0])),m=tp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,cr.EMPTY_BYTE_STRING);yield na(o,l,m);break}case"rejected":yield hh(o.localStore,e,!0),Ih(o,e,r);break;default:Je()}}),Sp.apply(this,arguments)}function uC(n,e,t){return ny.apply(this,arguments)}function ny(){return ny=(0,W.Z)(function*(n,e,t){const r=$_(n);if(r.fc){for(const o of e){if(r.ic.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield mI(r.localStore,o),l=yield dh(r.localStore,u);yield x_(r,ty(u),l.targetId,!1,l.resumeToken),gh(r.remoteStore,l)}for(const o of t)r.ic.has(o)&&(yield hh(r.localStore,o,!1).then(()=>{_p(r.remoteStore,o),Ih(r,o)}).catch(Ho))}}),ny.apply(this,arguments)}function $_(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O_.bind(null,e),e.nc.zo=VI.bind(null,e.eventManager),e.nc.wc=UI.bind(null,e.eventManager),e}function H_(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,e),e}class Dh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,W.Z)(function*(){t.serializer=mp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Fb(this.persistence,new kb,e.initialUser,this.serializer)}createPersistence(e){return new dI(Am.Fs,this.serializer)}createSharedClientState(e){return new _I}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ry extends Dh{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield H_(r.mc.syncEngine),yield Nl(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Fb(this.persistence,new kb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new nr(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new YD(t,this.persistence);return new zg(e.asyncQueue,r)}createPersistence(e){const t=u_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new a_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,EI(),Pm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _I}}class G_ extends ry{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e);const o=r.mc.syncEngine;r.sharedClientState instanceof Om&&(r.sharedClientState.syncEngine={$r:Eh.bind(null,o),Mr:aC.bind(null,o),Fr:uC.bind(null,o),bi:Tp.bind(null,o),Or:iC.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var u=(0,W.Z)(function*(l){yield function sC(n,e){return YI.apply(this,arguments)}(r.mc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=EI();if(!Om.D(t))throw new be(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=u_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Om(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qa{initialize(e,t){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>N_(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=nC.bind(null,r.syncEngine),yield b_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ep}createDatastore(e){const t=mp(e.databaseInfo.databaseId),r=new Hb(e.databaseInfo);return new Gb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>N_(this.syncEngine,m,0),l=wI.D()?new wI:new jb,new Zb(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,w,b){const A=new eC(r,o,u,l,m,w);return b&&(A.fc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,W.Z)(function*(t){const r=Xe(t);Re("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield ic(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function iy(n,e=10240){let t=0;return{read:()=>(0,W.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QI{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Br,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,W.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),o=Number(r);isNaN(o)&&e.Rc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new jI(JSON.parse(u),t.length+o)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,W.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,W.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,W.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,W.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,W.Z)(function*(u,l){const m=Xe(u),w=nh(m.serializer)+"/documents",b={documents:l.map(Q=>th(m.serializer,Q))},A=yield m.fo("BatchGetDocuments",w,b,l.length),N=new Map;A.forEach(Q=>{const pe=function qw(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=Ci(t,r.found.name),u=tr(r.found.updateTime),l=r.found.createTime?tr(r.found.createTime):wt.min(),m=new Ar({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=Ci(t,r.missing),u=tr(r.readTime);return Mn.newNoDocument(o,u)}(n,e):Je()}(m.serializer,Q);N.set(pe.key.toString(),pe)});const $=[];return l.forEach(Q=>{const pe=N.get(Q.toString());vt(!!pe),$.push(pe)}),$}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new eh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new Fv(u,e.precondition(u)))}),yield(r=(0,W.Z)(function*(o,u){const l=Xe(o),m=nh(l.serializer)+"/documents",w={writes:u.map(b=>Bi(l.serializer,b))};yield l.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wt.min())?kn.exists(!1):kn.updateTime(t):kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new be(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(t)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JI{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Vc=r.maxAttempts,this.Co=new y_(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,W.Z)(function*(){const t=new lC(e.datastore),r=e.Dc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Cc(u)}))}).catch(o=>{e.Cc(o)})}))}Dc(e){try{const t=this.updateFunction(e);return!Ff(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Lv(t)}return!1}}class bh{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Jn.UNAUTHENTICATED,this.clientId=lw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,W.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=mh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function sy(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,W.Z)(function*(u){r.isEqual(u)||(yield c_(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),oy.apply(this,arguments)}function Ap(n,e){return XI.apply(this,arguments)}function XI(){return XI=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield tE(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>FI(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>FI(e.remoteStore,u)),n._onlineComponents=e}),XI.apply(this,arguments)}function eE(n){return"FirebaseError"===n.name?n.code===se.FAILED_PRECONDITION||n.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function tE(n){return q_.apply(this,arguments)}function q_(){return q_=(0,W.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!eE(t))throw t;$o("Error using user provided cache. Falling back to memory cache: "+t),yield sy(n,new Dh)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),yield sy(n,new Dh);return n._offlineComponents}),q_.apply(this,arguments)}function ay(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,W.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ap(n,n._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),yield Ap(n,new Qa))),n._onlineComponents}),Z_.apply(this,arguments)}function W_(n){return tE(n).then(e=>e.persistence)}function xp(n){return tE(n).then(e=>e.localStore)}function K_(n){return ay(n).then(e=>e.remoteStore)}function uy(n){return ay(n).then(e=>e.syncEngine)}function Ch(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,W.Z)(function*(n){const e=yield ay(n),t=e.eventManager;return t.onListen=A_.bind(null,e.syncEngine),t.onUnlisten=tC.bind(null,e.syncEngine),t}),Q_.apply(this,arguments)}function J_(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,u,l,m,w){const b=new z_({next:N=>{u.enqueueAndForget(()=>qm(o,A));const $=N.docs.has(l);!$&&N.fromCache?w.reject(new be(se.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new be(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new BI(Wd(l.path),b,{includeMetadataChanges:!0,xu:!0});return Gm(o,A)}(yield Ch(n),n.asyncQueue,e,t,r)})),r.promise}function X_(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,u,l,m,w){const b=new z_({next:N=>{u.enqueueAndForget(()=>qm(o,A)),N.fromCache&&"server"===m.source?w.reject(new be(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new BI(l,b,{includeMetadataChanges:!0,xu:!0});return Gm(o,A)}(yield Ch(n),n.asyncQueue,e,t,r)})),r.promise}const pC=new Map;function oE(n,e,t){if(!t)throw new be(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gC(n,e,t,r){if(!0===e&&!0===r)throw new be(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mC(n){if(!qe.isDocumentKey(n))throw new be(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yC(n){if(qe.isDocumentKey(n))throw new be(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function e0(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=e0(n);throw new be(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vC(n,e){if(e<=0)throw new be(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Mp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new be(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cy{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new uw;switch(t.type){case"firstParty":return new jD(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pC.get(e);t&&(Re("ComponentProvider","Removing Datastore"),pC.delete(e),t.terminate())}(this),Promise.resolve()}}class vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class Gr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gr(this.firestore,e,this._query)}}class oo extends Gr{constructor(e,t,r){super(e,t,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new qe(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function _C(n,e,...t){if(n=(0,ze.m9)(n),oE("collection","path",e),n instanceof cy){const r=Ye.fromString(e,...t);return yC(r),new oo(n,null,r)}{if(!(n instanceof vn||n instanceof oo))throw new be(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return yC(r),new oo(n.firestore,null,r)}}function Rp(n,e,...t){if(n=(0,ze.m9)(n),1===arguments.length&&(e=lw.A()),oE("doc","path",e),n instanceof cy){const r=Ye.fromString(e,...t);return mC(r),new vn(n,null,new qe(r))}{if(!(n instanceof vn||n instanceof oo))throw new be(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return mC(r),new vn(n.firestore,n instanceof oo?n.converter:null,new qe(r))}}function aE(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),(n instanceof vn||n instanceof oo)&&(e instanceof vn||e instanceof oo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uE(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),n instanceof Gr&&e instanceof Gr&&n.firestore===e.firestore&&Ui(n._query,e._query)&&n.converter===e.converter}class wS{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new y_(this,"async_queue_retry"),this.qc=()=>{const t=Pm();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Pm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Pm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Br;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,W.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!dl(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,ur("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const o=C_.createAndSchedule(this,e,t,r,u=>this.Qc(u));return this.$c.push(o),o}Uc(){this.Mc&&Je()}verifyOperationInProgress(){}zc(){var e=this;return(0,W.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function r0(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class wC{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fn extends cy{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new wS,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cE(this),this._firestoreClient.terminate()}}function gr(n){return n._firestoreClient||cE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cE(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pv(n._databaseId,m,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var m,b;n._firestoreClient=new bh(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function DC(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,W.Z)(function*(){try{yield sy(n,t),yield Ap(n,e),r.resolve()}catch(o){const u=o;if(!eE(u))throw u;$o("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function hE(n){if(n._initialized||n._terminated)throw new be(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(cr.fromBase64String(e))}catch(t){throw new be(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ia(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ao{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kl{constructor(e){this._methodName=e}}class Th{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const fE=/^__.*__$/;class pE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}class gE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function o0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class Np{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Jc(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new Np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Zc({path:r,ta:!1});return o.ea(e),o}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Zc({path:r,ta:!1});return o.Jc(),o}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Op(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(o0(this.Yc)&&fE.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class TC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mp(e)}ua(e,t,r,o=!1){return new Np({Yc:e,methodName:t,oa:r,path:zn.emptyPath(),ta:!1,ra:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oc(n){const e=n._freezeSettings(),t=mp(n._databaseId);return new TC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hy(n,e,t,r,o,u={}){const l=n.ua(u.merge||u.mergeFields?2:0,e,t,o);fy("Data must be an object, but it was:",l,r);const m=wE(r,l);let w,b;if(u.merge)w=new Ei(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const $=py(e,N,t);if(!l.contains($))throw new be(se.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);SC(A,$)||A.push($)}w=new Ei(A),b=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=l.fieldTransforms;return new pE(new Ar(m),w,b)}class Fl extends kl{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fl}}function sa(n,e,t){return new Np({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oa extends kl{_toFieldTransform(e){return new Yf(e.path,new Jd)}isEqual(e){return e instanceof oa}}class mE extends kl{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=sa(this,e,!0),r=this.ca.map(u=>Ll(u,t)),o=new Ku(r);return new Yf(e.path,o)}isEqual(e){return this===e}}class a0 extends kl{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=sa(this,e,!0),r=this.ca.map(u=>Ll(u,t)),o=new Za(r);return new Yf(e.path,o)}isEqual(e){return this===e}}class yE extends kl{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Wa(e.serializer,xv(e.serializer,this.aa));return new Yf(e.path,t)}isEqual(e){return this===e}}function u0(n,e,t,r){const o=n.ua(1,e,t);fy("Data must be an object, but it was:",o,r);const u=[],l=Ar.empty();hl(r,(w,b)=>{const A=gy(e,w,t);b=(0,ze.m9)(b);const N=o.na(A);if(b instanceof Fl)u.push(A);else{const $=Ll(b,N);null!=$&&(u.push(A),l.set(A,$))}});const m=new Ei(u);return new gE(l,m,o.fieldTransforms)}function vE(n,e,t,r,o,u){const l=n.ua(1,e,t),m=[py(e,r,t)],w=[o];if(u.length%2!=0)throw new be(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(py(e,u[$])),w.push(u[$+1]);const b=[],A=Ar.empty();for(let $=m.length-1;$>=0;--$)if(!SC(b,m[$])){const Q=m[$];let pe=w[$];pe=(0,ze.m9)(pe);const Ne=l.na(Q);if(pe instanceof Fl)b.push(Q);else{const je=Ll(pe,Ne);null!=je&&(b.push(Q),A.set(Q,je))}}const N=new Ei(b);return new gE(A,N,l.fieldTransforms)}function _E(n,e,t,r=!1){return Ll(t,n.ua(r?4:3,e))}function Ll(n,e){if(IE(n=(0,ze.m9)(n)))return fy("Unsupported field value:",e,n),wE(n,e);if(n instanceof kl)return function(t,r){if(!o0(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Ll(l,r.sa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xv(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Un.fromDate(t);return{timestampValue:Cl(r.serializer,o)}}if(t instanceof Un){const o=new Un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cl(r.serializer,o)}}if(t instanceof Th)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ia)return{bytesValue:Hw(r.serializer,t._byteString)};if(t instanceof vn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ia(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Vv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${e0(t)}`)}(n,e)}function wE(n,e){const t={};return fv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hl(n,(r,o)=>{const u=Ll(o,e.Xc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function IE(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof Th||n instanceof ia||n instanceof vn||n instanceof kl)}function fy(n,e,t){if(!IE(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=e0(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function py(n,e,t){if((e=(0,ze.m9)(e))instanceof ao)return e._internalPath;if("string"==typeof e)return gy(n,e);throw Op("Field path arguments must be of type string or ",n,!1,void 0,t)}const EE=new RegExp("[~\\*/\\[\\]]");function gy(n,e,t){if(e.search(EE)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ao(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Op(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${o}`),w+=")"),new be(se.INVALID_ARGUMENT,m+n+w)}function SC(n,e){return n.some(t=>t.isEqual(e))}class Vl{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class DE extends Vl{data(){return super.data()}}function Pp(n,e){return"string"==typeof e?gy(n,e):e instanceof ao?e._internalPath:e._delegate._internalPath}function c0(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class my{}class Sh extends my{}function uo(n,e,...t){let r=[];e instanceof my&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof Ah).length,l=o.filter(m=>m instanceof ac).length;if(u>1||u>0&&l>0)throw new be(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class ac extends Sh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ac(e,t,r)}_apply(e){const t=this._parse(e);return AE(e._query,t),new Gr(e.firestore,e.converter,zf(e._query,t))}_parse(e){const t=oc(e.firestore);return function(o,u,l,m,w,b,A){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new be(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){SE(A,b);const $=[];for(const Q of A)$.push(Fp(m,o,Q));N={arrayValue:{values:$}}}else N=Fp(m,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||SE(A,b),N=_E(l,"where",A,"in"===b||"not-in"===b);return Yt.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ah extends my{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ah(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)AE(u,m),u=zf(u,m)}(e._query,t),new Gr(e.firestore,e.converter,zf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class CE extends Sh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new CE(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new be(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new qa(o,u);return function(m,w){if(null===cm(m)){const b=Cv(m);null!==b&&d0(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ko(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class kp extends Sh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new kp(e,t,r)}_apply(e){return new Gr(e.firestore,e.converter,lm(e._query,this._limit,this._limitType))}}class yy extends Sh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yy(e,t,r)}_apply(e){const t=TE(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(o=t,new Ko((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class l0 extends Sh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new l0(e,t,r)}_apply(e){const t=TE(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(o=t,new Ko((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function TE(n,e,t,r){if(t[0]=(0,ze.m9)(t[0]),t[0]instanceof Vl)return function(o,u,l,m,w){if(!m)throw new be(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of vl(o))if(A.field.isKeyField())b.push(gl(u,m.key));else{const N=m.data.field(A.field);if(Qg(N))throw new be(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=A.field.canonicalString();throw new be(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(N)}return new za(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=oc(n.firestore);return function(u,l,m,w,b,A){const N=u.explicitOrderBy;if(b.length>N.length)throw new be(se.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Q=0;Q<b.length;Q++){const pe=b[Q];if(N[Q].field.isKeyField()){if("string"!=typeof pe)throw new be(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof pe}`);if(!Kd(u)&&-1!==pe.indexOf("/"))throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${pe}' contains a slash.`);const Ne=u.path.child(Ye.fromString(pe));if(!qe.isDocumentKey(Ne))throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const je=new qe(Ne);$.push(gl(l,je))}else{const Ne=_E(m,w,pe);$.push(Ne)}}return new za($,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Fp(n,e,t){if("string"==typeof(t=(0,ze.m9)(t))){if(""===t)throw new be(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kd(e)&&-1!==t.indexOf("/"))throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ye.fromString(t));if(!qe.isDocumentKey(r))throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gl(n,new qe(r))}if(t instanceof vn)return gl(n,t._key);throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${e0(t)}.`)}function SE(n,e){if(!Array.isArray(n)||0===n.length)throw new be(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AE(n,e){if(e.isInequality()){const r=Cv(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new be(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=cm(n);null!==u&&d0(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(se.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function d0(n,e,t){if(!t.isEqual(e))throw new be(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vy{convertValue(e,t="none"){switch(pl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return hl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Th(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Iw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($f(e));default:return null}}convertTimestamp(e){const t=zu(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ye.fromString(e);vt(zv(r));const o=new qu(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||ur(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class h0 extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}class Mh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cc extends Vl{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _y(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Pp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _y extends cc{data(e={}){return super.data(e)}}class Ja{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Mh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _y(this._firestore,this._userDataWriter,r.key,r,new Mh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new _y(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Mh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new _y(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Mh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:MC(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function ME(n,e){return n instanceof cc&&e instanceof cc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ja&&e instanceof Ja&&n._firestore===e._firestore&&uE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class lc extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}function g0(n,e,t){n=tn(n,vn);const r=tn(n.firestore,Fn),o=xh(n.converter,e,t);return Rh(r,[hy(oc(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,kn.none())])}function wy(n,e,t,...r){n=tn(n,vn);const o=tn(n.firestore,Fn),u=oc(o);let l;return l="string"==typeof(e=(0,ze.m9)(e))||e instanceof ao?vE(u,"updateDoc",n._key,e,t,r):u0(u,"updateDoc",n._key,e),Rh(o,[l.toMutation(n._key,kn.exists(!0))])}function Iy(n,...e){var t,r,o;n=(0,ze.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||r0(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(r0(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,b,A;if(n instanceof vn)b=tn(n.firestore,Fn),A=Wd(n._key.path),w={next:N=>{e[l]&&e[l](kE(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=tn(n,Gr);b=tn(N.firestore,Fn),A=N._query;const $=new lc(b);w={next:Q=>{e[l]&&e[l](new Ja(b,$,N,Q))},error:e[l+1],complete:e[l+2]},c0(n._query)}return function(N,$,Q,pe){const Ne=new z_(pe),je=new BI($,Ne,Q);return N.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return Gm(yield Ch(N),je)})),()=>{Ne.yc(),N.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return qm(yield Ch(N),je)}))}}(gr(b),A,m,w)}function Rh(n,e){return function(t,r){const o=new Br;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function Wm(n,e,t){return R_.apply(this,arguments)}(yield uy(t),r,o)})),o.promise}(gr(n),e)}function kE(n,e,t){const r=t.docs.get(e._key),o=new lc(n);return new cc(n,o,e._key,r,new Mh(t.hasPendingWrites,t.fromCache),e.converter)}const OS={maxAttempts:5};class UC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=oc(e)}set(e,t,r){this._verifyNotCommitted();const o=Ul(e,this._firestore),u=xh(o.converter,t,r),l=hy(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,kn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ul(e,this._firestore);let l;return l="string"==typeof(t=(0,ze.m9)(t))||t instanceof ao?vE(this._dataReader,"WriteBatch.update",u._key,t,r,o):u0(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ul(e,this._firestore);return this._mutations=this._mutations.concat(new eh(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ul(n,e){if((n=(0,ze.m9)(n)).firestore!==e)throw new be(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class PS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=oc(e)}get(e){const t=Ul(e,this._firestore),r=new h0(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Je();const u=o[0];if(u.isFoundDocument())return new Vl(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Vl(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const o=Ul(e,this._firestore),u=xh(o.converter,t,r),l=hy(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Ul(e,this._firestore);let l;return l="string"==typeof(t=(0,ze.m9)(t))||t instanceof ao?vE(this._dataReader,"Transaction.update",u._key,t,r,o):u0(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Ul(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ul(e,this._firestore),r=new lc(this._firestore);return super.get(e).then(o=>new cc(this._firestore,r,t._key,o._document,new Mh(!1,!1),t.converter))}}!function(n,e=!0){Bd=st.SDK_VERSION,(0,st._registerComponent)(new ht.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Fn(new cw(t.getProvider("auth-internal")),new $D(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,st.registerVersion)(jg,"3.10.0",n),(0,st.registerVersion)(jg,"3.10.0","esm2017")}();function M(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function k(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function G(){if(!function pS(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}class K{constructor(e){this._delegate=e}static fromBase64String(e){return G(),new K(ia.fromBase64String(e))}static fromUint8Array(e){return k(),new K(ia.fromUint8Array(e))}toBase64(){return G(),this._delegate.toBase64()}toUint8Array(){return k(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fe(n){return function ke(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Qe{enableIndexedDbPersistence(e,t){return function IC(n,e){hE(n=tn(n,Fn));const t=gr(n);if(t._uninitializedComponentsProvider)throw new be(se.FAILED_PRECONDITION,"SDK cache is already specified.");$o("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Qa;return DC(t,o,new ry(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function EC(n){hE(n=tn(n,Fn));const e=gr(n);if(e._uninitializedComponentsProvider)throw new be(se.FAILED_PRECONDITION,"SDK cache is already specified.");$o("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Qa;return DC(e,r,new G_(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function bC(n){if(n._initialized&&!n._terminated)throw new be(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(t=(0,W.Z)(function*(r){if(!Go.D())return Promise.resolve();const o=r+"main";yield Go.delete(o)}),function(r){return t.apply(this,arguments)})(u_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ct{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function t0(n,e,t,r={}){var o;const u=(n=tn(n,cy))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&$o("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Jn.MOCK_USER;else{l=(0,ze.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new be(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Jn(w)}n._authCredentials=new UD(new tv(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function dE(n){return function nE(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield W_(n),t=yield K_(n);return e.setNetworkEnabled(!0),function(r){const o=Xe(r);return o.du.delete(0),yp(o)}(t)}))}(gr(n=tn(n,Fn)))}(this._delegate)}disableNetwork(){return function IS(n){return function dC(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield W_(n),t=yield K_(n);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(o){const u=Xe(o);u.du.add(0),yield ic(u),u.mu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(gr(n=tn(n,Fn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lE(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function k_(n,e){return F_.apply(this,arguments)}(yield uy(e),t)})),t.promise}(gr(n=tn(n,Fn)))}(this._delegate)}onSnapshotsInSync(e){return function PC(n,e){return function hC(n,e){const t=new z_(e);return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield Ch(n),o=t,Xe(r).Au.add(o),void o.next();var r,o})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield Ch(n),o=t,void Xe(r).Au.delete(o);var r,o}))}}(gr(n=tn(n,Fn)),r0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ey(this,_C(this._delegate,e))}catch(t){throw ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new co(this,Rp(this._delegate,e))}catch(t){throw ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new os(this,function n0(n,e){if(n=tn(n,cy),oE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gr(n,null,(t=e,new Ko(Ye.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kS(n,e,t){n=tn(n,Fn);const r=Object.assign(Object.assign({},OS),t);return function(o){if(o.maxAttempts<1)throw new be(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Br;return o.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const w=yield function Y_(n){return ay(n).then(e=>e.datastore)}(o);new JI(o.asyncQueue,w,l,u,m).run()})),m.promise}(gr(n),o=>e(new PS(n,o)),r)}(this._delegate,t=>e(new kt(this,t)))}batch(){return gr(this._delegate),new Ln(new UC(this._delegate,e=>Rh(this._delegate,e)))}loadBundle(e){return function CC(n,e){const t=gr(n=tn(n,Fn)),r=new wC;return function fC(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return iy(w,b);if(w instanceof ArrayBuffer)return iy(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new QI(w,l);var w}(t,mp(e));n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function cC(n,e,t){const r=Xe(n);var o;(o=(0,W.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function($,Q){const pe=Xe($),Ne=tr(Q.createTime);return pe.persistence.runTransaction("hasNewerBundle","readonly",je=>pe.xs.getBundleMetadata(je,Q.id)).then(je=>!!je&&je.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(HI(w));const b=new Xb(w,u.localStore,l.serializer);let A=yield l._c();for(;A;){const $=yield b.$u(A);$&&m._updateProgress($),A=yield l._c()}const N=yield b.complete();return yield na(u,N.Bu,void 0),yield function($,Q){const pe=Xe($);return pe.persistence.runTransaction("Save bundle","readwrite",Ne=>pe.xs.saveBundleMetadata(Ne,Q))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Fu)}catch(w){return $o("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield uy(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function s0(n,e){return function _S(n,e){return n.asyncQueue.enqueue((0,W.Z)(function*(){return function(t,r){const o=Xe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.xs.getNamedQuery(u,r))}(yield xp(n),e)}))}(gr(n=tn(n,Fn)),e).then(t=>t?new Gr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new os(this,t):null)}}class Dt extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new K(new ia(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return co.forKey(t,this.firestore,null)}}class kt{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Dt(e)}get(e){const t=Lp(e);return this._delegate.get(t).then(r=>new m0(this._firestore,new cc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Lp(e);return r?(M("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}}class Ln{constructor(e){this._delegate=e}set(e,t,r){const o=Lp(e);return r?(M("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dn{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _y(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new y0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dn.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Dn(e,new Dt(e),t),o.set(t,u)),u}}Dn.INSTANCES=new WeakMap;class co{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dt(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new co(t,new vn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new co(t,new vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ey(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ey(this.firestore,_C(this._delegate,e))}catch(t){throw ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof vn&&aE(this._delegate,e)}set(e,t){t=M("DocumentReference.set",t);try{return t?g0(this._delegate,e,t):g0(this._delegate,e)}catch(r){throw ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?wy(this._delegate,e):wy(this._delegate,e,t,...r)}catch(o){throw ss(o,"updateDoc()","DocumentReference.update()")}}delete(){return function MS(n){return Rh(tn(n.firestore,Fn),[new eh(n._key,kn.none())])}(this._delegate)}onSnapshot(...e){const t=FS(e),r=LS(e,o=>new m0(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Iy(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function RE(n){n=tn(n,vn);const e=tn(n.firestore,Fn),t=gr(e),r=new lc(e);return function rE(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,u,l){try{const m=yield function(w,b){const A=Xe(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new be(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=mh(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield xp(n),e,t);var r})),t.promise}(t,n._key).then(o=>new cc(e,r,n._key,o,new Mh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function NE(n){n=tn(n,vn);const e=tn(n.firestore,Fn);return J_(gr(e),n._key,{source:"server"}).then(t=>kE(e,n,t))}(this._delegate):function RC(n){n=tn(n,vn);const e=tn(n.firestore,Fn);return J_(gr(e),n._key).then(t=>kE(e,n,t))}(this._delegate),t.then(r=>new m0(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new co(this.firestore,this._delegate.withConverter(e?Dn.getInstance(this.firestore,e):null))}}function ss(n,e,t){return n.message=n.message.replace(e,t),n}function FS(n){for(const e of n)if("object"==typeof e&&!fe(e))return e;return{}}function LS(n,e){var t,r;let o;return o=fe(n[0])?n[0]:fe(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class m0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new co(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ME(this._delegate,e._delegate)}}class y0 extends m0{data(e){const t=this._delegate.data(e);return function VD(n,e){n||Je()}(void 0!==t),t}}class os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dt(e)}where(e,t,r){try{return new os(this.firestore,uo(this._delegate,function bE(n,e,t){const r=e,o=Pp("where",n);return ac._create(o,r,t)}(e,t,r)))}catch(o){throw ss(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new os(this.firestore,uo(this._delegate,function bS(n,e="asc"){const t=e,r=Pp("orderBy",n);return CE._create(r,t)}(e,t)))}catch(r){throw ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new os(this.firestore,uo(this._delegate,function AC(n){return vC("limit",n),kp._create("limit",n,"F")}(e)))}catch(t){throw ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new os(this.firestore,uo(this._delegate,function xC(n){return vC("limitToLast",n),kp._create("limitToLast",n,"L")}(e)))}catch(t){throw ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new os(this.firestore,uo(this._delegate,function CS(...n){return yy._create("startAt",n,!0)}(...e)))}catch(t){throw ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new os(this.firestore,uo(this._delegate,function TS(...n){return yy._create("startAfter",n,!1)}(...e)))}catch(t){throw ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new os(this.firestore,uo(this._delegate,function SS(...n){return l0._create("endBefore",n,!1)}(...e)))}catch(t){throw ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new os(this.firestore,uo(this._delegate,function AS(...n){return l0._create("endAt",n,!0)}(...e)))}catch(t){throw ss(t,"endAt()","Query.endAt()")}}isEqual(e){return uE(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function NC(n){n=tn(n,Gr);const e=tn(n.firestore,Fn),t=gr(e),r=new lc(e);return function iE(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,u,l){try{const m=yield d_(o,u,!0),w=new zI(u,m.Wi),b=w.zu(m.documents),A=w.applyChanges(b,!1);l.resolve(A.snapshot)}catch(m){const w=mh(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield xp(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ja(e,r,n,o))}(this._delegate):"server"===e?.source?function OC(n){n=tn(n,Gr);const e=tn(n.firestore,Fn),t=gr(e),r=new lc(e);return X_(t,n._query,{source:"server"}).then(o=>new Ja(e,r,n,o))}(this._delegate):function OE(n){n=tn(n,Gr);const e=tn(n.firestore,Fn),t=gr(e),r=new lc(e);return c0(n._query),X_(t,n._query).then(o=>new Ja(e,r,n,o))}(this._delegate),t.then(r=>new BC(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=FS(e),r=LS(e,o=>new BC(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Iy(this._delegate,t,r)}withConverter(e){return new os(this.firestore,this._delegate.withConverter(e?Dn.getInstance(this.firestore,e):null))}}class XM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new y0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new y0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new XM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new y0(this._firestore,r))})}isEqual(e){return ME(this._delegate,e._delegate)}}class Ey extends os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new co(this.firestore,e):null}doc(e){try{return new co(this.firestore,void 0===e?Rp(this._delegate):Rp(this._delegate,e))}catch(t){throw ss(t,"doc()","CollectionReference.doc()")}}add(e){return function PE(n,e){const t=tn(n.firestore,Fn),r=Rp(n),o=xh(n.converter,e);return Rh(t,[hy(oc(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new co(this.firestore,t))}isEqual(e){return aE(this._delegate,e._delegate)}withConverter(e){return new Ey(this.firestore,this._delegate.withConverter(e?Dn.getInstance(this.firestore,e):null))}}function Lp(n){return tn(n,vn)}class jC{constructor(...e){this._delegate=new ao(...e)}static documentId(){return new jC(zn.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof ao&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function s(){return new oa("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Vp(e)}static delete(){const e=function i(){return new Fl("deleteField")}();return e._methodName="FieldValue.delete",new Vp(e)}static arrayUnion(...e){const t=function a(...n){return new mE("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Vp(t)}static arrayRemove(...e){const t=function c(...n){return new a0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Vp(t)}static increment(e){const t=function d(n){return new yE("increment",n)}(e);return t._methodName="FieldValue.increment",new Vp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eR={Firestore:ct,GeoPoint:Th,Timestamp:Un,Blob:K,Transaction:kt,WriteBatch:Ln,DocumentReference:co,DocumentSnapshot:m0,Query:os,QueryDocumentSnapshot:y0,QuerySnapshot:BC,CollectionReference:Ey,FieldPath:jC,FieldValue:Vp,setLogLevel:function xe(n){!function LD(n){$u.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function nR(n){(function tR(n,e){n.INTERNAL.registerComponent(new ht.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},eR)))})(n,(e,t)=>new ct(e,t,new Qe)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(Ae.Z);var Nh=P(7579),rR=P(6451),FE=P(5363),LE=P(8421);function gi(n,e){return(0,dr.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,Vn.x)(r,w=>{o?.unsubscribe();let b=0;const A=u++;(0,LE.Xf)(n(w,A)).subscribe(o=(0,Vn.x)(r,N=>r.next(e?e(w,N,A,b++):N),()=>{o=null,m()}))},()=>{l=!0,m()}))})}var iR=P(6063);class sR extends Nh.x{constructor(e=1/0,t=1/0,r=iR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var oR=P(3099);function VS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,oR.B)({connector:()=>new sR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const VE=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Oh=P(515);function v0(n){return n<=0?()=>Oh.E:(0,dr.e)((e,t)=>{let r=0;e.subscribe((0,Vn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function UE(n){return(0,dr.e)((e,t)=>{let r=!1;e.subscribe((0,Vn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function US(n=uR){return(0,dr.e)((e,t)=>{let r=!1;e.subscribe((0,Vn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function uR(){return new VE}function Bl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?q((o,u)=>n(o,u,r)):C.y,v0(1),t?UE(e):US(()=>new VE))}var $C=P(576);function BS(n,e){return(0,$C.m)(e)?gi(()=>n,e):gi(()=>n)}var HC=P(9468);P(259);const zC=new Map,$S={activated:!1,tokenObservers:[]},fR={initialized:!1,enabled:!1};function Ti(n){return zC.get(n)||Object.assign({},$S)}function jE(){return fR}const qC="https://content-firebaseappcheck.googleapis.com/v1",yR="exchangeDebugToken",HS={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class _R{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,W.Z)(function*(){t.stop();try{t.pending=new ze.BH,yield function wR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ze.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const as=new ze.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KC(){return KC=(0,W.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw as.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw as.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw as.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw as.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),KC.apply(this,arguments)}const CR="firebase-app-check-database",TR=1,_0="firebase-app-check-store";let GE=null;function YC(){return YC=(0,W.Z)(function*(n,e){const r=(yield function qS(){return GE||(GE=new Promise((n,e)=>{try{const t=indexedDB.open(CR,TR);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(as.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_0,{keyPath:"compositeKey"})}}catch(t){e(as.create("storage-open",{originalErrorMessage:t?.message}))}}),GE)}()).transaction(_0,"readwrite"),u=r.objectStore(_0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(as.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),YC.apply(this,arguments)}const w0=new Mt.Yd("@firebase/app-check");function XC(n,e){return(0,ze.hl)()?function AR(n,e){return function ZS(n,e){return YC.apply(this,arguments)}(function KS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{w0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function tT(){return tT=(0,W.Z)(function*(){const n=jE();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),tT.apply(this,arguments)}const PR={error:"UNKNOWN_ERROR"};function kR(n){return ze.US.encodeString(JSON.stringify(n),!1)}function zE(n){return nT.apply(this,arguments)}function nT(){return nT=(0,W.Z)(function*(n,e=!1){const t=n.app;!function GS(n){if(!Ti(n).activated)throw as.create("use-before-activation",{appName:n.name})}(t);const r=Ti(t);let u,o=r.token;if(o&&!Dy(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(Dy(w)?o=w:yield XC(t,void 0))}if(!e&&o&&Dy(o))return{token:o.token};let m,l=!1;if(function YS(){return jE().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function WC(n,e){return KC.apply(this,arguments)}(function bR(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${qC}/projects/${t}/apps/${r}:${yR}?key=${o}`,body:{debug_token:e}}}(t,yield function QS(){return tT.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield XC(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Ti(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?w0.warn(w.message):w0.error(w),u=w}return o?u?m=Dy(o)?{token:o.token,internalError:u}:eA(u):(m={token:o.token},r.token=o,yield XC(t,o)):m=eA(u),l&&function XS(n,e){const t=Ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),nT.apply(this,arguments)}function iT(n,e){const t=Ti(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function JS(n){const{app:e}=n,t=Ti(e);let r=t.tokenRefresher;r||(r=function FR(n){const{app:e}=n;return new _R((0,W.Z)(function*(){let r;if(r=Ti(e).token?yield zE(n,!0):yield zE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},HS.RETRIAL_MIN_WAIT,HS.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Dy(n){return n.expireTimeMillis-Date.now()>0}function eA(n){return{token:kR(PR),error:n}}class LR{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ti(this.app);for(const t of e)iT(this.app,t.next);return Promise.resolve()}}const uA="app-check-internal";!function QR(){(0,st._registerComponent)(new ht.wA("app-check",n=>function VR(n,e){return new LR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uA).initialize()})),(0,st._registerComponent)(new ht.wA(uA,n=>function UR(n){return{getToken:e=>zE(n,e),addTokenListener:e=>function rT(n,e,t,r){const{app:o}=n,u=Ti(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Dy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),JS(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>JS(n))}(n,"INTERNAL",e),removeTokenListener:e=>iT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,st.registerVersion)("@firebase/app-check","0.6.4")}();class uT{constructor(){return(0,Pn.vb)("app-check")}}typeof window<"u"&&window;var lA=P(9260);const dA=new h.OlP("angularfire2.auth.use-emulator"),hA=new h.OlP("angularfire2.auth.settings"),fA=new h.OlP("angularfire2.auth.tenant-id"),pA=new h.OlP("angularfire2.auth.langugage-code"),gA=new h.OlP("angularfire2.auth.use-device-language"),mA=new h.OlP("angularfire.auth.persistence"),yA=(n,e,t,r,o,u,l,m)=>(0,An.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))w.settings[b]=A;return m&&w.setPersistence(m),w},[t,r,o,u,l,m]);let vA=(()=>{class n{constructor(t,r,o,u,l,m,w,b,A,N,$,Q){const pe=new Nh.x,Ne=gt(void 0).pipe((0,FE.Q)(l.outsideAngular),gi(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,9800)))),(0,ft.U)(()=>(0,An.on)(t,u,r)),(0,ft.U)(je=>yA(je,u,m,b,A,N,w,$)),VS({bufferSize:1,refCount:!1}));if(au(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Ne.pipe(Bl()).subscribe();const Ft=Ne.pipe(gi(Gt=>Gt.getRedirectResult().then(zt=>zt,()=>null)),Pn.iC,VS({bufferSize:1,refCount:!1})),$t=Ne.pipe(gi(Gt=>new Lr.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Gt.onAuthStateChanged(sn=>zt.next(sn),sn=>zt.error(sn),()=>zt.complete()))})))),Nt=Ne.pipe(gi(Gt=>new Lr.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Gt.onIdTokenChanged(sn=>zt.next(sn),sn=>zt.error(sn),()=>zt.complete()))}))));this.authState=Ft.pipe(BS($t),(0,HC.R)(l.outsideAngular),(0,FE.Q)(l.insideAngular)),this.user=Ft.pipe(BS(Nt),(0,HC.R)(l.outsideAngular),(0,FE.Q)(l.insideAngular)),this.idToken=this.user.pipe(gi(Gt=>Gt?(0,Xt.D)(Gt.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(gi(Gt=>Gt?(0,Xt.D)(Gt.getIdTokenResult()):gt(null))),this.credential=(0,rR.T)(Ft,pe,this.authState.pipe(q(Gt=>!Gt))).pipe((0,ft.U)(Gt=>Gt?.user?Gt:null),(0,HC.R)(l.outsideAngular),(0,FE.Q)(l.insideAngular))}return(0,An.pX)(this,Ne,u,{spy:{apply:(je,Ft,$t)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&$t.then(Nt=>pe.next(Nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(An.Dh),h.LFG(An.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Pn.HU),h.LFG(dA,8),h.LFG(hA,8),h.LFG(fA,8),h.LFG(pA,8),h.LFG(gA,8),h.LFG(mA,8),h.LFG(uT,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function _A(n,e){return function rN(n,e=Aa.z){return new Lr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function lT(n,e){return _A(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function ZE(n,e){return lT(n,e).pipe(Ks(void 0),Ys(),(0,ft.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=o.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function wA(n,e,t){return ZE(n,t).pipe(D((r,o)=>function sN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function oN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function x(n,e=C.y){return n=n??F,(0,dr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Vn.x)(r,l=>{const m=e(l);(u||!n(o,m))&&(u=!1,o=m,r.next(l))}))})}(),(0,ft.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function dT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function IA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class EA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ks(void 0),Ys(),q(([r,o])=>o.length>0||!r),(0,ft.U)(([r,o])=>o),Pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(D((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IA(e);return wA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(e={}){return lT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Pn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(Pn.iC)}add(e){return this.ref.add(e)}doc(e){return new DA(this.ref.doc(e),this.afs)}}class DA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=TA(r,t);return new EA(o,u,this.afs)}snapshotChanges(){return function iN(n,e){return _A(n,e).pipe(Ks(void 0),Ys(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Xt.D)(this.ref.get(e)).pipe(Pn.iC)}}class aN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZE(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),q(t=>t.length>0),Pn.iC):ZE(this.query,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(D((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IA(e);return wA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(e={}){return lT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Pn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(Pn.iC)}}const bA=new h.OlP("angularfire2.enableFirestorePersistence"),CA=new h.OlP("angularfire2.firestore.persistenceSettings"),uN=new h.OlP("angularfire2.firestore.settings"),cN=new h.OlP("angularfire2.firestore.use-emulator");function TA(n,e=(t=>t)){return{query:e(n),ref:n}}let I0=(()=>{class n{constructor(t,r,o,u,l,m,w,b,A,N,$,Q,pe,Ne,je,Ft,$t){this.schedulers=w;const Nt=(0,An.on)(t,m,r),Gt=A;N&&yA(Nt,m,$,pe,Ne,je,Q,Ft),[this.firestore,this.persistenceEnabled$]=(0,An.cc)(`${Nt.name}.firestore`,"AngularFirestore",Nt.name,()=>{const zt=m.runOutsideAngular(()=>Nt.firestore());if(u&&zt.settings(u),Gt&&zt.useEmulator(...Gt),o&&!au(l)){const sn=()=>{try{return(0,Xt.D)(zt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ls){return typeof console<"u"&&console.warn(ls),gt(!1)}};return[zt,m.runOutsideAngular(sn)]}return[zt,gt(!1)]},[u,Gt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=TA(o,r),m=this.schedulers.ngZone.run(()=>u);return new EA(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new aN(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new DA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(An.Dh),h.LFG(An.xv,8),h.LFG(bA,8),h.LFG(uN,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Pn.HU),h.LFG(CA,8),h.LFG(cN,8),h.LFG(vA,8),h.LFG(dA,8),h.LFG(hA,8),h.LFG(fA,8),h.LFG(pA,8),h.LFG(gA,8),h.LFG(mA,8),h.LFG(uT,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lN=(()=>{class n{constructor(){lA.Z.registerVersion("angularfire",Pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:bA,useValue:!0},{provide:CA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[I0]}),n})();const dN_firebaseConfig={apiKey:"AIzaSyB-Vhb41RrGesgqlrhqP30qxC7yT3B9iIY",authDomain:"angular-blog-app-baa84.firebaseapp.com",projectId:"angular-blog-app-baa84",storageBucket:"angular-blog-app-baa84.appspot.com",messagingSenderId:"970975187918",appId:"1:970975187918:web:96c9c6410e24e5b3a1519f"};class Xa extends Nh.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:hN}=Array,{getPrototypeOf:fN,prototype:pN,keys:gN}=Object;function SA(n){if(1===n.length){const e=n[0];if(hN(e))return{args:e,keys:null};if(function mN(n){return n&&"object"==typeof n&&fN(n)===pN}(e)){const t=gN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:yN}=Array;function AA(n){return(0,ft.U)(e=>function vN(n,e){return yN(e)?n(...e):n(e)}(n,e))}function xA(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var _N=P(9672);function MA(...n){const e=(0,ki.yG)(n),t=(0,ki.jO)(n),{args:r,keys:o}=SA(n);if(0===r.length)return(0,Xt.D)([],e);const u=new Lr.y(function wN(n,e,t=C.y){return r=>{RA(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let w=0;w<o;w++)RA(e,()=>{const b=(0,Xt.D)(n[w],e);let A=!1;b.subscribe((0,Vn.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>xA(o,l):C.y));return t?u.pipe(AA(t)):u}function RA(n,e,t){n?(0,_N.f)(t,n,e):e()}function NA(n){return new Lr.y(e=>{(0,LE.Xf)(n()).subscribe(e)})}var IN=P(9635);function E0(n,e){const t=(0,$C.m)(n)?n:()=>n,r=o=>o.error(t());return new Lr.y(e?o=>e.schedule(r,0,o):r)}var OA=P(727);function hT(){return(0,dr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Vn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class PA extends Lr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,dr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new OA.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Vn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=OA.w0.EMPTY)}return e}refCount(){return hT()(this)}}var us=P(5577);function Up(n,e){return(0,$C.m)(e)?(0,us.z)(n,e,1):(0,us.z)(n,1)}var $i=P(8505);function Ph(n){return(0,dr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Vn.x)(t,void 0,void 0,l=>{u=(0,LE.Xf)(n(l,Ph(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function fT(n){return n<=0?()=>Oh.E:(0,dr.e)((e,t)=>{let r=[];e.subscribe((0,Vn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function kA(n,e){const t=arguments.length>=2;return r=>r.pipe(n?q((o,u)=>n(o,u,r)):C.y,fT(1),t?UE(e):US(()=>new VE))}function pT(n){return(0,dr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const jt="primary",D0=Symbol("RouteTitle");class bN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function by(n){return new bN(n)}function CN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function dc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!FA(n[o],e[o]))return!1;return!0}function FA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function LA(n){return Array.prototype.concat.apply([],n)}function VA(n){return n.length>0?n[n.length-1]:null}function Si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function kh(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Xt.D)(Promise.resolve(n)):gt(n)}const WE=!1,SN={exact:function jA(n,e,t){if(!Bp(n.segments,e.segments)||!KE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!jA(n.children[r],e.children[r],t))return!1;return!0},subset:$A},UA={exact:function AN(n,e){return dc(n,e)},subset:function xN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FA(n[t],e[t]))},ignored:()=>!0};function BA(n,e,t){return SN[t.paths](n.root,e.root,t.matrixParams)&&UA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function $A(n,e,t){return HA(n,e,e.segments,t)}function HA(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Bp(o,t)||e.hasChildren()||!KE(o,t,r))}if(n.segments.length===t.length){if(!Bp(n.segments,t)||!KE(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!$A(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Bp(n.segments,o)&&KE(n.segments,o,r)&&n.children[jt])&&HA(n.children[jt],e,u,r)}}function KE(n,e,t){return e.every((r,o)=>UA[t](n[o].parameters,r.parameters))}class Fh{constructor(e=new Qt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=by(this.queryParams)),this._queryParamMap}toString(){return NN.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Si(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return YE(this)}}class b0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=by(this.parameters)),this._parameterMap}toString(){return qA(this)}}function Bp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let C0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new gT},providedIn:"root"}),n})();class gT{parse(e){const t=new jN(e);return new Fh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${T0(e.root,!0)}`,r=function kN(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${QE(t)}=${QE(o)}`).join("&"):`${QE(t)}=${QE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function ON(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const NN=new gT;function YE(n){return n.segments.map(e=>qA(e)).join("/")}function T0(n,e){if(!n.hasChildren())return YE(n);if(e){const t=n.children[jt]?T0(n.children[jt],!1):"",r=[];return Si(n.children,(o,u)=>{u!==jt&&r.push(`${u}:${T0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function RN(n,e){let t=[];return Si(n.children,(r,o)=>{o===jt&&(t=t.concat(e(r,o)))}),Si(n.children,(r,o)=>{o!==jt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===jt?[T0(n.children[jt],!1)]:[`${o}:${T0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${YE(n)}/${t[0]}`:`${YE(n)}/(${t.join("//")})`}}function GA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function QE(n){return GA(n).replace(/%3B/gi,";")}function mT(n){return GA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function JE(n){return decodeURIComponent(n)}function zA(n){return JE(n.replace(/\+/g,"%20"))}function qA(n){return`${mT(n.path)}${function PN(n){return Object.keys(n).map(e=>`;${mT(e)}=${mT(n[e])}`).join("")}(n.parameters)}`}const FN=/^[^\/()?;=#]+/;function XE(n){const e=n.match(FN);return e?e[0]:""}const LN=/^[^=?&#]+/,UN=/^[^&#]+/;class jN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new Qt(e,t)),r}parseSegment(){const e=XE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,WE);return this.capture(e),new b0(JE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=XE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=XE(this.remaining);o&&(r=o,this.capture(r))}e[JE(t)]=JE(r)}parseQueryParam(e){const t=function VN(n){const e=n.match(LN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function BN(n){const e=n.match(UN);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=zA(t),u=zA(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=XE(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,WE);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=jt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[jt]:new Qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,WE)}}function yT(n){return n.segments.length>0?new Qt([],{[jt]:n}):n}function eD(n){const e={};for(const r of Object.keys(n.children)){const u=eD(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function $N(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function jp(n){return n instanceof Fh}const vT=!1;function HN(n,e,t,r,o){if(0===t.length)return Cy(e.root,e.root,e.root,r,o);const u=function QA(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new YA(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Si(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new YA(t,e,r)}(t);return u.toRoot()?Cy(e.root,e.root,new Qt([],{}),r,o):function l(w){const b=function zN(n,e,t,r){if(n.isAbsolute)return new Ty(e.root,!0,0);if(-1===r)return new Ty(t,t===e.root,0);return function JA(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,vT&&"Invalid number of '../'");o=r.segments.length}return new Ty(r,!1,o-u)}(t,r+(S0(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=b.processChildren?Sy(b.segmentGroup,b.index,u.commands):_T(b.segmentGroup,b.index,u.commands);return Cy(e.root,b.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function S0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function A0(n){return"object"==typeof n&&null!=n&&n.outlets}function Cy(n,e,t,r,o){let l,u={};r&&Si(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:KA(n,e,t);const m=yT(eD(l));return new Fh(m,u,o)}function KA(n,e,t){const r={};return Si(n.children,(o,u)=>{r[u]=o===e?t:KA(o,e,t)}),new Qt(n.segments,r)}class YA{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&S0(r[0]))throw new h.vHH(4003,vT&&"Root segment cannot have matrix parameters");const o=r.find(A0);if(o&&o!==VA(r))throw new h.vHH(4004,vT&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ty{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function _T(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return Sy(n,e,t);const r=function ZN(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(A0(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!ex(w,b,l))return u;r+=2}else{if(!ex(w,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Qt(n.segments.slice(0,r.pathIndex),{});return u.children[jt]=new Qt(n.segments.slice(r.pathIndex),n.children),Sy(u,0,o)}return r.match&&0===o.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?wT(n,e,t):r.match?Sy(n,0,o):wT(n,e,t)}function Sy(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function qN(n){return A0(n[0])?n[0].outlets:{[jt]:n}}(t),o={};return!r[jt]&&n.children[jt]&&1===n.numberOfChildren&&0===n.children[jt].segments.length?Sy(n.children[jt],e,t):(Si(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=_T(n.children[l],e,u))}),Si(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new Qt(n.segments,o))}}function wT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(A0(u)){const w=WN(u.outlets);return new Qt(r,w)}if(0===o&&S0(t[0])){r.push(new b0(n.segments[e].path,XA(t[0]))),o++;continue}const l=A0(u)?u.outlets[jt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&S0(m)?(r.push(new b0(l,XA(m))),o+=2):(r.push(new b0(l,{})),o++)}return new Qt(r,{})}function WN(n){const e={};return Si(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wT(new Qt([],{}),0,t))}),e}function XA(n){const e={};return Si(n,(t,r)=>e[r]=`${t}`),e}function ex(n,e,t){return n==t.path&&dc(e,t.parameters)}const x0="imperative";class hc{constructor(e,t){this.id=e,this.url=t}}class IT extends hc{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $p extends hc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tD extends hc{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nD extends hc{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class ET extends hc{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KN extends hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YN extends hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QN extends hc{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class JN extends hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XN extends hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eO{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tO{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nO{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rO{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iO{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sO{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let uO=(()=>{class n{createUrlTree(t,r,o,u,l,m){return HN(t||r.root,o,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),lO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return uO.\u0275fac(e)},providedIn:"root"}),n})();class nx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=DT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=DT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=bT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return bT(e,this._root).map(t=>t.value)}}function DT(n,e){if(n===e.value)return e;for(const t of e.children){const r=DT(n,t);if(r)return r}return null}function bT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=bT(n,t);if(r.length)return r.unshift(e),r}return[]}class jl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ay(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rx extends nx{constructor(e,t){super(e),this.snapshot=t,CT(this,e)}toString(){return this.snapshot.toString()}}function ix(n,e){const t=function dO(n,e){const l=new rD([],{},{},"",{},jt,e,null,n.root,-1,{});return new ox("",new jl(l,[]))}(n,e),r=new Xa([new b0("",{})]),o=new Xa({}),u=new Xa({}),l=new Xa({}),m=new Xa(""),w=new Lh(r,o,l,m,u,jt,e,t.root);return w.snapshot=t.root,new rx(new jl(w,[]),t)}class Lh{constructor(e,t,r,o,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,ft.U)(b=>b[D0]))??gt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>by(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>by(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function hO(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class rD{get title(){return this.data?.[D0]}constructor(e,t,r,o,u,l,m,w,b,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=by(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=by(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ox extends nx{constructor(e,t){super(t),this.url=e,CT(this,t)}toString(){return ax(this._root)}}function CT(n,e){e.value._routerState=n,e.children.forEach(t=>CT(n,t))}function ax(n){const e=n.children.length>0?` { ${n.children.map(ax).join(", ")} } `:"";return`${n.value}${e}`}function TT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),dc(e.params,t.params)||n.params.next(t.params),function TN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),dc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ST(n,e){const t=dc(n.params,e.params)&&function MN(n,e){return Bp(n,e)&&n.every((t,r)=>dc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ST(n.parent,e.parent))}function M0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function pO(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return M0(n,r,o);return M0(n,r)})}(n,e,t);return new jl(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>M0(n,m)),l}}const r=function gO(n){return new Lh(new Xa(n.url),new Xa(n.params),new Xa(n.queryParams),new Xa(n.fragment),new Xa(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>M0(n,u));return new jl(r,o)}}const AT="ngNavigationCancelingError";function ux(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=jp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=cx(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function cx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[AT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function lx(n){return dx(n)&&jp(n.url)}function dx(n){return n&&n[AT]}class mO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new R0,this.attachRef=null}}let R0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new mO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iD=!1;let xT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=jt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(R0),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,iD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,iD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,iD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,iD);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new yO(t,m,o.injector);if(r&&function vO(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=o.createComponent(b,o.length,w)}else this.activated=o.createComponent(l,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class yO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Lh?this.route:e===R0?this.childContexts:this.parent.get(e,t)}}let MT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[xT],encapsulation:2}),n})();function hx(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function NT(n){const e=n.children&&n.children.map(NT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=MT),t}function aa(n){return n.outlet||jt}function fx(n,e){const t=n.filter(r=>aa(r)===e);return t.push(...n.filter(r=>aa(r)!==e)),t}function N0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class DO{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),TT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Ay(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Si(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ay(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ay(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Ay(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new sO(u.value.snapshot))}),e.children.length&&this.forwardEvent(new rO(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(TT(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),TT(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=N0(o.snapshot),w=m?.get(h._Vd)??null;l.attachRef=null,l.route=o,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class px{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sD{constructor(e,t){this.component=e,this.route=t}}function bO(n,e,t){const r=n._root;return O0(r,e?e._root:null,t,[r.value])}function xy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function O0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ay(e);return n.children.forEach(l=>{(function TO(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function SO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Bp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bp(n.url,e.url)||!dc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ST(n,e)||!dc(n.queryParams,e.queryParams);default:return!ST(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new px(r)):(u.data=l.data,u._resolvedData=l._resolvedData),O0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new sD(m.outlet.component,l))}else l&&P0(e,m,o),o.canActivateChecks.push(new px(r)),O0(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Si(u,(l,m)=>P0(l,t.getContext(m),o)),o}function P0(n,e,t){const r=Ay(n),o=n.value;Si(r,(u,l)=>{P0(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new sD(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function k0(n){return"function"==typeof n}function OT(n){return n instanceof VE||"EmptyError"===n?.name}const oD=Symbol("INITIAL_VALUE");function My(){return gi(n=>MA(n.map(e=>e.pipe(v0(1),Ks(oD)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===oD)return oD;if(!1===t||t instanceof Fh)return t}return!0}),q(e=>e!==oD),v0(1)))}function gx(n){return(0,IN.z)((0,$i.b)(e=>{if(jp(e))throw ux(0,e)}),(0,ft.U)(e=>!0===e))}const PT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mx(n,e,t,r,o){const u=kT(n,e,t);return u.matched?function GO(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?gt(o.map(l=>{const m=xy(l,n);return kh(function OO(n){return n&&k0(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(My(),gx()):gt(!0)}(r=hx(e,r),e,t).pipe((0,ft.U)(l=>!0===l?u:{...PT})):gt(u)}function kT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...PT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||CN)(t,n,e);if(!o)return{...PT};const u={};Si(o.posParams,(m,w)=>{u[w]=m.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function aD(n,e,t,r){if(t.length>0&&function ZO(n,e,t){return t.some(r=>uD(n,e,r)&&aa(r)!==jt)}(n,t,r)){const u=new Qt(e,function qO(n,e,t,r){const o={};o[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&aa(u)!==jt){const l=new Qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[aa(u)]=l}return o}(n,e,r,new Qt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function WO(n,e,t){return t.some(r=>uD(n,e,r))}(n,t,r)){const u=new Qt(n.segments,function zO(n,e,t,r,o){const u={};for(const l of r)if(uD(n,t,l)&&!o[aa(l)]){const m=new Qt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[aa(l)]=m}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new Qt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function uD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function yx(n,e,t,r){return!!(aa(n)===r||r!==jt&&uD(e,t,n))&&("**"===n.path||kT(e,n,t).matched)}function vx(n,e,t){return 0===e.length&&!n.children[t]}const cD=!1;class lD{constructor(e){this.segmentGroup=e||null}}class _x{constructor(e){this.urlTree=e}}function F0(n){return E0(new lD(n))}function wx(n){return E0(new _x(n))}function KO(n){return E0(new h.vHH(4e3,cD&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class JO{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=aD(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,jt).pipe((0,ft.U)(u=>this.createUrlTree(eD(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ph(u=>{if(u instanceof _x)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof lD?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,jt).pipe((0,ft.U)(o=>this.createUrlTree(eD(o),e.queryParams,e.fragment))).pipe(Ph(o=>{throw o instanceof lD?this.noMatchError(o):o}))}noMatchError(e){return new h.vHH(4002,cD&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=yT(e);return new Fh(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(u=>new Qt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Xt.D)(o).pipe(Up(u=>{const l=r.children[u],m=fx(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,ft.U)(w=>({segment:w,outlet:u})))}),D((u,l)=>(u[l.outlet]=l.segment,u),{}),kA())}expandSegment(e,t,r,o,u,l){return(0,Xt.D)(r).pipe(Up(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,l).pipe(Ph(b=>{if(b instanceof lD)return gt(null);throw b}))),Bl(m=>!!m),Ph((m,w)=>{if(OT(m))return vx(t,o,u)?gt(new Qt([],{})):F0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,l,m){return yx(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):F0(t):F0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wx(u):this.lineralizeSegments(r,u).pipe((0,us.z)(l=>{const m=new Qt(l,{});return this.expandSegment(e,m,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:A}=kT(t,o,u);if(!m)return F0(t);const N=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?wx(N):this.lineralizeSegments(o,N).pipe((0,us.z)($=>this.expandSegment(e,t,r,$.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=hx(r,e),r.loadChildren?(r._loadedRoutes?gt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Qt(o,{})))):gt(new Qt(o,{}))):mx(t,r,o,e).pipe(gi(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,us.z)(A=>{const N=A.injector??e,$=A.routes,{segmentGroup:Q,slicedSegments:pe}=aD(t,m,w,$),Ne=new Qt(Q.segments,Q.children);if(0===pe.length&&Ne.hasChildren())return this.expandChildren(N,$,Ne).pipe((0,ft.U)(Nt=>new Qt(m,Nt)));if(0===$.length&&0===pe.length)return gt(new Qt(m,{}));const je=aa(r)===u;return this.expandSegment(N,Ne,$,pe,je?jt:u,!0).pipe((0,ft.U)($t=>new Qt(m.concat($t.segments),$t.children)))})):F0(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function HO(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?gt(!0):gt(o.map(l=>{const m=xy(l,n);return kh(function xO(n){return n&&k0(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(My(),gx())}(e,t,r).pipe((0,us.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,$i.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function YO(n){return E0(cx(cD&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):gt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[jt])return KO(e.redirectTo);o=o.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Fh(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Si(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Si(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,o)}),new Qt(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,cD&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class e1{}class r1{constructor(e,t,r,o,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=aD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jt).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new rD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new jl(r,t),u=new ox(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=sx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,Xt.D)(Object.keys(r.children)).pipe(Up(o=>{const u=r.children[o],l=fx(t,o);return this.processSegmentGroup(e,l,u,o)}),D((o,u)=>o&&u?(o.push(...u),o):null),function EN(n,e=!1){return(0,dr.e)((t,r)=>{let o=0;t.subscribe((0,Vn.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),UE(null),kA(),(0,ft.U)(o=>{if(null===o)return null;const u=Ex(o);return function i1(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,Xt.D)(t).pipe(Up(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),Bl(l=>!!l),Ph(l=>{if(OT(l))return vx(r,o,u)?gt([]):gt(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!yx(t,r,o,u))return gt(null);let l;if("**"===t.path){const m=o.length>0?VA(o).parameters:{},w=bx(r)+o.length;l=gt({snapshot:new rD(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Cx(t),aa(t),t.component??t._loadedComponent??null,t,Dx(r),w,Tx(t)),consumedSegments:[],remainingSegments:[]})}else l=mx(r,t,o,e).pipe((0,ft.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:A})=>{if(!m)return null;const N=bx(r)+w.length;return{snapshot:new rD(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Cx(t),aa(t),t.component??t._loadedComponent??null,t,Dx(r),N,Tx(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(gi(m=>{if(null===m)return gt(null);const{snapshot:w,consumedSegments:b,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function s1(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Q,slicedSegments:pe}=aD(r,b,A,$.filter(je=>void 0===je.redirectTo));if(0===pe.length&&Q.hasChildren())return this.processChildren(N,$,Q).pipe((0,ft.U)(je=>null===je?null:[new jl(w,je)]));if(0===$.length&&0===pe.length)return gt([new jl(w,[])]);const Ne=aa(t)===u;return this.processSegment(N,$,Q,pe,Ne?jt:u).pipe((0,ft.U)(je=>null===je?null:[new jl(w,je)]))}))}}function o1(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ex(n){const e=[],t=new Set;for(const r of n){if(!o1(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Ex(r.children);e.push(new jl(r.value,o))}return e.filter(r=>!t.has(r))}function Dx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bx(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Cx(n){return n.data||{}}function Tx(n){return n.resolve||{}}function Sx(n){return"string"==typeof n.title||null===n.title}function FT(n){return gi(e=>{const t=n(e);return t?(0,Xt.D)(t).pipe((0,ft.U)(()=>e)):gt(e)})}const Ry=new h.OlP("ROUTES");let LT=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=kh(t.loadComponent()).pipe((0,ft.U)(xx),(0,$i.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),pT(()=>{this.componentLoaders.delete(t)})),o=new PA(r,()=>new Nh.x).pipe(hT());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,A=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=LA(w.get(Ry,[],h.XFs.Self|h.XFs.Optional)));return{routes:b.map(NT),injector:w}}),pT(()=>{this.childrenLoaders.delete(r)})),l=new PA(u,()=>new Nh.x).pipe(hT());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return kh(t()).pipe((0,ft.U)(xx),(0,us.z)(o=>o instanceof h.YKP||Array.isArray(o)?gt(o):(0,Xt.D)(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xx(n){return function g1(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let hD=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Nh.x,this.configLoader=(0,h.f3M)(LT),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(C0),this.rootContexts=(0,h.f3M)(R0),this.navigationId=0,this.afterPreactivation=()=>gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new tO(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new eO(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Xa({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:x0,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(q(r=>0!==r.id),(0,ft.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),gi(r=>{let o=!1,u=!1;return gt(r).pipe((0,$i.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gi(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new nD(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Oh.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Mx(l.source)&&(t.browserUrlTree=l.extractedUrl),gt(l).pipe(gi(A=>{const N=this.transitions?.getValue();return this.events.next(new IT(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?Oh.E:Promise.resolve(A)}),function XO(n,e,t,r){return gi(o=>function QO(n,e,t,r,o){return new JO(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,ft.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,$i.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function u1(n,e,t,r,o){return(0,us.z)(u=>function n1(n,e,t,r,o,u,l="emptyOnly"){return new r1(n,e,t,r,o,l,u).recognize().pipe(gi(m=>null===m?function t1(n){return new Lr.y(e=>e.error(n))}(new e1):gt(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,ft.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,$i.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl($,A)}t.browserUrlTree=A.urlAfterRedirects}const N=new KN(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:N,source:$,restoredState:Q,extras:pe}=l,Ne=new IT(A,this.urlSerializer.serialize(N),$,Q);this.events.next(Ne);const je=ix(N,this.rootComponentType).snapshot;return gt(r={...l,targetSnapshot:je,urlAfterRedirects:N,extras:{...pe,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new nD(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Oh.E}}),(0,$i.b)(l=>{const m=new YN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,ft.U)(l=>r={...l,guards:bO(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function kO(n,e){return(0,us.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?gt({...t,guardsResult:!0}):function FO(n,e,t,r){return(0,Xt.D)(n).pipe((0,us.z)(o=>function $O(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(m=>{const w=N0(e)??o,b=xy(m,w);return kh(function NO(n){return n&&k0(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Bl())})).pipe(My()):gt(!0)}(o.component,o.route,t,e,r)),Bl(o=>!0!==o,!0))}(l,r,o,n).pipe((0,us.z)(m=>m&&function AO(n){return"boolean"==typeof n}(m)?function LO(n,e,t,r){return(0,Xt.D)(e).pipe(Up(o=>_i(function UO(n,e){return null!==n&&e&&e(new nO(n)),gt(!0)}(o.route.parent,r),function VO(n,e){return null!==n&&e&&e(new iO(n)),gt(!0)}(o.route,r),function jO(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function CO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>NA(()=>gt(l.guards.map(w=>{const b=N0(l.node)??t,A=xy(w,b);return kh(function RO(n){return n&&k0(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Bl())})).pipe(My())));return gt(u).pipe(My())}(n,o.path,t),function BO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const o=r.map(u=>NA(()=>{const l=N0(e)??t,m=xy(u,l);return kh(function MO(n){return n&&k0(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Bl())}));return gt(o).pipe(My())}(n,o.route,t))),Bl(o=>!0!==o,!0))}(r,u,n,e):gt(m)),(0,ft.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,$i.b)(l=>{if(r.guardsResult=l.guardsResult,jp(l.guardsResult))throw ux(0,l.guardsResult);const m=new QN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),q(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),FT(l=>{if(l.guards.canActivateChecks.length)return gt(l).pipe((0,$i.b)(m=>{const w=new JN(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),gi(m=>{let w=!1;return gt(m).pipe(function c1(n,e){return(0,us.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return gt(t);let u=0;return(0,Xt.D)(o).pipe(Up(l=>function l1(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Sx(o)&&(u[D0]=o.title),function d1(n,e,t,r){const o=function h1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return gt({});const u={};return(0,Xt.D)(o).pipe((0,us.z)(l=>function f1(n,e,t,r){const o=N0(e)??r,u=xy(n,o);return kh(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Bl(),(0,$i.b)(m=>{u[l]=m}))),fT(1),function DN(n){return(0,ft.U)(()=>n)}(u),Ph(l=>OT(l)?Oh.E:E0(l)))}(u,n,e,r).pipe((0,ft.U)(l=>(n._resolvedData=l,n.data=sx(n,t).resolve,o&&Sx(o)&&(n.data[D0]=o.title),null)))}(l.route,r,n,e)),(0,$i.b)(()=>u++),fT(1),(0,us.z)(l=>u===o.length?gt(t):Oh.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,$i.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,$i.b)(m=>{const w=new XN(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),FT(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,$i.b)(A=>{w.component=A}),(0,ft.U)(()=>{})));for(const A of w.children)b.push(...m(A));return b};return MA(m(l.targetSnapshot.root)).pipe(UE(),v0(1))}),FT(()=>this.afterPreactivation()),(0,ft.U)(l=>{const m=function fO(n,e,t){const r=M0(n,e._root,t?t._root:void 0);return new rx(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,$i.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new DO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,$i.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new $p(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),pT(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ph(l=>{if(u=!0,dx(l)){lx(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new tD(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),lx(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Mx(r.source)};t.scheduleNavigation(w,x0,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new ET(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Oh.E}))}))}cancelNavigationTransition(t,r,o){const u=new tD(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mx(n){return n!==x0}let Rx=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===jt);return r}getResolvedTitleForRoute(t){return t.data[D0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(m1)},providedIn:"root"}),n})(),m1=(()=>{class n extends Rx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Oo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(_1)},providedIn:"root"}),n})();class v1{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let _1=(()=>{class n extends v1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fD=new h.OlP("",{providedIn:"root",factory:()=>({})});let I1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(E1)},providedIn:"root"}),n})(),E1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function D1(n){throw n}function b1(n,e,t){return e.parse("/")}const C1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},T1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(fD,{optional:!0})||{},this.errorHandler=this.options.errorHandler||D1,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||b1,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(I1),this.routeReuseStrategy=(0,h.f3M)(y1),this.urlCreationStrategy=(0,h.f3M)(lO),this.titleStrategy=(0,h.f3M)(Rx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=LA((0,h.f3M)(Ry,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(hD),this.urlSerializer=(0,h.f3M)(C0),this.location=(0,h.f3M)(Pe),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ix(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),x0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const w={...o};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(NT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=jp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,x0,null,r)}navigate(t,r={skipLocationChange:!1}){return function S1(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...C1}:!1===r?{...T1}:r,jp(t))return BA(this.currentUrlTree,t,o);const u=this.parseUrl(t);return BA(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,A;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((N,$)=>{m=N,w=$}),A="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fc=(()=>{class n{constructor(t,r,o,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Nh.x;const w=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof $p&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lo),h.Y36(Lh),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(lt))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class Nx{}let M1=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(q(t=>t instanceof $p),Up(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Xt.D)(o).pipe((0,vi.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gt(null);const u=o.pipe((0,us.z)(l=>null===l?gt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Xt.D)([u,l]).pipe((0,vi.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lo),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Nx),h.LFG(LT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UT=new h.OlP("");let Ox=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof IT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $p&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof tx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new tx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var ho=(()=>((ho=ho||{})[ho.COMPLETE=0]="COMPLETE",ho[ho.FAILED=1]="FAILED",ho[ho.REDIRECTING=2]="REDIRECTING",ho))();const Ny=!1;function Vh(n,e){return{\u0275kind:n,\u0275providers:e}}const BT=new h.OlP("",{providedIn:"root",factory:()=>!1});function kx(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(lo),o=n.get(Fx);1===n.get(jT)&&r.initialNavigation(),n.get(Lx,null,h.XFs.Optional)?.setUpPreloading(),n.get(UT,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const Fx=new h.OlP(Ny?"bootstrap done indicator":"",{factory:()=>new Nh.x}),jT=new h.OlP(Ny?"initial navigation":"",{providedIn:"root",factory:()=>1});function k1(){let n=[];return n=Ny?[{provide:h.Xts,multi:!0,useFactory:()=>{const e=(0,h.f3M)(lo);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function oO(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Vh(1,n)}const Lx=new h.OlP(Ny?"router preloader":"");function F1(n){return Vh(0,[{provide:Lx,useExisting:M1},{provide:Nx,useExisting:n}])}const L0=!1,Vx=new h.OlP(L0?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),L1=[Pe,{provide:C0,useClass:gT},lo,R0,{provide:Lh,useFactory:function Px(n){return n.routerState.root},deps:[lo]},LT,L0?{provide:BT,useValue:!0}:[]];function V1(){return new h.PXZ("Router",lo)}let Ux=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[L1,L0&&r?.enableTracing?k1().\u0275providers:[],{provide:Ry,multi:!0,useValue:t},{provide:Vx,useFactory:$1,deps:[[lo,new h.FiY,new h.tp0]]},{provide:fD,useValue:r||{}},r?.useHash?{provide:lt,useClass:Ee}:{provide:lt,useClass:Ie},{provide:UT,useFactory:()=>{const n=(0,h.f3M)(js),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(fD),r=(0,h.f3M)(hD),o=(0,h.f3M)(C0);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ox(o,r,n,e,t)}},r?.preloadingStrategy?F1(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:V1},r?.initialNavigation?H1(r):[],[{provide:Bx,useFactory:kx},{provide:h.tb,multi:!0,useExisting:Bx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ry,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vx,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[MT]}),n})();function $1(n){if(L0&&n)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function H1(n){return["disabled"===n.initialNavigation?Vh(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(lo);return()=>{e.setUpLocationChangeListener()}}},{provide:jT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Vh(2,[{provide:jT,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(ae,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(lo),u=e.get(Fx);(function R1(n,e){n.events.pipe(q(t=>t instanceof $p||t instanceof tD||t instanceof ET||t instanceof nD),(0,ft.U)(t=>t instanceof $p||t instanceof nD?ho.COMPLETE:t instanceof tD&&(0===t.code||1===t.code)?ho.REDIRECTING:ho.FAILED),q(t=>t!==ho.REDIRECTING),v0(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(hD).afterPreactivation=()=>(r(!0),u.closed?gt(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const Bx=new h.OlP(L0?"Router Initializer":"");let $T=(()=>{class n{constructor(t){this.afs=t}loadFeatured(){return this.afs.collection("posts",t=>t.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe((0,ft.U)(t=>t.map(r=>{let o=r.payload.doc.data();return{id:r.payload.doc.id,data:o}})))}loadLatest(){return this.afs.collection("posts",t=>t.orderBy("createdAt")).snapshotChanges().pipe((0,ft.U)(t=>t.map(r=>{let o=r.payload.doc.data();return{id:r.payload.doc.id,data:o}})))}loadCategoryPosts(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe((0,ft.U)(r=>r.map(o=>{let u=o.payload.doc.data();return{id:o.payload.doc.id,data:u}})))}loadOnePost(t){return this.afs.doc(`posts/${t}`).valueChanges()}loadSimilar(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe((0,ft.U)(r=>r.map(o=>{let u=o.payload.doc.data();return{id:o.payload.doc.id,data:u}})))}countViews(t){const r={views:lA.Z.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${t}`).update(r).then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z1(n,e){1&n&&(h.TgZ(0,"small",9),h._uU(1," Featured "),h.qZA())}const q1=function(n){return["/post",n]};function Z1(n,e){if(1&n&&(h.TgZ(0,"div",1),h._UZ(1,"img",2),h.TgZ(2,"div",3)(3,"small",4),h._uU(4),h.qZA(),h.YNc(5,z1,2,0,"small",5),h.TgZ(6,"small",6),h._uU(7),h.qZA(),h.TgZ(8,"h5",7),h._uU(9),h.qZA(),h.TgZ(10,"p"),h._uU(11),h.qZA(),h.TgZ(12,"small",8),h._uU(13),h.ALo(14,"date"),h.qZA()()()),2&n){const t=h.oxw();h.Q6J("routerLink",h.VKq(10,q1,t.postData.id)),h.xp6(1),h.s9C("src",t.postData.data.postImgPath,h.LSH),h.xp6(3),h.hij(" ",t.postData.data.category.category," "),h.xp6(1),h.Q6J("ngIf",t.postData.data.isFeatured),h.xp6(2),h.hij(" ",t.postData.data.views," "),h.xp6(2),h.Oqu(t.postData.data.title),h.xp6(2),h.hij(" ",t.postData.data.excerpt," "),h.xp6(2),h.hij("last Updated - ",h.lcZ(14,8,t.postData.data.createdAt.toMillis()),"")}}let HT=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",3,"routerLink"],["alt","Postcard",1,"card-img-top",2,"height","300px",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center","style","margin-left: 5px",4,"ngIf"],[1,"bg-light","text-info","text-center",2,"margin-left","5px"],[1,"mt-1"],[1,"bg-light","text-warning","text-center","ml-3"],[1,"bg-light","text-success","text-center",2,"margin-left","5px"]],template:function(t,r){1&t&&h.YNc(0,Z1,15,12,"div",0),2&t&&h.Q6J("ngIf",r.postData)},dependencies:[zi,fc,ps],styles:[".card[_ngcontent-%COMP%]{min-height:500px;max-width:400px}"]}),n})();function W1(n,e){if(1&n&&(h.TgZ(0,"div",9),h._UZ(1,"app-post-card",10),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}function K1(n,e){if(1&n&&(h.TgZ(0,"div",11),h._UZ(1,"app-post-card",10),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}let Y1=(()=>{class n{constructor(t){this.postService=t}ngOnInit(){this.postService.loadFeatured().subscribe(t=>{this.featuredPostsArray=t}),this.postService.loadLatest().subscribe(t=>{this.latestPostArray=t})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($T))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),h._uU(5,"Featured Posts"),h.qZA(),h.TgZ(6,"p",4),h._uU(7," Discover the cream of our blog's content in the 'Featured Posts' section, where we showcase our most engaging and diverse articles. "),h.qZA()()(),h.TgZ(8,"div",2),h.YNc(9,W1,2,1,"div",5),h.qZA()()(),h.TgZ(10,"section",6)(11,"div",7)(12,"h2"),h._uU(13,"Latest Posts"),h.qZA(),h.TgZ(14,"p"),h._uU(15," Explore fresh articles, insights, and stories that cover a wide array of topics. Be the first to dive into our latest ideas and discoveries, and stay engaged with our ever-evolving world of blogging. "),h.qZA()(),h.TgZ(16,"div",2),h.YNc(17,K1,2,1,"div",8),h.qZA()()),2&t&&(h.xp6(9),h.Q6J("ngForOf",r.featuredPostsArray),h.xp6(8),h.Q6J("ngForOf",r.latestPostArray))},dependencies:[pn,HT],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}"]}),n})();function Q1(n,e){if(1&n&&(h.TgZ(0,"div",5),h._UZ(1,"app-post-card",6),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}let J1=(()=>{class n{constructor(t,r){this.route=t,this.postService=r}ngOnInit(){this.route.params.subscribe(t=>{this.categoryObj=t,this.postService.loadCategoryPosts(t.id).subscribe(r=>{this.postsArray=r})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lh),h.Y36($T))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-single-category"]],decls:9,vars:2,consts:[[1,"bg-theme","p-5","text-white"],[1,"container"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h1"),h._uU(3),h.qZA(),h.TgZ(4,"p"),h._uU(5," A handpicked selection of articles that cater to your unique passions. It's your gateway to a customized, enriching experience within our diverse world of content. "),h.qZA()()(),h.TgZ(6,"div",2)(7,"div",3),h.YNc(8,Q1,2,1,"div",4),h.qZA()()),2&t&&(h.xp6(3),h.Oqu(r.categoryObj.category),h.xp6(5),h.Q6J("ngForOf",r.postsArray))},dependencies:[pn,HT]}),n})(),jx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Hp=(()=>{class n extends jx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const pc=new h.OlP("NgValueAccessor"),tP={provide:pc,useExisting:(0,h.Gpc)(()=>pD),multi:!0},rP=new h.OlP("CompositionEventMode");let pD=(()=>{class n extends jx{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nP(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(rP,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([tP]),h.qOj]}),n})();const iP=!1;function Uh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Hi=new h.OlP("NgValidators"),Bh=new h.OlP("NgAsyncValidators"),sP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function qx(n){return Uh(n.value)?{required:!0}:null}function Wx(n){return Uh(n.value)||sP.test(n.value)?null:{email:!0}}function gD(n){return null}function Jx(n){return null!=n}function Xx(n){const e=(0,h.QGY)(n)?(0,Xt.D)(n):n;if(iP&&!(0,h.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,t)}return e}function eM(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function tM(n,e){return e.map(t=>t(n))}function nM(n){return n.map(e=>function oP(n){return!n.validate}(e)?e:t=>e.validate(t))}function GT(n){return null!=n?function rM(n){if(!n)return null;const e=n.filter(Jx);return 0==e.length?null:function(t){return eM(tM(t,e))}}(nM(n)):null}function zT(n){return null!=n?function iM(n){if(!n)return null;const e=n.filter(Jx);return 0==e.length?null:function(t){return function X1(...n){const e=(0,ki.jO)(n),{args:t,keys:r}=SA(n),o=new Lr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let A=0;A<l;A++){let N=!1;(0,LE.Xf)(t[A]).subscribe((0,Vn.x)(u,$=>{N||(N=!0,b--),m[A]=$},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?xA(r,m):m),u.complete())}))}});return e?o.pipe(AA(e)):o}(tM(t,e).map(Xx)).pipe((0,ft.U)(eM))}}(nM(n)):null}function sM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qT(n){return n?Array.isArray(n)?n:[n]:[]}function mD(n,e){return Array.isArray(n)?n.includes(e):n===e}function uM(n,e){const t=qT(e);return qT(n).forEach(o=>{mD(t,o)||t.push(o)}),t}function cM(n,e){return qT(e).filter(t=>!mD(n,t))}class lM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class cs extends lM{get formDirective(){return null}get path(){return null}}class jh extends lM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class dM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hM=(()=>{class n extends dM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(jh,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),ZT=(()=>{class n extends dM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cs,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();function fM(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const YT=!1,V0="VALID",vD="INVALID",Oy="PENDING",U0="DISABLED";function QT(n){return(_D(n)?n.validators:n)||null}function JT(n,e){return(_D(e)?e.asyncValidators:n)||null}function _D(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class mM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===V0}get invalid(){return this.status===vD}get pending(){return this.status==Oy}get disabled(){return this.status===U0}get enabled(){return this.status!==U0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cM(e,this._rawAsyncValidators))}hasValidator(e){return mD(this._rawValidators,e)}hasAsyncValidator(e){return mD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=U0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=V0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===V0||this.status===Oy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?U0:V0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oy,this._hasOwnPendingAsyncValidator=!0;const t=Xx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?U0:this.errors?vD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oy)?Oy:this._anyControlsHaveStatus(vD)?vD:V0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_D(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function fP(n){return Array.isArray(n)?GT(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function pP(n){return Array.isArray(n)?zT(n):n||null}(this._rawAsyncValidators)}}class XT extends mM{constructor(e,t,r){super(QT(t),JT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function gM(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,YT?function hP(n,e){return`Must supply a value for form control ${fM(n,e)}`}(e,o):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function pM(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,YT?function lP(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new h.vHH(1001,YT?function dP(n,e){return`Cannot find form control ${fM(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Py=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>wD}),wD="always";function B0(n,e,t=wD){eS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function yP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yM(n,e)})}(n,e),function _P(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function vP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function mP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function DD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function eS(n,e){const t=function oM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(sM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function aM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(sM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();DD(e._rawValidators,o),DD(e._rawAsyncValidators,o)}function yM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const bP={provide:cs,useExisting:(0,h.Gpc)(()=>$0)},j0=(()=>Promise.resolve())();let $0=(()=>{class n extends cs{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new XT({},GT(t),zT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){j0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),B0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){j0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){j0.then(()=>{const r=this._findContainer(t.path),o=new XT({});(function vM(n,e){eS(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){j0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){j0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function _M(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Hi,10),h.Y36(Bh,10),h.Y36(Py,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([bP]),h.qOj]}),n})();function wM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function IM(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const EM=class extends mM{constructor(e=null,t,r){super(QT(t),JT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_D(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=IM(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){IM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},SP={provide:jh,useExisting:(0,h.Gpc)(()=>iS)},CM=(()=>Promise.resolve())();let iS=(()=>{class n extends jh{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new EM,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function rS(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===pD?t=u:function EP(n){return Object.getPrototypeOf(n.constructor)===Hp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function nS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){B0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){CM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.D6c)(r);CM.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ID(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cs,9),h.Y36(Hi,10),h.Y36(Bh,10),h.Y36(pc,10),h.Y36(h.sBO,8),h.Y36(Py,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([SP]),h.qOj,h.TTD]}),n})(),sS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),SM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Gp=(()=>{class n{constructor(){this._validator=gD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const zP={provide:Hi,useExisting:(0,h.Gpc)(()=>CD),multi:!0};let CD=(()=>{class n extends Gp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>qx}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([zP]),h.qOj]}),n})();const ZP={provide:Hi,useExisting:(0,h.Gpc)(()=>dS),multi:!0};let dS=(()=>{class n extends Gp{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=h.D6c,this.createValidator=t=>Wx}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[h._Bn([ZP]),h.qOj]}),n})(),QP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[SM]}),n})(),XP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Py,useValue:t.callSetDisabledState??wD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[QP]}),n})(),ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-comment-form"]],decls:18,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body","m-2"],[1,"form-group"],["for","",1,"mb-2",2,"font-weight","bolder"],["type","text","placeholder","Enter Your Name",1,"form-control","shadow-effect"],["for","",1,"mb-2","mt-2",2,"font-weight","bolder"],["cols","30","rows","10","placeholder","Add your comment here",1,"form-control","shadow-effect"],[1,"btn","btn-info","mt-2","btn-theme",2,"background-color","var(--primary-color)","color","white","font-size","small"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h4"),h._uU(3,"Leave a Comment"),h.qZA(),h.TgZ(4,"p"),h._uU(5,"You can leave a comment below"),h.qZA(),h.TgZ(6,"form")(7,"div",2)(8,"label",3),h._uU(9,"Name"),h.qZA(),h._UZ(10,"input",4),h.qZA(),h.TgZ(11,"div",2)(12,"label",5),h._uU(13,"Comment"),h.qZA(),h.TgZ(14,"textarea",6),h._uU(15,"        "),h.qZA()(),h.TgZ(16,"button",7),h._uU(17," Add Comment "),h.qZA()()()())},dependencies:[sS,ZT,$0]}),n})(),tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-comment-list"]],decls:40,vars:0,consts:[[1,"card","mb-5","mt-5","pb-5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-3"],[1,"comment-box","mt-3"],[1,"mb-0"],[1,"text-danger"],["href","#",1,"mt-1",2,"text-decoration","none","margin-top","1px"],["href","#",1,"mt-1","ml-3",2,"text-decoration","none","margin-top","1px","margin-left","10px"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),h._uU(3,"Comments (15,256)"),h.qZA(),h.TgZ(4,"div",3)(5,"h6",4),h._uU(6,"John Doe"),h.qZA(),h.TgZ(7,"small",5),h._uU(8,"Last Updated - Date"),h.qZA(),h.TgZ(9,"div",2),h._uU(10," Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora saepe placeat reprehenderit amet odit quod modi doloremque, incidunt ut sapiente! "),h.qZA(),h.TgZ(11,"a",6),h._uU(12," Reply "),h.qZA(),h.TgZ(13,"a",7),h._uU(14," View Reply "),h.qZA(),h._UZ(15,"hr"),h.qZA(),h.TgZ(16,"div",3)(17,"h6",4),h._uU(18,"John Doe"),h.qZA(),h.TgZ(19,"small",5),h._uU(20,"Last Updated - Date"),h.qZA(),h.TgZ(21,"div",2),h._uU(22," Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora saepe placeat reprehenderit amet odit quod modi doloremque, incidunt ut sapiente! "),h.qZA(),h.TgZ(23,"a",6),h._uU(24," Reply "),h.qZA(),h.TgZ(25,"a",7),h._uU(26," View Reply "),h.qZA(),h._UZ(27,"hr"),h.qZA(),h.TgZ(28,"div",3)(29,"h6",4),h._uU(30,"John Doe"),h.qZA(),h.TgZ(31,"small",5),h._uU(32,"Last Updated - Date"),h.qZA(),h.TgZ(33,"div",2),h._uU(34," Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora saepe placeat reprehenderit amet odit quod modi doloremque, incidunt ut sapiente! "),h.qZA(),h.TgZ(35,"a",6),h._uU(36," Reply "),h.qZA(),h.TgZ(37,"a",7),h._uU(38," View Reply "),h.qZA(),h._UZ(39,"hr"),h.qZA()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}"]}),n})();function nk(n,e){1&n&&(h.TgZ(0,"small",14),h._uU(1,"Featured"),h.qZA())}function rk(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"app-post-card",15),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}const ik=[{path:"",component:Y1},{path:"category/:category/:id",component:J1},{path:"post/:id",component:(()=>{class n{constructor(t,r){this.route=t,this.postService=r}ngOnInit(){this.route.params.subscribe(t=>{this.postService.countViews(t.id),this.postService.loadOnePost(t.id).subscribe(r=>{this.postData=r,this.loadSimilarPost(this.postData.category.categoryId)})})}loadSimilarPost(t){this.postService.loadSimilar(t).subscribe(r=>{this.similarPostArray=r})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lh),h.Y36($T))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-single-post"]],decls:21,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],[1,"card","mt-5","mb-5","shadow-effect"],[1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ml-2","style","margin-left: 8px",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-2",2,"margin-left","8px"],[1,"bg-light","text-warning","text-center","ml-2",2,"margin-left","8px"],[1,"mt-3","mb-3"],[3,"innerHTML"],[1,"col-md-3","mt-5"],[4,"ngFor","ngForOf"],[1,"bg-light","text-success","text-center","ml-2",2,"margin-left","8px"],[3,"postData"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h._UZ(4,"img",4),h.TgZ(5,"div",5)(6,"small",6),h._uU(7),h.qZA(),h.YNc(8,nk,2,0,"small",7),h.TgZ(9,"small",8),h._uU(10),h.qZA(),h.TgZ(11,"small",9),h._uU(12),h.ALo(13,"date"),h.qZA(),h.TgZ(14,"h1",10),h._uU(15),h.qZA(),h._UZ(16,"p",11),h.qZA()(),h._UZ(17,"app-comment-form")(18,"app-comment-list"),h.qZA(),h.TgZ(19,"div",12),h.YNc(20,rk,2,1,"div",13),h.qZA()()()),2&t&&(h.xp6(4),h.s9C("src",r.postData.postImgPath,h.LSH),h.xp6(3),h.Oqu(r.postData.category.category),h.xp6(1),h.Q6J("ngIf",r.postData.isFeatured),h.xp6(2),h.hij("Views-",r.postData.views,""),h.xp6(2),h.hij("Last Updated - ",h.lcZ(13,8,r.postData.createdAt.toMillis()),""),h.xp6(3),h.Oqu(r.postData.title),h.xp6(1),h.Q6J("innerHTML",r.postData.content,h.oJD),h.xp6(4),h.Q6J("ngForOf",r.similarPostArray))},dependencies:[pn,zi,ek,tk,HT,ps]}),n})()},{path:"about",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-about"]],decls:37,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],["href","https://www.linkedin.com/in/anirudhgupta25/","target","_blank"],["src","/assets/linkedin-icon.jpg","alt","LinkedIn","width","50","height","50"],["routerLink","",1,"text-center"],[1,"btn","btn-danger","btn-sm","mt-4","btn-theme"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3,"About Us"),h.qZA(),h.TgZ(4,"div",3)(5,"section")(6,"h2"),h._uU(7,"Our Story"),h.qZA(),h.TgZ(8,"h5")(9,"p"),h._uU(10,' At "blogApp," our mission is simple: to create an exceptional reading experience for you. We are your ultimate reading companion, designed to elevate the way you engage with content. '),h.qZA()(),h.TgZ(11,"h3"),h._uU(12,"Who are we?"),h.qZA(),h.TgZ(13,"h5")(14,"p"),h._uU(15," \"blogApp\" is a dynamic reading platform that seamlessly integrates Angular's powerful navigation and Bootstrap's elegant design. This fusion of technology ensures that your reading experience is not just enjoyable, but also captivating and hassle-free. "),h.qZA(),h.TgZ(16,"p"),h._uU(17," We're dedicated to making your reading journey as smooth and immersive as possible. With content powered by Firebase, we offer an extensive library of articles and stories, carefully curated for your reading pleasure. "),h.qZA()()(),h.TgZ(18,"section")(19,"h2"),h._uU(20,"Our Purpose : Empower Stories"),h.qZA(),h.TgZ(21,"h5")(22,"p"),h._uU(23," Whether you're here to discover new knowledge, stay updated with the latest trends, or simply enjoy a good story, \"blogApp\" is here to cater to your interests. We've optimized our platform for speed, reliability, and security to ensure that your reading journey is everything you want it to be. "),h.qZA(),h.TgZ(24,"p"),h._uU(25,' At "blogApp," we understand the value of reading. That\'s why we provide a user-friendly, responsive environment where you can explore and engage with a rich selection of articles across diverse topics. '),h.qZA(),h.TgZ(26,"p"),h._uU(27," Thank you for being a part of our story. We look forward to being a part of yours. "),h.qZA()(),h.TgZ(28,"h5")(29,"p")(30,"b"),h._uU(31,"Connect with me on LinkedIn : "),h.qZA(),h.TgZ(32,"a",4),h._UZ(33,"img",5),h.qZA()()()(),h.TgZ(34,"div",6)(35,"button",7),h._uU(36," Back to Home "),h.qZA()()()()())},dependencies:[fc]}),n})()},{path:"contact",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-contact-us"]],decls:15,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],["href","mailto:anirudh25.g@gmail.com"],["src","src\\assets\\email_logo.jpg","alt","Email","width","50","height","50"],["routerLink","",1,"text-center"],[1,"btn","btn-danger","btn-sm","mt-4","btn-theme"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3,"Contact Us"),h.qZA(),h.TgZ(4,"div",3)(5,"section")(6,"h2"),h._uU(7,"Contact Information"),h.qZA(),h.TgZ(8,"p"),h._uU(9," Have questions or feedback? Feel free to reach out to us at: "),h.TgZ(10,"a",4),h._UZ(11,"img",5),h.qZA()()(),h.TgZ(12,"div",6)(13,"button",7),h._uU(14," Back to Home "),h.qZA()()()()())},dependencies:[fc]}),n})()},{path:"term-conditions",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-terms-and-conditions"]],decls:28,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],["routerLink","",1,"text-center"],[1,"btn","btn-danger","btn-sm","mt-4","btn-theme"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3,"Terms & Conditions"),h.qZA(),h.TgZ(4,"div",3)(5,"section")(6,"h5"),h._uU(7,"1. Acceptance of Terms :"),h.qZA(),h.TgZ(8,"h6"),h._uU(9," By accessing and using this website, you agree to comply with and be bound by these terms and conditions. "),h.qZA()(),h.TgZ(10,"section")(11,"h5"),h._uU(12,"2. Content Usage :"),h.qZA(),h.TgZ(13,"h6"),h._uU(14,' All content, articles, and stories on "blogApp" are for informational and entertainment purposes. The content provided does not constitute professional advice, and we are not responsible for actions taken based on the information presented. '),h.qZA()(),h.TgZ(15,"section")(16,"h5"),h._uU(17,"3. Changes to Terms :"),h.qZA(),h.TgZ(18,"h6"),h._uU(19,' "blogApp" reserves the right to modify these terms and conditions at any time. Users are encouraged to review them periodically. Continued use of the platform implies acceptance of any updates. '),h.qZA()(),h.TgZ(20,"section")(21,"h5"),h._uU(22,"4. Liability :"),h.qZA(),h.TgZ(23,"h6"),h._uU(24,' "blogApp" is not liable for any damages, direct or indirect, arising from the use of the platform. Users access the platform at their own risk. '),h.qZA()(),h.TgZ(25,"div",4)(26,"button",5),h._uU(27," Back to Home "),h.qZA()()()()())},dependencies:[fc]}),n})()}];let sk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ux.forRoot(ik),Ux]}),n})(),ok=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center","container2"],["routerLink","/",1,"site-logo"],["src","assets\\blogApp-logos.jpeg","alt","blogApp Logo","width","250","height","60",1,"blapplogo"]],template:function(t,r){1&t&&(h.TgZ(0,"header",0)(1,"div",1)(2,"a",2),h._UZ(3,"img",3),h.qZA()()())},dependencies:[fc],styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{padding:5px 20px;border-radius:20px;background-color:var(--secondary-color);color:var(--primary-color);font-size:1.5em}"]}),n})(),ak=(()=>{class n{constructor(t){this.afs=t}loadData(){return this.afs.collection("categories").snapshotChanges().pipe((0,ft.U)(t=>t.map(r=>{let o=r.payload.doc.data();return{id:r.payload.doc.id,data:o}})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uk=function(n,e){return["/category",n,e]};function ck(n,e){if(1&n&&(h.TgZ(0,"ul",4)(1,"li",5)(2,"a",6),h._uU(3),h.qZA()()()),2&n){const t=e.$implicit,r=e.index,o=h.oxw();h.xp6(2),h.Q6J("routerLink",h.WLB(2,uk,t.data.category,t.id)),h.xp6(1),h.Oqu(o.categoryArray[r].data.category)}}let lk=(()=>{class n{constructor(t){this.categoryService=t}ngOnInit(){this.categoryService.loadData().subscribe(t=>{this.categoryArray=t})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ak))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-category-navbar"]],decls:4,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item","ml-3"],["href","",1,"nav-link",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"div",2),h.YNc(3,ck,4,5,"ul",3),h.qZA()()()),2&t&&(h.xp6(3),h.Q6J("ngForOf",r.categoryArray))},dependencies:[pn,fc],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--primary-color)}"]}),n})(),dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-footer"]],decls:20,vars:0,consts:[[1,"row"],[1,"col-md-12","text-center"],["src","assets\\blogApp-logos.jpeg","alt","blogApp Logo","width","100","height","30",1,"blapplogo2"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","",1,"nav-link"],["href","","routerLink","about",1,"nav-link"],["href","","routerLink","term-conditions",1,"nav-link"],["href","","routerLink","contact",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(t,r){1&t&&(h.TgZ(0,"footer")(1,"div",0)(2,"div",1),h._UZ(3,"img",2),h.TgZ(4,"div")(5,"ul",3)(6,"li",4)(7,"a",5),h._uU(8,"Home"),h.qZA()(),h.TgZ(9,"li",4)(10,"a",6),h._uU(11,"About"),h.qZA()(),h.TgZ(12,"li",4)(13,"a",7),h._uU(14,"Terms & Conditions"),h.qZA()(),h.TgZ(15,"li",4)(16,"a",8),h._uU(17,"Contact"),h.qZA()()()(),h.TgZ(18,"p",9),h._uU(19,"Copyright \xa9 2023 blogApp"),h.qZA()()()())},dependencies:[fc],styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]}),n})(),hk=(()=>{class n{constructor(t){this.afs=t}addSubs(t){this.afs.collection("subscribers").add(t).then(()=>{console.log("Subscriber saved successfully")})}checkSubs(t){return this.afs.collection("subscribers",r=>r.where("email","==","subEmail")).get()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fk(n,e){1&n&&(h.TgZ(0,"div",8),h._uU(1," Email is already in use ! "),h.qZA())}function pk(n,e){1&n&&(h.TgZ(0,"div",9),h._uU(1," Thank you for subscribing to our newsletter service. Stay tuned more awesome content...! "),h.qZA())}function gk(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Name is Required"),h.qZA())}function mk(n,e){if(1&n&&(h.TgZ(0,"div",20),h.YNc(1,gk,2,0,"div",21),h.qZA()),2&n){h.oxw();const t=h.MAs(4);h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function yk(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Email is Required"),h.qZA())}function vk(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Valid email is required"),h.qZA())}function _k(n,e){if(1&n&&(h.TgZ(0,"div",20),h.YNc(1,yk,2,0,"div",21),h.YNc(2,vk,2,0,"div",21),h.qZA()),2&n){h.oxw();const t=h.MAs(8);h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.email)}}const GM=function(n){return{"is-invalid":n}};function wk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"form",10,11),h.NdJ("ngSubmit",function(){h.CHM(t);const o=h.MAs(1),u=h.oxw();return h.KtG(u.onSubmit(o.value))}),h.TgZ(2,"div",12),h._UZ(3,"input",13,14),h.YNc(5,mk,2,1,"div",15),h.qZA(),h.TgZ(6,"div",12),h._UZ(7,"input",16,17),h.YNc(9,_k,3,2,"div",15),h.qZA(),h.TgZ(10,"div",18)(11,"button",19),h._uU(12," SUBSCRIBE "),h.qZA()()()}if(2&n){const t=h.MAs(1),r=h.MAs(4),o=h.MAs(8);h.xp6(3),h.Q6J("ngClass",h.VKq(5,GM,r.touched&&r.invalid)),h.xp6(2),h.Q6J("ngIf",r.touched&&r.invalid),h.xp6(2),h.Q6J("ngClass",h.VKq(7,GM,o.touched&&o.invalid)),h.xp6(2),h.Q6J("ngIf",o.touched&&o.invalid),h.xp6(2),h.Q6J("disabled",t.invalid)}}let Ik=(()=>{class n{constructor(t,r){this.afs=t,this.subService=r,this.isEmailError=!1,this.isSubscribed=!1}ngOnInit(){}onSubmit(t){const r={name:t.name,email:t.email};this.subService.checkSubs(r.email).subscribe(o=>{console.log(o),o.empty?(this.subService.addSubs(r),this.isSubscribed=!0):this.isEmailError=!0})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(I0),h.Y36(hk))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-subscription-form"]],decls:10,vars:3,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[2,"font-size","20px"],[1,"m-auto","subs-text",2,"font-size","12px"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["class","form-inline mb-5 row g-2 mt-2",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-info","mt-3"],[1,"form-inline","mb-5","row","g-2","mt-2",3,"ngSubmit"],["subForm","ngForm"],[1,"form-group","col-md-5","mt-3"],["type","text","placeholder","Your Name","name","name","ngModel","","required","",1,"form-control","text-center",3,"ngClass"],["Name","ngModel"],["class","text-danger",4,"ngIf"],["type","email","placeholder","Email Address","name","email","ngModel","","required","","email","",1,"form-control","text-center",3,"ngClass"],["Email","ngModel"],[1,"col-md-2","mt-3"],[1,"btn","btn-info","btn-block","btn-sub","btn-theme",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),h._uU(4,"SUBSCRIPTION FORM"),h.qZA(),h.TgZ(5,"p",4),h._uU(6," Join our community of avid readers. Subscribe now for a dose of inspiration,latest articles and exclusive content. "),h.qZA(),h.YNc(7,fk,2,0,"div",5),h.YNc(8,pk,2,0,"div",6),h.YNc(9,wk,13,9,"form",7),h.qZA()()()),2&t&&(h.xp6(7),h.Q6J("ngIf",r.isEmailError),h.xp6(1),h.Q6J("ngIf",r.isSubscribed),h.xp6(1),h.Q6J("ngIf",!r.isSubscribed))},dependencies:[rt,zi,sS,pD,hM,ZT,CD,dS,iS,$0],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);width:100%;max-height:max-content}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%}.btn-sub[_ngcontent-%COMP%]{background-color:var(--primary-color);height:50px;font-size:13px;border:none;color:#fff;letter-spacing:2px;margin-top:5px}.subs-text[_ngcontent-%COMP%]{width:500px}"]}),n})(),Ek=(()=>{class n{constructor(){this.title="blogApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(t,r){1&t&&(h._UZ(0,"app-header")(1,"app-category-navbar"),h.TgZ(2,"div",0),h._UZ(3,"router-outlet"),h.qZA(),h.TgZ(4,"div",1)(5,"div",2),h._UZ(6,"app-subscription-form"),h.qZA()(),h._UZ(7,"app-footer"))},dependencies:[xT,ok,lk,dk,Ik],styles:[".app-body[_ngcontent-%COMP%]{min-height:45vh;margin-top:150px}"]}),n})(),Dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[Ek]}),n.\u0275inj=h.cJS({imports:[Es,sk,An.hO.initializeApp(dN_firebaseConfig),lN,XP]}),n})();No().bootstrapModule(Dk).catch(n=>console.error(n))},9751:(mt,De,P)=>{P.d(De,{y:()=>ue});var h=P(2961),Y=P(727),O=P(8822),ee=P(9635),te=P(2416),ne=P(576),le=P(2806);let ue=(()=>{class Z{constructor(we){we&&(this._subscribe=we)}lift(we){const Ge=new Z;return Ge.source=this,Ge.operator=we,Ge}subscribe(we,Ge,lt){const de=function j(Z){return Z&&Z instanceof h.Lv||function B(Z){return Z&&(0,ne.m)(Z.next)&&(0,ne.m)(Z.error)&&(0,ne.m)(Z.complete)}(Z)&&(0,Y.Nn)(Z)}(we)?we:new h.Hp(we,Ge,lt);return(0,le.x)(()=>{const{operator:Ie,source:Ee}=this;de.add(Ie?Ie.call(de,Ee):Ee?this._subscribe(de):this._trySubscribe(de))}),de}_trySubscribe(we){try{return this._subscribe(we)}catch(Ge){we.error(Ge)}}forEach(we,Ge){return new(Ge=ae(Ge))((lt,de)=>{const Ie=new h.Hp({next:Ee=>{try{we(Ee)}catch(Pe){de(Pe),Ie.unsubscribe()}},error:de,complete:lt});this.subscribe(Ie)})}_subscribe(we){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(we)}[O.L](){return this}pipe(...we){return(0,ee.U)(we)(this)}toPromise(we){return new(we=ae(we))((Ge,lt)=>{let de;this.subscribe(Ie=>de=Ie,Ie=>lt(Ie),()=>Ge(de))})}}return Z.create=Ue=>new Z(Ue),Z})();function ae(Z){var Ue;return null!==(Ue=Z??te.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(mt,De,P)=>{P.d(De,{x:()=>le});var h=P(9751),Y=P(727);const ee=(0,P(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(8737),ne=P(2806);let le=(()=>{class ae extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Z=new ue(this,this);return Z.operator=j,Z}_throwIfClosed(){if(this.closed)throw new ee}next(j){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(j)}})}error(j){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Z}=this;for(;Z.length;)Z.shift().error(j)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Z,isStopped:Ue,observers:we}=this;return Z||Ue?Y.Lc:(this.currentObservers=null,we.push(j),new Y.w0(()=>{this.currentObservers=null,(0,te.P)(we,j)}))}_checkFinalizedStatuses(j){const{hasError:Z,thrownError:Ue,isStopped:we}=this;Z?j.error(Ue):we&&j.complete()}asObservable(){const j=new h.y;return j.source=this,j}}return ae.create=(B,j)=>new ue(B,j),ae})();class ue extends le{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Z||Z.call(j,B)}error(B){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Z||Z.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Z;return null!==(Z=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Z?Z:Y.Lc}}},2961:(mt,De,P)=>{P.d(De,{Hp:()=>lt,Lv:()=>Z});var h=P(576),Y=P(727),O=P(2416),ee=P(7849);function te(){}const ne=ae("C",void 0,void 0);function ae(_e,ye,Te){return{kind:_e,value:ye,error:Te}}var B=P(3410),j=P(2806);class Z extends Y.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,Y.Nn)(ye)&&ye.add(this)):this.destination=Pe}static create(ye,Te,Fe){return new lt(ye,Te,Fe)}next(ye){this.isStopped?Ee(function ue(_e){return ae("N",_e,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ee(function le(_e){return ae("E",void 0,_e)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ee(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function we(_e,ye){return Ue.call(_e,ye)}class Ge{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Te}=this;if(Te.next)try{Te.next(ye)}catch(Fe){de(Fe)}}error(ye){const{partialObserver:Te}=this;if(Te.error)try{Te.error(ye)}catch(Fe){de(Fe)}else de(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Te){de(Te)}}}class lt extends Z{constructor(ye,Te,Fe){let Me;if(super(),(0,h.m)(ye)||!ye)Me={next:ye??void 0,error:Te??void 0,complete:Fe??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ye),V.unsubscribe=()=>this.unsubscribe(),Me={next:ye.next&&we(ye.next,V),error:ye.error&&we(ye.error,V),complete:ye.complete&&we(ye.complete,V)}):Me=ye}this.destination=new Ge(Me)}}function de(_e){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(_e):(0,ee.h)(_e)}function Ee(_e,ye){const{onStoppedNotification:Te}=O.v;Te&&B.z.setTimeout(()=>Te(_e,ye))}const Pe={closed:!0,next:te,error:function Ie(_e){throw _e},complete:te}},727:(mt,De,P)=>{P.d(De,{Lc:()=>ne,w0:()=>te,Nn:()=>le});var h=P(576);const O=(0,P(3888).d)(ae=>function(j){ae(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Z,Ue)=>`${Ue+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ee=P(8737);class te{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const we of j)we.remove(this);else j.remove(this);const{initialTeardown:Z}=this;if((0,h.m)(Z))try{Z()}catch(we){B=we instanceof O?we.errors:[we]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const we of Ue)try{ue(we)}catch(Ge){B=B??[],Ge instanceof O?B=[...B,...Ge.errors]:B.push(Ge)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ue(B);else{if(B instanceof te){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,ee.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,ee.P)(j,B),B instanceof te&&B._removeParent(this)}}te.EMPTY=(()=>{const ae=new te;return ae.closed=!0,ae})();const ne=te.EMPTY;function le(ae){return ae instanceof te||ae&&"closed"in ae&&(0,h.m)(ae.remove)&&(0,h.m)(ae.add)&&(0,h.m)(ae.unsubscribe)}function ue(ae){(0,h.m)(ae)?ae():ae.unsubscribe()}},2416:(mt,De,P)=>{P.d(De,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,De,P)=>{P.d(De,{E:()=>Y});const Y=new(P(9751).y)(te=>te.complete())},8996:(mt,De,P)=>{P.d(De,{D:()=>ye});var h=P(8421),Y=P(5363),O=P(9468),ne=P(9751),ue=P(2202),ae=P(576),B=P(9672);function Z(Te,Fe){if(!Te)throw new Error("Iterable cannot be null");return new ne.y(Me=>{(0,B.f)(Me,Fe,()=>{const V=Te[Symbol.asyncIterator]();(0,B.f)(Me,Fe,()=>{V.next().then(ge=>{ge.done?Me.complete():Me.next(ge.value)})},0,!0)})})}var Ue=P(3670),we=P(8239),Ge=P(1144),lt=P(6495),de=P(2206),Ie=P(4532),Ee=P(3260);function ye(Te,Fe){return Fe?function _e(Te,Fe){if(null!=Te){if((0,Ue.c)(Te))return function ee(Te,Fe){return(0,h.Xf)(Te).pipe((0,O.R)(Fe),(0,Y.Q)(Fe))}(Te,Fe);if((0,Ge.z)(Te))return function le(Te,Fe){return new ne.y(Me=>{let V=0;return Fe.schedule(function(){V===Te.length?Me.complete():(Me.next(Te[V++]),Me.closed||this.schedule())})})}(Te,Fe);if((0,we.t)(Te))return function te(Te,Fe){return(0,h.Xf)(Te).pipe((0,O.R)(Fe),(0,Y.Q)(Fe))}(Te,Fe);if((0,de.D)(Te))return Z(Te,Fe);if((0,lt.T)(Te))return function j(Te,Fe){return new ne.y(Me=>{let V;return(0,B.f)(Me,Fe,()=>{V=Te[ue.h](),(0,B.f)(Me,Fe,()=>{let ge,Ve;try{({value:ge,done:Ve}=V.next())}catch(Ze){return void Me.error(Ze)}Ve?Me.complete():Me.next(ge)},0,!0)}),()=>(0,ae.m)(V?.return)&&V.return()})}(Te,Fe);if((0,Ee.L)(Te))return function Pe(Te,Fe){return Z((0,Ee.Q)(Te),Fe)}(Te,Fe)}throw(0,Ie.z)(Te)}(Te,Fe):(0,h.Xf)(Te)}},8421:(mt,De,P)=>{P.d(De,{Xf:()=>Ue});var h=P(655),Y=P(1144),O=P(8239),ee=P(9751),te=P(3670),ne=P(2206),le=P(4532),ue=P(6495),ae=P(3260),B=P(576),j=P(7849),Z=P(8822);function Ue(_e){if(_e instanceof ee.y)return _e;if(null!=_e){if((0,te.c)(_e))return function we(_e){return new ee.y(ye=>{const Te=_e[Z.L]();if((0,B.m)(Te.subscribe))return Te.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(_e);if((0,Y.z)(_e))return function Ge(_e){return new ee.y(ye=>{for(let Te=0;Te<_e.length&&!ye.closed;Te++)ye.next(_e[Te]);ye.complete()})}(_e);if((0,O.t)(_e))return function lt(_e){return new ee.y(ye=>{_e.then(Te=>{ye.closed||(ye.next(Te),ye.complete())},Te=>ye.error(Te)).then(null,j.h)})}(_e);if((0,ne.D)(_e))return Ie(_e);if((0,ue.T)(_e))return function de(_e){return new ee.y(ye=>{for(const Te of _e)if(ye.next(Te),ye.closed)return;ye.complete()})}(_e);if((0,ae.L)(_e))return function Ee(_e){return Ie((0,ae.Q)(_e))}(_e)}throw(0,le.z)(_e)}function Ie(_e){return new ee.y(ye=>{(function Pe(_e,ye){var Te,Fe,Me,V;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Te=(0,h.KL)(_e);!(Fe=yield Te.next()).done;)if(ye.next(Fe.value),ye.closed)return}catch(ge){Me={error:ge}}finally{try{Fe&&!Fe.done&&(V=Te.return)&&(yield V.call(Te))}finally{if(Me)throw Me.error}}ye.complete()})})(_e,ye).catch(Te=>ye.error(Te))})}},6451:(mt,De,P)=>{P.d(De,{T:()=>ne});var h=P(8189),Y=P(8421),O=P(515),ee=P(7669),te=P(8996);function ne(...le){const ue=(0,ee.yG)(le),ae=(0,ee._6)(le,1/0),B=le;return B.length?1===B.length?(0,Y.Xf)(B[0]):(0,h.J)(ae)((0,te.D)(B,ue)):O.E}},5403:(mt,De,P)=>{P.d(De,{x:()=>Y});var h=P(2961);function Y(ee,te,ne,le,ue){return new O(ee,te,ne,le,ue)}class O extends h.Lv{constructor(te,ne,le,ue,ae,B){super(te),this.onFinalize=ae,this.shouldUnsubscribe=B,this._next=ne?function(j){try{ne(j)}catch(Z){te.error(Z)}}:super._next,this._error=ue?function(j){try{ue(j)}catch(Z){te.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(j){te.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(mt,De,P)=>{P.d(De,{U:()=>O});var h=P(4482),Y=P(5403);function O(ee,te){return(0,h.e)((ne,le)=>{let ue=0;ne.subscribe((0,Y.x)(le,ae=>{le.next(ee.call(te,ae,ue++))}))})}},8189:(mt,De,P)=>{P.d(De,{J:()=>O});var h=P(5577),Y=P(4671);function O(ee=1/0){return(0,h.z)(Y.y,ee)}},5577:(mt,De,P)=>{P.d(De,{z:()=>ue});var h=P(4004),Y=P(8421),O=P(4482),ee=P(9672),te=P(5403),le=P(576);function ue(ae,B,j=1/0){return(0,le.m)(B)?ue((Z,Ue)=>(0,h.U)((we,Ge)=>B(Z,we,Ue,Ge))((0,Y.Xf)(ae(Z,Ue))),j):("number"==typeof B&&(j=B),(0,O.e)((Z,Ue)=>function ne(ae,B,j,Z,Ue,we,Ge,lt){const de=[];let Ie=0,Ee=0,Pe=!1;const _e=()=>{Pe&&!de.length&&!Ie&&B.complete()},ye=Fe=>Ie<Z?Te(Fe):de.push(Fe),Te=Fe=>{we&&B.next(Fe),Ie++;let Me=!1;(0,Y.Xf)(j(Fe,Ee++)).subscribe((0,te.x)(B,V=>{Ue?.(V),we?ye(V):B.next(V)},()=>{Me=!0},void 0,()=>{if(Me)try{for(Ie--;de.length&&Ie<Z;){const V=de.shift();Ge?(0,ee.f)(B,Ge,()=>Te(V)):Te(V)}_e()}catch(V){B.error(V)}}))};return ae.subscribe((0,te.x)(B,ye,()=>{Pe=!0,_e()})),()=>{lt?.()}}(Z,Ue,ae,j)))}},5363:(mt,De,P)=>{P.d(De,{Q:()=>ee});var h=P(9672),Y=P(4482),O=P(5403);function ee(te,ne=0){return(0,Y.e)((le,ue)=>{le.subscribe((0,O.x)(ue,ae=>(0,h.f)(ue,te,()=>ue.next(ae),ne),()=>(0,h.f)(ue,te,()=>ue.complete(),ne),ae=>(0,h.f)(ue,te,()=>ue.error(ae),ne)))})}},3099:(mt,De,P)=>{P.d(De,{B:()=>te});var h=P(8421),Y=P(7579),O=P(2961),ee=P(4482);function te(le={}){const{connector:ue=(()=>new Y.x),resetOnError:ae=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=le;return Z=>{let Ue,we,Ge,lt=0,de=!1,Ie=!1;const Ee=()=>{we?.unsubscribe(),we=void 0},Pe=()=>{Ee(),Ue=Ge=void 0,de=Ie=!1},_e=()=>{const ye=Ue;Pe(),ye?.unsubscribe()};return(0,ee.e)((ye,Te)=>{lt++,!Ie&&!de&&Ee();const Fe=Ge=Ge??ue();Te.add(()=>{lt--,0===lt&&!Ie&&!de&&(we=ne(_e,j))}),Fe.subscribe(Te),!Ue&&lt>0&&(Ue=new O.Hp({next:Me=>Fe.next(Me),error:Me=>{Ie=!0,Ee(),we=ne(Pe,ae,Me),Fe.error(Me)},complete:()=>{de=!0,Ee(),we=ne(Pe,B),Fe.complete()}}),(0,h.Xf)(ye).subscribe(Ue))})(Z)}}function ne(le,ue,...ae){if(!0===ue)return void le();if(!1===ue)return;const B=new O.Hp({next:()=>{B.unsubscribe(),le()}});return(0,h.Xf)(ue(...ae)).subscribe(B)}},9468:(mt,De,P)=>{P.d(De,{R:()=>Y});var h=P(4482);function Y(O,ee=0){return(0,h.e)((te,ne)=>{ne.add(O.schedule(()=>te.subscribe(ne),ee))})}},8505:(mt,De,P)=>{P.d(De,{b:()=>te});var h=P(576),Y=P(4482),O=P(5403),ee=P(4671);function te(ne,le,ue){const ae=(0,h.m)(ne)||le||ue?{next:ne,error:le,complete:ue}:ne;return ae?(0,Y.e)((B,j)=>{var Z;null===(Z=ae.subscribe)||void 0===Z||Z.call(ae);let Ue=!0;B.subscribe((0,O.x)(j,we=>{var Ge;null===(Ge=ae.next)||void 0===Ge||Ge.call(ae,we),j.next(we)},()=>{var we;Ue=!1,null===(we=ae.complete)||void 0===we||we.call(ae),j.complete()},we=>{var Ge;Ue=!1,null===(Ge=ae.error)||void 0===Ge||Ge.call(ae,we),j.error(we)},()=>{var we,Ge;Ue&&(null===(we=ae.unsubscribe)||void 0===we||we.call(ae)),null===(Ge=ae.finalize)||void 0===Ge||Ge.call(ae)}))}):ee.y}},4408:(mt,De,P)=>{P.d(De,{o:()=>te});var h=P(727);class Y extends h.w0{constructor(le,ue){super()}schedule(le,ue=0){return this}}const O={setInterval(ne,le,...ue){const{delegate:ae}=O;return ae?.setInterval?ae.setInterval(ne,le,...ue):setInterval(ne,le,...ue)},clearInterval(ne){const{delegate:le}=O;return(le?.clearInterval||clearInterval)(ne)},delegate:void 0};var ee=P(8737);class te extends Y{constructor(le,ue){super(le,ue),this.scheduler=le,this.work=ue,this.pending=!1}schedule(le,ue=0){var ae;if(this.closed)return this;this.state=le;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,ue)),this.pending=!0,this.delay=ue,this.id=null!==(ae=this.id)&&void 0!==ae?ae:this.requestAsyncId(j,this.id,ue),this}requestAsyncId(le,ue,ae=0){return O.setInterval(le.flush.bind(le,this),ae)}recycleAsyncId(le,ue,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return ue;null!=ue&&O.clearInterval(ue)}execute(le,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(le,ue);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ue){let B,ae=!1;try{this.work(le)}catch(j){ae=!0,B=j||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:ue}=this,{actions:ae}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(ae,this),null!=le&&(this.id=this.recycleAsyncId(ue,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,De,P)=>{P.d(De,{v:()=>O});var h=P(6063);class Y{constructor(te,ne=Y.now){this.schedulerActionCtor=te,this.now=ne}schedule(te,ne=0,le){return new this.schedulerActionCtor(this,te).schedule(le,ne)}}Y.now=h.l.now;class O extends Y{constructor(te,ne=Y.now){super(te,ne),this.actions=[],this._active=!1}flush(te){const{actions:ne}=this;if(this._active)return void ne.push(te);let le;this._active=!0;do{if(le=te.execute(te.state,te.delay))break}while(te=ne.shift());if(this._active=!1,le){for(;te=ne.shift();)te.unsubscribe();throw le}}}},4986:(mt,De,P)=>{P.d(De,{z:()=>O});var h=P(4408);const O=new(P(7565).v)(h.o)},6063:(mt,De,P)=>{P.d(De,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(mt,De,P)=>{P.d(De,{z:()=>h});const h={setTimeout(Y,O,...ee){const{delegate:te}=h;return te?.setTimeout?te.setTimeout(Y,O,...ee):setTimeout(Y,O,...ee)},clearTimeout(Y){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(mt,De,P)=>{P.d(De,{h:()=>Y});const Y=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,De,P)=>{P.d(De,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,De,P)=>{P.d(De,{_6:()=>ne,jO:()=>ee,yG:()=>te});var h=P(576);function O(le){return le[le.length-1]}function ee(le){return(0,h.m)(O(le))?le.pop():void 0}function te(le){return function Y(le){return le&&(0,h.m)(le.schedule)}(O(le))?le.pop():void 0}function ne(le,ue){return"number"==typeof O(le)?le.pop():ue}},8737:(mt,De,P)=>{function h(Y,O){if(Y){const ee=Y.indexOf(O);0<=ee&&Y.splice(ee,1)}}P.d(De,{P:()=>h})},3888:(mt,De,P)=>{function h(Y){const ee=Y(te=>{Error.call(te),te.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}P.d(De,{d:()=>h})},2806:(mt,De,P)=>{P.d(De,{O:()=>ee,x:()=>O});var h=P(2416);let Y=null;function O(te){if(h.v.useDeprecatedSynchronousErrorHandling){const ne=!Y;if(ne&&(Y={errorThrown:!1,error:null}),te(),ne){const{errorThrown:le,error:ue}=Y;if(Y=null,le)throw ue}}else te()}function ee(te){h.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=te)}},9672:(mt,De,P)=>{function h(Y,O,ee,te=0,ne=!1){const le=O.schedule(function(){ee(),ne?Y.add(this.schedule(null,te)):this.unsubscribe()},te);if(Y.add(le),!ne)return le}P.d(De,{f:()=>h})},4671:(mt,De,P)=>{function h(Y){return Y}P.d(De,{y:()=>h})},1144:(mt,De,P)=>{P.d(De,{z:()=>h});const h=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(mt,De,P)=>{P.d(De,{D:()=>Y});var h=P(576);function Y(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(mt,De,P)=>{function h(Y){return"function"==typeof Y}P.d(De,{m:()=>h})},3670:(mt,De,P)=>{P.d(De,{c:()=>O});var h=P(8822),Y=P(576);function O(ee){return(0,Y.m)(ee[h.L])}},6495:(mt,De,P)=>{P.d(De,{T:()=>O});var h=P(2202),Y=P(576);function O(ee){return(0,Y.m)(ee?.[h.h])}},8239:(mt,De,P)=>{P.d(De,{t:()=>Y});var h=P(576);function Y(O){return(0,h.m)(O?.then)}},3260:(mt,De,P)=>{P.d(De,{L:()=>ee,Q:()=>O});var h=P(655),Y=P(576);function O(te){return(0,h.FC)(this,arguments,function*(){const le=te.getReader();try{for(;;){const{value:ue,done:ae}=yield(0,h.qq)(le.read());if(ae)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ue)}}finally{le.releaseLock()}})}function ee(te){return(0,Y.m)(te?.getReader)}},4482:(mt,De,P)=>{P.d(De,{A:()=>Y,e:()=>O});var h=P(576);function Y(ee){return(0,h.m)(ee?.lift)}function O(ee){return te=>{if(Y(te))return te.lift(function(ne){try{return ee(ne,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(mt,De,P)=>{P.d(De,{U:()=>O,z:()=>Y});var h=P(4671);function Y(...ee){return O(ee)}function O(ee){return 0===ee.length?h.y:1===ee.length?ee[0]:function(ne){return ee.reduce((le,ue)=>ue(le),ne)}}},7849:(mt,De,P)=>{P.d(De,{h:()=>O});var h=P(2416),Y=P(3410);function O(ee){Y.z.setTimeout(()=>{const{onUnhandledError:te}=h.v;if(!te)throw ee;te(ee)})}},4532:(mt,De,P)=>{function h(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(De,{z:()=>h})},655:(mt,De,P)=>{function ee(ie,ce){var me={};for(var Se in ie)Object.prototype.hasOwnProperty.call(ie,Se)&&ce.indexOf(Se)<0&&(me[Se]=ie[Se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Se=Object.getOwnPropertySymbols(ie);Oe<Se.length;Oe++)ce.indexOf(Se[Oe])<0&&Object.prototype.propertyIsEnumerable.call(ie,Se[Oe])&&(me[Se[Oe]]=ie[Se[Oe]])}return me}function Z(ie,ce,me,Se){return new(me||(me=Promise))(function(Be,et){function Ke(Kt){try{It(Se.next(Kt))}catch(tt){et(tt)}}function nn(Kt){try{It(Se.throw(Kt))}catch(tt){et(tt)}}function It(Kt){Kt.done?Be(Kt.value):function Oe(Be){return Be instanceof me?Be:new me(function(et){et(Be)})}(Kt.value).then(Ke,nn)}It((Se=Se.apply(ie,ce||[])).next())})}function _e(ie){return this instanceof _e?(this.v=ie,this):new _e(ie)}function ye(ie,ce,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Se=me.apply(ie,ce||[]),Be=[];return Oe={},et("next"),et("throw"),et("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function et(Tt){Se[Tt]&&(Oe[Tt]=function(Bn){return new Promise(function(an,_n){Be.push([Tt,Bn,an,_n])>1||Ke(Tt,Bn)})})}function Ke(Tt,Bn){try{!function nn(Tt){Tt.value instanceof _e?Promise.resolve(Tt.value.v).then(It,Kt):tt(Be[0][2],Tt)}(Se[Tt](Bn))}catch(an){tt(Be[0][3],an)}}function It(Tt){Ke("next",Tt)}function Kt(Tt){Ke("throw",Tt)}function tt(Tt,Bn){Tt(Bn),Be.shift(),Be.length&&Ke(Be[0][0],Be[0][1])}}function Fe(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function lt(ie){var ce="function"==typeof Symbol&&Symbol.iterator,me=ce&&ie[ce],Se=0;if(me)return me.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&Se>=ie.length&&(ie=void 0),{value:ie&&ie[Se++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),me={},Se("next"),Se("throw"),Se("return"),me[Symbol.asyncIterator]=function(){return this},me);function Se(Be){me[Be]=ie[Be]&&function(et){return new Promise(function(Ke,nn){!function Oe(Be,et,Ke,nn){Promise.resolve(nn).then(function(It){Be({value:It,done:Ke})},et)}(Ke,nn,(et=ie[Be](et)).done,et.value)})}}}P.d(De,{FC:()=>ye,KL:()=>Fe,_T:()=>ee,mG:()=>Z,qq:()=>_e})},4650:(mt,De,P)=>{P.d(De,{$8M:()=>Eu,$WT:()=>fs,$Z:()=>gw,AFp:()=>Gr,ALo:()=>UI,AaK:()=>ue,CHM:()=>fu,CRH:()=>Qm,CZH:()=>vn,CqO:()=>Ow,D6c:()=>LC,EJc:()=>Fn,EpF:()=>Qf,F4k:()=>Ov,FYo:()=>ow,FiY:()=>ft,GfV:()=>aw,Gpc:()=>j,JOm:()=>Ts,KtG:()=>Yh,LFG:()=>$e,LSH:()=>Rg,Lbi:()=>aE,Lck:()=>Wb,MAs:()=>Ku,MMx:()=>Ip,NdJ:()=>El,OlP:()=>dn,Oqu:()=>Ka,P3R:()=>Od,PXZ:()=>Ll,Q6J:()=>dm,QGY:()=>Xd,Qsj:()=>PD,R0b:()=>Ms,RDi:()=>xd,Rgc:()=>Pl,SBq:()=>Ld,Sil:()=>IC,Suo:()=>na,TTD:()=>js,TgZ:()=>Wa,VKq:()=>Hm,WLB:()=>Ol,X6Q:()=>DS,XFs:()=>yt,Xpm:()=>eu,Xts:()=>ul,Y36:()=>Hd,YKP:()=>w_,YNc:()=>Mv,Yjl:()=>yc,Yz7:()=>tt,Z0I:()=>_n,ZZ4:()=>wy,_Bn:()=>Vm,_UZ:()=>hm,_Vd:()=>ju,_c5:()=>kC,_uU:()=>ec,aQg:()=>Iy,c2e:()=>r0,cJS:()=>Bn,cg1:()=>sh,dDg:()=>TC,dqk:()=>Rt,eFA:()=>EE,eJc:()=>ty,ekj:()=>$v,eoX:()=>oc,f3M:()=>at,g9A:()=>Rp,h0i:()=>ji,hGG:()=>FC,hij:()=>tc,iGM:()=>WI,ifc:()=>J,ip1:()=>t0,jDz:()=>Bm,kL8:()=>r_,lG2:()=>mc,lcZ:()=>jI,lqb:()=>jo,lri:()=>o0,n5z:()=>id,oAB:()=>nu,oJD:()=>Mg,oxw:()=>kv,q4F:()=>Jy,qLn:()=>Jn,qOj:()=>Iv,qZA:()=>Kf,rWj:()=>Np,s9C:()=>Jf,sBO:()=>AC,s_b:()=>Wm,soG:()=>ly,tb:()=>yE,tp0:()=>D,uIk:()=>Tv,vHH:()=>de,vpe:()=>ta,wAp:()=>Ct,xp6:()=>dw,z2F:()=>uo,zSh:()=>cl,zs3:()=>Ga});var h=P(7579),Y=P(727),O=P(9751),ee=P(6451),te=P(3099);function ne(i){for(let s in i)if(i[s]===ne)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ae(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=ne({__forward_ref__:ne});function j(i){return i.__forward_ref__=j,i.toString=function(){return ue(this())},i}function Z(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}function we(i){return i&&!!i.\u0275providers}const lt="https://g.co/ng/security#xss";class de extends Error{constructor(s,a){super(Ie(s,a)),this.code=s}}function Ie(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function Ee(i){return"string"==typeof i?i:null==i?"":String(i)}function Fe(i,s){throw new de(-201,!1)}function et(i,s){null==i&&function Ke(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function tt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Bn(i){return{providers:i.providers||[],imports:i.imports||[]}}function an(i){return bn(i,zr)||bn(i,wn)}function _n(i){return null!==an(i)}function bn(i,s){return i.hasOwnProperty(s)?i[s]:null}function si(i){return i&&(i.hasOwnProperty(ds)||i.hasOwnProperty(qr))?i[ds]:null}const zr=ne({\u0275prov:ne}),ds=ne({\u0275inj:ne}),wn=ne({ngInjectableDef:ne}),qr=ne({ngInjectorDef:ne});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let hs;function Cn(i){const s=hs;return hs=i,s}function mr(i,s,a){const c=an(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&yt.Optional?null:void 0!==s?s:void Fe(ue(i))}const Rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fn={},jn="__NG_DI_FLAG__",Or="ngTempTokenPath",yr="ngTokenPath",ua=/\n/gm,rn="\u0275",Gi="__source";let qt;function Pr(i){const s=qt;return qt=i,s}function Ai(i,s=yt.Default){if(void 0===qt)throw new de(-203,!1);return null===qt?mr(i,void 0,s):qt.get(i,s&yt.Optional?null:void 0,s)}function $e(i,s=yt.Default){return(function mi(){return hs}()||Ai)(Z(i),s)}function at(i,s=yt.Default){return $e(i,bt(s))}function bt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function xt(i){const s=[];for(let a=0;a<i.length;a++){const c=Z(i[a]);if(Array.isArray(c)){if(0===c.length)throw new de(900,!1);let d,g=yt.Default;for(let v=0;v<c.length;v++){const I=c[v],E=vr(I);"number"==typeof E?-1===E?d=I.token:g|=E:d=I}s.push($e(d,g))}else s.push($e(c))}return s}function Lt(i,s){return i[jn]=s,i.prototype[jn]=s,i}function vr(i){return i[jn]}function z(i){return{toString:i}.toString()}var he=(()=>((he=he||{})[he.OnPush=0]="OnPush",he[he.Default=1]="Default",he))(),J=(()=>{return(i=J||(J={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",J;var i})();const nt={},We=[],on=ne({\u0275cmp:ne}),Tn=ne({\u0275dir:ne}),Rn=ne({\u0275pipe:ne}),qn=ne({\u0275mod:ne}),Ot=ne({\u0275fac:ne}),kr=ne({__NG_ELEMENT_ID__:ne});let xi=0;function eu(i){return z(()=>{const s=_r(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===he.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||J.Emulated,id:"c"+xi++,styles:i.styles||We,_:null,schemas:i.schemas||null,tView:null};ru(a);const c=i.dependencies;return a.directiveDefs=Ps(c,!1),a.pipeDefs=Ps(c,!0),a})}function gc(i){return Zt(i)||$n(i)}function tu(i){return null!==i}function nu(i){return z(()=>({type:i.type,bootstrap:i.bootstrap||We,declarations:i.declarations||We,imports:i.imports||We,exports:i.exports||We,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Nn(i,s){if(null==i)return nt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,s&&(s[d]=g)}return a}function mc(i){return z(()=>{const s=_r(i);return ru(s),s})}function yc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zt(i){return i[on]||null}function $n(i){return i[Tn]||null}function rr(i){return i[Rn]||null}function fs(i){const s=Zt(i)||$n(i)||rr(i);return null!==s&&s.standalone}function Zn(i,s){const a=i[qn]||null;if(!a&&!0===s)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function _r(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||We,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Nn(i.inputs,s),outputs:Nn(i.outputs)}}function ru(i){i.features?.forEach(s=>s(i))}function Ps(i,s){if(!i)return null;const a=s?rr:gc;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(tu)}const oi=0,rt=1,Pt=2,ln=3,Zr=4,Mi=5,pn=6,ks=7,In=8,zi=9,ca=10,Ut=11,fo=12,po=13,Fs=14,la=15,ir=16,go=17,Ls=18,Wr=19,ai=20,vc=21,Ht=22,_c=1,iu=2,Vs=7,ui=8,mo=9,sr=10;function Kr(i){return Array.isArray(i)&&"object"==typeof i[_c]}function Yr(i){return Array.isArray(i)&&!0===i[_c]}function Zi(i){return 0!=(4&i.flags)}function su(i){return i.componentOffset>-1}function ps(i){return 1==(1&i.flags)}function wr(i){return!!i.template}function $l(i){return 0!=(256&i[Pt])}function Qr(i,s){return i.hasOwnProperty(Ot)?i[Ot]:null}class Gl{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function js(){return ha}function ha(i){return i.type.prototype.ngOnChanges&&(i.setInput=_o),vo}function vo(){const i=bc(this),s=i?.current;if(s){const a=i.previous;if(a===nt)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function _o(i,s,a,c){const d=this.declaredInputs[a],g=bc(i)||function uu(i,s){return i[fa]=s}(i,{previous:nt,current:null}),v=g.current||(g.current={}),I=g.previous,E=I[d];v[d]=new Gl(E&&E.currentValue,s,I===nt),i[c]=s}js.ngInherit=!0;const fa="__ngSimpleChanges__";function bc(i){return i[fa]||null}const Jt=function(i,s,a){};function Sn(i){for(;Array.isArray(i);)i=i[oi];return i}function Ni(i,s){return Sn(s[i])}function Ir(i,s){return Sn(s[i.index])}function Cc(i,s){return i.data[s]}function Oi(i,s){return i[s]}function Wn(i,s){const a=s[i];return Kr(a)?a:a[oi]}function wo(i){return 64==(64&i[Pt])}function Ki(i,s){return null==s?null:i[s]}function Io(i){i[Ls]=0}function Sc(i,s){i[Mi]+=s;let a=i,c=i[ln];for(;null!==c&&(1===s&&1===a[Mi]||-1===s&&0===a[Mi]);)c[Mi]+=s,a=c,c=c[ln]}const At={lFrame:ky(null),bindingsEnabled:!0};function hu(){return At.bindingsEnabled}function Ce(){return At.lFrame.lView}function Wt(){return At.lFrame.tView}function fu(i){return At.lFrame.contextLView=i,i[In]}function Yh(i){return At.lFrame.contextLView=null,i}function Kn(){let i=Ac();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ac(){return At.lFrame.currentTNode}function Jr(i,s){const a=At.lFrame;a.currentTNode=i,a.isParent=s}function Wl(){return At.lFrame.isParent}function On(){const i=At.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function _a(){return At.lFrame.bindingIndex++}function Ql(i,s){const a=At.lFrame;a.bindingIndex=a.bindingRootIndex=i,mu(s)}function mu(i){At.lFrame.currentDirectiveIndex=i}function Rc(){return At.lFrame.currentQueryIndex}function yu(i){At.lFrame.currentQueryIndex=i}function Kp(i){const s=i[rt];return 2===s.type?s.declTNode:1===s.type?i[pn]:null}function Nc(i,s,a){if(a&yt.SkipSelf){let d=s,g=i;for(;!(d=d.parent,null!==d||a&yt.Host||(d=Kp(g),null===d||(g=g[la],10&d.type))););if(null===d)return!1;s=d,i=g}const c=At.lFrame=Yp();return c.currentTNode=s,c.lView=i,!0}function Jl(i){const s=Yp(),a=i[rt];At.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Yp(){const i=At.lFrame,s=null===i?null:i.child;return null===s?ky(i):s}function ky(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Oc(){const i=At.lFrame;return At.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Qp=Oc;function Qh(){const i=Oc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Fr(){return At.lFrame.selectedIndex}function wa(i){At.lFrame.selectedIndex=i}function gn(){const i=At.lFrame;return Cc(i.tView,i.selectedIndex)}function Pc(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:S,ngOnDestroy:M}=g;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function kc(i,s,a){ys(i,s,3,a)}function bo(i,s,a,c){(3&i[Pt])===a&&ys(i,s,a,c)}function Hs(i,s){let a=i[Pt];(3&a)===s&&(a&=2047,a+=1,i[Pt]=a)}function ys(i,s,a,c){const g=c??-1,v=s.length-1;let I=0;for(let E=void 0!==c?65535&i[Ls]:0;E<v;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[Ls]+=65536),(I<g||-1==g)&&(vu(i,a,s,E),i[Ls]=(4294901760&i[Ls])+E+2),E++}function vu(i,s,a,c){const d=a[c]<0,g=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[Pt]>>11<i[Ls]>>16&&(3&i[Pt])===s){i[Pt]+=2048,Jt(4,I,g);try{g.call(I)}finally{Jt(5,I,g)}}}else{Jt(4,I,g);try{g.call(I)}finally{Jt(5,I,g)}}}const di=-1;class Ia{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Pi(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const g=a[c++],v=a[c++],I=a[c++];i.setAttribute(s,v,I,g)}else{const g=d,v=a[++c];mn(g)?i.setProperty(s,g,v):i.setAttribute(s,g,v),c++}}return c}function Co(i){return 3===i||4===i||6===i}function mn(i){return 64===i.charCodeAt(0)}function vs(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Gs(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Gs(i,s,a,c,d){let g=0,v=i.length;if(-1===s)v=-1;else for(;g<i.length;){const I=i[g++];if("number"==typeof I){if(I===s){v=-1;break}if(I>s){v=g-1;break}}}for(;g<i.length;){const I=i[g];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[g+1]=d));if(c===i[g+1])return void(i[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(i.splice(v,0,s),g=v+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==d&&i.splice(g++,0,d)}function Vc(i){return i!==di}function To(i){return 32767&i}function So(i,s){let a=function Xh(i){return i>>16}(i),c=s;for(;a>0;)c=c[la],a--;return c}let Ea=!0;function Ao(i){const s=Ea;return Ea=i,s}const xo=255,zs=5;let _s=0;const fi={};function Mo(i,s){const a=_u(i,s);if(-1!==a)return a;const c=s[rt];c.firstCreatePass&&(i.injectorIndex=s.length,ws(c.data,i),ws(s,null),ws(c.blueprint,null));const d=Is(i,s),g=i.injectorIndex;if(Vc(d)){const v=To(d),I=So(d,s),E=I[rt].data;for(let S=0;S<8;S++)s[g+S]=I[v+S]|E[v+S]}return s[g+8]=d,g}function ws(i,s){i.push(0,0,0,0,0,0,0,0,s)}function _u(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Is(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=od(d),null===c)return di;if(a++,d=d[la],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return di}function Ro(i,s,a){!function Da(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(kr)&&(c=a[kr]),null==c&&(c=a[kr]=_s++);const d=c&xo;s.data[i+(d>>zs)]|=1<<d}(i,s,a)}function ba(i,s,a){if(a&yt.Optional||void 0!==i)return i;Fe()}function tf(i,s,a,c){if(a&yt.Optional&&void 0===c&&(c=null),!(a&(yt.Self|yt.Host))){const d=i[zi],g=Cn(void 0);try{return d?d.get(s,c,a&yt.Optional):mr(s,c,a&yt.Optional)}finally{Cn(g)}}return ba(c,0,a)}function Yi(i,s,a,c=yt.Default,d){if(null!==i){if(1024&s[Pt]){const v=function sd(i,s,a,c,d){let g=i,v=s;for(;null!==g&&null!==v&&1024&v[Pt]&&!(256&v[Pt]);){const I=nd(g,v,a,c|yt.Self,fi);if(I!==fi)return I;let E=g.parent;if(!E){const S=v[vc];if(S){const M=S.get(a,fi,c);if(M!==fi)return M}E=od(v),v=v[la]}g=E}return d}(i,s,a,c,fi);if(v!==fi)return v}const g=nd(i,s,a,c,fi);if(g!==fi)return g}return tf(s,a,c,d)}function nd(i,s,a,c,d){const g=function Zs(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(kr)?i[kr]:void 0;return"number"==typeof s?s>=0?s&xo:Bc:s}(a);if("function"==typeof g){if(!Nc(s,i,c))return c&yt.Host?ba(d,0,c):tf(s,a,c,d);try{const v=g(c);if(null!=v||c&yt.Optional)return v;Fe()}finally{Qp()}}else if("number"==typeof g){let v=null,I=_u(i,s),E=di,S=c&yt.Host?s[ir][pn]:null;for((-1===I||c&yt.SkipSelf)&&(E=-1===I?Is(i,s):s[I+8],E!==di&&Iu(c,!1)?(v=s[rt],I=To(E),s=So(E,s)):I=-1);-1!==I;){const M=s[rt];if(rd(g,I,M.data)){const k=yi(I,s,a,v,c,S);if(k!==fi)return k}E=s[I+8],E!==di&&Iu(c,s[rt].data[I+8]===S)&&rd(g,I,s)?(v=M,I=To(E),s=So(E,s)):I=-1}}return d}function yi(i,s,a,c,d,g){const v=s[rt],I=v.data[i+8],M=wu(I,v,a,null==c?su(I)&&Ea:c!=v&&0!=(3&I.type),d&yt.Host&&g===I);return null!==M?qs(s,v,M,I):fi}function wu(i,s,a,c,d){const g=i.providerIndexes,v=s.data,I=1048575&g,E=i.directiveStart,M=g>>20,G=d?I+M:i.directiveEnd;for(let K=c?I:I+M;K<G;K++){const fe=v[K];if(K<E&&a===fe||K>=E&&fe.type===a)return K}if(d){const K=v[E];if(K&&wr(K)&&K.type===a)return E}return null}function qs(i,s,a,c){let d=i[a];const g=s.data;if(function ed(i){return i instanceof Ia}(d)){const v=d;v.resolving&&function _e(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new de(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ee(i)}(g[a]));const I=Ao(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?Cn(v.injectImpl):null;Nc(i,c,yt.Default);try{d=i[a]=v.factory(void 0,g,i,c),s.firstCreatePass&&a>=c.directiveStart&&function tg(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=s.type.prototype;if(c){const v=ha(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==E&&Cn(E),Ao(I),v.resolving=!1,Qp()}}return d}function rd(i,s,a){return!!(a[s+(i>>zs)]&1<<i)}function Iu(i,s){return!(i&yt.Self||i&yt.Host&&s)}class Er{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Yi(this._tNode,this._lView,s,bt(c),a)}}function Bc(){return new Er(Kn(),Ce())}function id(i){return z(()=>{const s=i.prototype.constructor,a=s[Ot]||No(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const g=d[Ot]||No(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function No(i){return Ue(i)?()=>{const s=No(Z(i));return s&&s()}:Qr(i)}function od(i){const s=i[rt],a=s.type;return 2===a?s.declTNode:1===a?i[pn]:null}function Eu(i){return function ef(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(Co(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===s)return a[d+1];d+=2}}}return null}(Kn(),i)}const Ws="__parameters__";function Oo(i,s,a){return z(()=>{const c=function ad(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(E,S,M){const k=E.hasOwnProperty(Ws)?E[Ws]:Object.defineProperty(E,Ws,{value:[]})[Ws];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(v),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=tt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function bs(i,s){i.forEach(a=>Array.isArray(a)?bs(a,s):s(a))}function jc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Sa(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function An(i,s,a){let c=Lr(i,s);return c>=0?i[1|c]=a:(c=~c,function og(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Aa(i,s){const a=Lr(i,s);if(a>=0)return i[1|a]}function Lr(i,s){return function ki(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const g=c+(d-c>>1),v=i[g<<a];if(s===v)return g<<a;v>s?d=g:c=g+1}return~(d<<a)}(i,s,1)}const ft=Lt(Oo("Optional"),8),D=Lt(Oo("SkipSelf"),4);var Ts=(()=>((Ts=Ts||{})[Ts.Important=1]="Important",Ts[Ts.DashCase=2]="DashCase",Ts))();const gf=new Map;let pg=0;const mf="__ngContext__";function ar(i,s){Kr(s)?(i[mf]=s[ai],function Hc(i){gf.set(i[ai],i)}(s)):i[mf]=s}let Wc;function yd(i,s){return Wc(i,s)}function Au(i){const s=i[ln];return Yr(s)?s[ln]:s}function vd(i){return _d(i[po])}function xu(i){return _d(i[Zr])}function _d(i){for(;null!==i&&!Yr(i);)i=i[Zr];return i}function Oa(i,s,a,c,d){if(null!=c){let g,v=!1;Yr(c)?g=c:Kr(c)&&(v=!0,c=c[oi]);const I=Sn(c);0===i&&null!==a?null==d?Jc(s,a,I):ka(s,a,I,d||null,!0):1===i&&null!==a?ka(s,a,I,d||null,!0):2===i?function Ji(i,s,a){const c=Cd(i,s);c&&function bd(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,v):3===i&&s.destroyNode(I),null!=g&&function Dg(i,s,a,c,d){const g=a[Vs];g!==Sn(a)&&Oa(s,i,c,g,d);for(let I=sr;I<a.length;I++){const E=a[I];eo(E[rt],E,i,s,c,g)}}(s,i,g,a,d)}}function Pa(i,s,a){return i.createElement(s,a)}function Yc(i,s){const a=i[mo],c=a.indexOf(s),d=s[ln];512&s[Pt]&&(s[Pt]&=-513,Sc(d,-1)),a.splice(c,1)}function Df(i,s){if(i.length<=sr)return;const a=sr+s,c=i[a];if(c){const d=c[go];null!==d&&d!==i&&Yc(d,c),s>0&&(i[a-1][Zr]=c[Zr]);const g=Sa(i,sr+s);!function fr(i,s){eo(i,s,s[Ut],2,null,null),s[oi]=null,s[pn]=null}(c[rt],c);const v=g[Wr];null!==v&&v.detachView(g[rt]),c[ln]=null,c[Zr]=null,c[Pt]&=-65}return c}function _g(i,s){if(!(128&s[Pt])){const a=s[Ut];a.destroyNode&&eo(i,s,a,3,null,null),function Ef(i){let s=i[po];if(!s)return Mu(i[rt],i);for(;s;){let a=null;if(Kr(s))a=s[po];else{const c=s[sr];c&&(a=c)}if(!a){for(;s&&!s[Zr]&&s!==i;)Kr(s)&&Mu(s[rt],s),s=s[ln];null===s&&(s=i),Kr(s)&&Mu(s[rt],s),a=s&&s[Zr]}s=a}}(s)}}function Mu(i,s){if(!(128&s[Pt])){s[Pt]&=-65,s[Pt]|=128,function By(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Ia)){const g=a[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],E=g[v+1];Jt(4,I,E);try{E.call(I)}finally{Jt(5,I,E)}}else{Jt(4,d,g);try{g.call(d)}finally{Jt(5,d,g)}}}}}(i,s),function Qc(i,s){const a=i.cleanup,c=s[ks];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=a[g+1]];a[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();s[ks]=null}}(i,s),1===s[rt].type&&s[Ut].destroy();const a=s[go];if(null!==a&&Yr(s[ln])){a!==s[ln]&&Yc(a,s);const c=s[Wr];null!==c&&c.detachView(i)}!function Gc(i){gf.delete(i[ai])}(s)}}function Ed(i,s,a){return function Ru(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[oi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=i.data[c.directiveStart+d];if(g===J.None||g===J.Emulated)return null}return Ir(c,a)}}(i,s.parent,a)}function ka(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Jc(i,s,a){i.appendChild(s,a)}function Dd(i,s,a,c,d){null!==c?ka(i,s,a,c,d):Jc(i,s,a)}function Cd(i,s){return i.parentNode(s)}let La,Ua,nl,ku,Cf=function Fa(i,s,a){return 40&i.type?Ir(i,a):null};function Td(i,s,a,c){const d=Ed(i,c,s),g=s[Ut],I=function bf(i,s,a){return Cf(i,s,a)}(c.parent||s[pn],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)Dd(g,d,a[E],I,!1);else Dd(g,d,a,I,!1);void 0!==La&&La(g,c,s,a,d)}function Xs(i,s){if(null!==s){const a=s.type;if(3&a)return Ir(s,i);if(4&a)return Sd(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Xs(i,c);{const d=i[s.index];return Yr(d)?Sd(-1,d):Sn(d)}}if(32&a)return yd(s,i)()||Sn(i[s.index]);{const c=Ig(i,s);return null!==c?Array.isArray(c)?c[0]:Xs(Au(i[ir]),c):Xs(i,s.next)}}return null}function Ig(i,s){return null!==s?i[ir][pn].projection[s.projection]:null}function Sd(i,s){const a=sr+i+1;if(a<s.length){const c=s[a],d=c[rt].firstChild;if(null!==d)return Xs(c,d)}return s[Vs]}function Nu(i,s,a,c,d,g,v){for(;null!=a;){const I=c[a.index],E=a.type;if(v&&0===s&&(I&&ar(Sn(I),c),a.flags|=2),32!=(32&a.flags))if(8&E)Nu(i,s,a.child,c,d,g,!1),Oa(s,i,d,I,g);else if(32&E){const S=yd(a,c);let M;for(;M=S();)Oa(s,i,d,M,g);Oa(s,i,d,I,g)}else 16&E?Lo(i,s,c,a,d,g):Oa(s,i,d,I,g);a=v?a.projectionNext:a.next}}function eo(i,s,a,c,d,g){Nu(a,c,i.firstChild,s,d,g,!1)}function Lo(i,s,a,c,d,g){const v=a[ir],E=v[pn].projection[c.projection];if(Array.isArray(E))for(let S=0;S<E.length;S++)Oa(s,i,d,E[S],g);else Nu(i,s,E,v[ln],d,g,!0)}function Va(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function el(i,s,a){const{mergedAttrs:c,classes:d,styles:g}=a;null!==c&&Pi(i,s,c),null!==d&&Va(i,s,d),null!==g&&function Ou(i,s,a){i.setAttribute(s,"style",a)}(i,s,g)}function ja(i){return function Ba(){if(void 0===Ua&&(Ua=null,Rt.trustedTypes))try{Ua=Rt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ua}()?.createHTML(i)||i}function xd(i){nl=i}function Vr(){if(void 0===ku&&(ku=null,Rt.trustedTypes))try{ku=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return ku}function Fu(i){return Vr()?.createHTML(i)||i}function Md(i){return Vr()?.createScriptURL(i)||i}class Xi{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function es(i){return i instanceof Xi?i.changingThisBreaksApplicationSecurity:i}function no(i,s){const a=function Ha(i){return i instanceof Xi&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${lt})`)}return a===s}class R{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(ja(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch{return null}}}class H{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const a=this.inertDocument.createElement("template");return a.innerHTML=ja(s),a}}const Le=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ot(i){return(i=String(i)).match(Le)?i:"unsafe:"+i}function He(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function dt(...i){const s={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(s[c]=!0);return s}const xn=He("area,br,col,hr,img,wbr"),Ur=He("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),il=He("rp,rt"),Nd=dt(xn,dt(Ur,He("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dt(il,He("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dt(il,Ur)),sl=He("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),al=dt(sl,He("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),He("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Af=He("script,style,template");class Ag{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Nd.hasOwnProperty(a))return this.sanitizedSomething=!0,!Af.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=s.attributes;for(let d=0;d<c.length;d++){const g=c.item(d),v=g.name,I=v.toLowerCase();if(!al.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let E=g.value;sl[I]&&(E=ot(E)),this.buf.push(" ",v,'="',Z0(E),'"')}return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Nd.hasOwnProperty(a)&&!xn.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(Z0(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const Uo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hy=/([^\#-~ |!])/g;function Z0(i){return i.replace(/&/g,"&amp;").replace(Uo,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Hy,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xf;function xg(i){return"content"in i&&function W0(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Qn=(()=>((Qn=Qn||{})[Qn.NONE=0]="NONE",Qn[Qn.HTML=1]="HTML",Qn[Qn.STYLE=2]="STYLE",Qn[Qn.SCRIPT=3]="SCRIPT",Qn[Qn.URL=4]="URL",Qn[Qn.RESOURCE_URL=5]="RESOURCE_URL",Qn))();function Mg(i){const s=Pd();return s?Fu(s.sanitize(Qn.HTML,i)||""):no(i,"HTML")?Fu(es(i)):function TD(i,s){let a=null;try{xf=xf||function T(i){const s=new H(i);return function oe(){try{return!!(new window.DOMParser).parseFromString(ja(""),"text/html")}catch{return!1}}()?new R(s):s}(i);let c=s?String(s):"";a=xf.getInertBodyElement(c);let d=5,g=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=g,g=a.innerHTML,a=xf.getInertBodyElement(c)}while(c!==g);return ja((new Ag).sanitizeChildren(xg(a)||a))}finally{if(a){const c=xg(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(function Pu(){return void 0!==nl?nl:typeof document<"u"?document:void 0}(),Ee(i))}function Rg(i){const s=Pd();return s?s.sanitize(Qn.URL,i)||"":no(i,"URL")?es(i):ot(Ee(i))}function Ng(i){const s=Pd();if(s)return Md(s.sanitize(Qn.RESOURCE_URL,i)||"");if(no(i,"ResourceURL"))return Md(es(i));throw new de(904,!1)}function Od(i,s,a){return function Og(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?Ng:Rg}(s,a)(i)}function Pd(){const i=Ce();return i&&i[fo]}const ul=new dn("ENVIRONMENT_INITIALIZER"),kd=new dn("INJECTOR",-1),Q0=new dn("INJECTOR_DEF_TYPES");class Gn{get(s,a=fn){if(a===fn){const c=new Error(`NullInjectorError: No provider for ${ue(s)}!`);throw c.name="NullInjectorError",c}return a}}function RD(...i){return{\u0275providers:J0(0,i),\u0275fromNgModule:!0}}function J0(i,...s){const a=[],c=new Set;let d;return bs(s,g=>{const v=g;Pg(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&X0(d,a),a}function X0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];kg(d,g=>{s.push(g)})}}function Pg(i,s,a,c){if(!(i=Z(i)))return!1;let d=null,g=si(i);const v=!g&&Zt(i);if(g||v){if(v&&!v.standalone)return!1;d=i}else{const E=i.ngModule;if(g=si(E),!g)return!1;d=E}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of E)Pg(S,s,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;c.add(d);try{bs(g.imports,M=>{Pg(M,s,a,c)&&(S||(S=[]),S.push(M))})}finally{}void 0!==S&&X0(S,s)}if(!I){const S=Qr(d)||(()=>new d);s.push({provide:d,useFactory:S,deps:We},{provide:Q0,useValue:d,multi:!0},{provide:ul,useValue:()=>$e(d),multi:!0})}const E=g.providers;null==E||I||kg(E,M=>{s.push(M)})}}return d!==i&&void 0!==i.providers}function kg(i,s){for(let a of i)we(a)&&(a=a.\u0275providers),Array.isArray(a)?kg(a,s):s(a)}const Fg=ne({provide:String,useValue:ne});function Lg(i){return null!==i&&"object"==typeof i&&Fg in i}function Vu(i){return"function"==typeof i}const cl=new dn("Set Injector scope."),Mf={},Zy={};let Fd;function Rf(){return void 0===Fd&&(Fd=new Gn),Fd}class jo{}class ew extends jo{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bg(s,v=>this.processProvider(v)),this.records.set(kd,Uu(void 0,this)),d.has("environment")&&this.records.set(jo,Uu(void 0,this));const g=this.records.get(cl);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Q0.multi,We,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Pr(this),c=Cn(void 0);try{return s()}finally{Pr(a),Cn(c)}}get(s,a=fn,c=yt.Default){this.assertNotDestroyed(),c=bt(c);const d=Pr(this),g=Cn(void 0);try{if(!(c&yt.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Ug(i){return"function"==typeof i||"object"==typeof i&&i instanceof dn}(s)&&an(s);I=E&&this.injectableDefInScope(E)?Uu(Vg(s),Mf):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&yt.Self?Rf():this.parent).get(s,a=c&yt.Optional&&a===fn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Or]=v[Or]||[]).unshift(ue(s)),d)throw v;return function U(i,s,a,c){const d=i[Or];throw s[Gi]&&d.unshift(s[Gi]),i.message=function L(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==rn?i.slice(2):i;let d=ue(s);if(Array.isArray(s))d=s.map(ue).join(" -> ");else if("object"==typeof s){let g=[];for(let v in s)if(s.hasOwnProperty(v)){let I=s[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):ue(I)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(ua,"\n  ")}`}("\n"+i.message,d,a,c),i[yr]=d,i[Or]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{Cn(g),Pr(d)}}resolveInjectorInitializers(){const s=Pr(this),a=Cn(void 0);try{const c=this.get(ul.multi,We,yt.Self);for(const d of c)d()}finally{Pr(s),Cn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ue(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(s){let a=Vu(s=Z(s))?s:Z(s&&s.provide);const c=function tw(i){return Lg(i)?Uu(void 0,i.useValue):Uu(Wy(i),Mf)}(s);if(Vu(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Uu(void 0,Mf,!0),d.factory=()=>xt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Mf&&(a.value=Zy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function nw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Vg(i){const s=an(i),a=null!==s?s.factory:Qr(i);if(null!==a)return a;if(i instanceof dn)throw new de(204,!1);if(i instanceof Function)return function Nf(i){const s=i.length;if(s>0)throw function Cs(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new de(204,!1);const a=function ii(i){const s=i&&(i[zr]||i[wn]);return s?(function Rs(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),s):null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new de(204,!1)}function Wy(i,s,a){let c;if(Vu(i)){const d=Z(i);return Qr(d)||Vg(d)}if(Lg(i))c=()=>Z(i.useValue);else if(function zy(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...xt(i.deps||[]));else if(function Bo(i){return!(!i||!i.useExisting)}(i))c=()=>$e(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function Ky(i){return!!i.deps}(i))return Qr(d)||Vg(d);c=()=>new d(...xt(i.deps))}return c}function Uu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Bg(i,s){for(const a of i)Array.isArray(a)?Bg(a,s):a&&we(a)?Bg(a.\u0275providers,s):s(a)}class rw{}class Bu{}class sw{resolveComponentFactory(s){throw function iw(i){const s=Error(`No component factory found for ${ue(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let ju=(()=>{class i{}return i.NULL=new sw,i})();function ts(){return ll(Kn(),Ce())}function ll(i,s){return new Ld(Ir(i,s))}let Ld=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=ts,i})();function Vd(i){return i instanceof Ld?i.nativeElement:i}class ow{}let PD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Qy(){const i=Ce(),a=Wn(Kn().index,i);return(Kr(a)?a:i)[Ut]}(),i})(),kD=(()=>{class i{}return i.\u0275prov=tt({token:i,providedIn:"root",factory:()=>null}),i})();class aw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Jy=new aw("15.2.3"),Xy={},Ud="ngOriginalError";function jg(i){return i[Ud]}class Jn{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&jg(s);for(;a&&jg(a);)a=jg(a);return a||null}}function Je(i){return i instanceof Function?i():i}function tv(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=s.length;if(d+g===c||i.charCodeAt(d+g)<=32)return d}a=d+1}}const uw="ng-template";function UD(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==tv(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function cw(i){return 4===i.type&&i.value!==uw}function BD(i,s,a){return s===(4!==i.type||a?i.value:uw)}function jD(i,s,a){let c=4;const d=i.attrs||[],g=function lw(i){for(let s=0;s<i.length;s++)if(Co(i[s]))return s;return i.length}(d);let v=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!BD(i,E,a)||""===E&&1===s.length){if(Ss(c))return!1;v=!0}}else{const S=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!UD(i.attrs,S,a)){if(Ss(c))return!1;v=!0}continue}const k=$D(8&c?"class":E,d,cw(i),a);if(-1===k){if(Ss(c))return!1;v=!0;continue}if(""!==S){let G;G=k>g?"":d[k+1].toLowerCase();const K=8&c?G:null;if(K&&-1!==tv(K,S,0)||2&c&&S!==G){if(Ss(c))return!1;v=!0}}}}else{if(!v&&!Ss(c)&&!Ss(E))return!1;if(v&&Ss(E))continue;v=!1,c=E|1&c}}return Ss(c)||v}function Ss(i){return 0==(1&i)}function $D(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let g=!1;for(;d<s.length;){const v=s[d];if(v===i)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=s[++d];for(;"string"==typeof I;)I=s[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function Vt(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function HD(i,s,a=!1){for(let c=0;c<s.length;c++)if(jD(i,s[c],a))return!0;return!1}function nv(i,s){return i?":not("+s.trim()+")":s}function Un(i){let s=i[0],a=1,c=2,d="",g=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Ss(v)&&(s+=nv(g,d),d=""),c=v,g=g||!Ss(c);a++}return""!==d&&(s+=nv(g,d)),s}const Ye={};function dw(i){zn(Wt(),Ce(),Fr()+i,!1)}function zn(i,s,a,c){if(!c)if(3==(3&s[Pt])){const g=i.preOrderCheckHooks;null!==g&&kc(s,g,a)}else{const g=i.preOrderHooks;null!==g&&bo(s,g,0,a)}wa(a)}function iv(i,s=null,a=null,c){const d=Fi(i,s,a,c);return d.resolveInjectorInitializers(),d}function Fi(i,s=null,a=null,c,d=new Set){const g=[a||We,RD(i)];return c=c||("object"==typeof i?void 0:ue(i)),new ew(g,s||Rf(),c||null,d)}let Ga=(()=>{class i{static create(a,c){if(Array.isArray(a))return iv({name:""},c,a,"");{const d=a.name??"";return iv({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=fn,i.NULL=new Gn,i.\u0275prov=tt({token:i,providedIn:"any",factory:()=>$e(kd)}),i.__NG_ELEMENT_ID__=-1,i})();function Hd(i,s=yt.Default){const a=Ce();return null===a?$e(i,s):Yi(Kn(),a,Z(i),s)}function gw(){throw new Error("invalid")}function mw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const g=a[c+1];if(-1!==g){const v=i.data[g];yu(a[c]),v.contentQueries(2,s[g],g)}}}function Zg(i,s,a,c,d,g,v,I,E,S,M){const k=s.blueprint.slice();return k[oi]=d,k[Pt]=76|c,(null!==M||i&&1024&i[Pt])&&(k[Pt]|=1024),Io(k),k[ln]=k[la]=i,k[In]=a,k[ca]=v||i&&i[ca],k[Ut]=I||i&&i[Ut],k[fo]=E||i&&i[fo]||null,k[zi]=S||i&&i[zi]||null,k[pn]=g,k[ai]=function fd(){return pg++}(),k[vc]=M,k[ir]=2==s.type?i[ir]:k,k}function Gd(i,s,a,c,d){let g=i.data[s];if(null===g)g=function lv(i,s,a,c,d){const g=Ac(),v=Wl(),E=i.data[s]=function Xn(i,s,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==g&&(v?null==g.child&&null!==E.parent&&(g.child=E):null===g.next&&(g.next=E,E.prev=g)),E}(i,s,a,c,d),function gu(){return At.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const v=function Eo(){const i=At.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Jr(g,!0),g}function Uf(i,s,a,c){if(0===a)return-1;const d=s.length;for(let g=0;g<a;g++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function dv(i,s,a){Jl(s);try{const c=i.viewQuery;null!==c&&im(1,c,a);const d=i.template;null!==d&&yw(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&mw(i,s),i.staticViewQueries&&im(2,i.viewQuery,a);const g=i.components;null!==g&&function tb(i,s){for(let a=0;a<s.length;a++)Dw(i,s[a])}(s,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Pt]&=-5,Qh()}}function Bf(i,s,a,c){const d=s[Pt];if(128!=(128&d)){Jl(s);try{Io(s),function va(i){return At.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&yw(i,s,a,2,c);const v=3==(3&d);if(v){const S=i.preOrderCheckHooks;null!==S&&kc(s,S,null)}else{const S=i.preOrderHooks;null!==S&&bo(s,S,0,null),Hs(s,0)}if(function gv(i){for(let s=vd(i);null!==s;s=xu(s)){if(!s[iu])continue;const a=s[mo];for(let c=0;c<a.length;c++){const d=a[c];512&d[Pt]||Sc(d[ln],1),d[Pt]|=512}}}(s),function gl(i){for(let s=vd(i);null!==s;s=xu(s))for(let a=sr;a<s.length;a++){const c=s[a],d=c[rt];wo(c)&&Bf(d,c,d.template,c[In])}}(s),null!==i.contentQueries&&mw(i,s),v){const S=i.contentCheckHooks;null!==S&&kc(s,S)}else{const S=i.contentHooks;null!==S&&bo(s,S,1),Hs(s,1)}!function XD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)wa(~d);else{const g=d,v=a[++c],I=a[++c];Ql(v,g),I(2,s[g])}}}finally{wa(-1)}}(i,s);const I=i.components;null!==I&&function eb(i,s){for(let a=0;a<s.length;a++)Hf(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&im(2,E,c),v){const S=i.viewCheckHooks;null!==S&&kc(s,S)}else{const S=i.viewHooks;null!==S&&bo(s,S,2),Hs(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Pt]&=-41,512&s[Pt]&&(s[Pt]&=-513,Sc(s[ln],-1))}finally{Qh()}}}function yw(i,s,a,c,d){const g=Fr(),v=2&c;try{wa(-1),v&&s.length>Ht&&zn(i,s,Ht,!1),Jt(v?2:0,d),a(c,d)}finally{wa(g),Jt(v?3:1,d)}}function Wg(i,s,a){if(Zi(s)){const d=s.directiveEnd;for(let g=s.directiveStart;g<d;g++){const v=i.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function Kg(i,s,a){hu()&&(function fl(i,s,a,c){const d=a.directiveStart,g=a.directiveEnd;su(a)&&function qo(i,s,a){const c=Ir(s,i),d=Yg(a),g=i[ca],v=Wu(i,Zg(i,d,null,a.onPush?32:16,c,s,g,g.createRenderer(c,a),null,null,null));i[s.index]=v}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Mo(a,s),ar(c,s);const v=a.initialInputs;for(let I=d;I<g;I++){const E=i.data[I],S=qs(s,i,I,a);ar(S,s),null!==v&&Ew(0,I-d,S,E,0,v),wr(E)&&(Wn(a.index,s)[In]=qs(s,i,I,a))}}(i,s,a,Ir(a,s)),64==(64&a.flags)&&Qg(i,s,a))}function hv(i,s,a=Ir){const c=s.localNames;if(null!==c){let d=s.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?a(s,i):i[v];i[d++]=I}}}function Yg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=pr(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function pr(i,s,a,c,d,g,v,I,E,S){const M=Ht+c,k=M+d,G=function vw(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ye);return a}(M,k),K="function"==typeof S?S():S;return G[rt]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:s,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:K,incompleteFirstPass:!1}}function fv(i,s,a,c){const d=Ar(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&mv(i).push(c,d.length-1))}function jf(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const g=i[d];null===c?jr(a,s,d,g):c.hasOwnProperty(d)&&jr(a,s,c[d],g)}return a}function jr(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function $r(i,s,a,c,d,g,v,I){const E=Ir(s,a);let M,S=s.inputs;!I&&null!=S&&(M=S[c])?(sm(i,a,M,c,d),su(s)&&Ei(a,s.index)):3&s.type&&(c=function _w(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,s.value||"",c):d,g.setProperty(E,c,d))}function Ei(i,s){const a=Wn(s,i);16&a[Pt]||(a[Pt]|=32)}function cr(i,s,a,c){if(hu()){const d=null===c?null:{"":-1},g=function $f(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let g=0;g<a.length;g++){const v=a[g];if(HD(s,v.selectors,!1))if(c||(c=[]),wr(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),pv(i,s,I.length)}else c.unshift(v),pv(i,s,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&ww(i,s,a,v,d,I),d&&function qu(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const g=a[s[d+1]];if(null==g)throw new de(-301,!1);c.push(s[d],g)}}}(a,c,d)}a.mergedAttrs=vs(a.mergedAttrs,a.attrs)}function ww(i,s,a,c,d,g){for(let S=0;S<c.length;S++)Ro(Mo(a,s),i,c[S].type);!function Jg(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let S=0;S<c.length;S++){const M=c[S];M.providersResolver&&M.providersResolver(M)}let v=!1,I=!1,E=Uf(i,s,c.length,null);for(let S=0;S<c.length;S++){const M=c[S];a.mergedAttrs=vs(a.mergedAttrs,M.hostAttrs),pl(i,a,s,E,M),Zu(E,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const k=M.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!I&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),E++}!function yn(i,s,a){const d=s.directiveEnd,g=i.data,v=s.attrs,I=[];let E=null,S=null;for(let M=s.directiveStart;M<d;M++){const k=g[M],G=a?a.get(k):null,fe=G?G.outputs:null;E=jf(k.inputs,M,E,G?G.inputs:null),S=jf(k.outputs,M,S,fe);const ke=null===E||null===v||cw(s)?null:zd(E,M,v);I.push(ke)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=8),E.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=I,s.inputs=E,s.outputs=S}(i,a,g)}function Qg(i,s,a){const c=a.directiveStart,d=a.directiveEnd,g=a.index,v=function Mc(){return At.lFrame.currentDirectiveIndex}();try{wa(g);for(let I=c;I<d;I++){const E=i.data[I],S=s[I];mu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Iw(E,S)}}finally{wa(-1),mu(v)}}function Iw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function pv(i,s,a){s.componentOffset=a,(i.components||(i.components=[])).push(s.index)}function Zu(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;wr(s)&&(a[""]=i)}}function pl(i,s,a,c,d){i.data[c]=d;const g=d.factory||(d.factory=Qr(d.type)),v=new Ia(g,wr(d),Hd);i.blueprint[c]=v,a[c]=v,function zu(i,s,a,c,d){const g=d.hostBindings;if(g){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const I=~s.index;(function er(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(a,c,g)}}(i,s,c,Uf(i,a,d.hostVars,Ye),d)}function Vi(i,s,a,c,d,g){const v=Ir(i,s);!function Zo(i,s,a,c,d,g,v){if(null==g)i.removeAttribute(s,d,a);else{const I=null==v?Ee(g):v(g,c||"",d);i.setAttribute(s,d,I,a)}}(s[Ut],v,g,i.value,a,c,d)}function Ew(i,s,a,c,d,g){const v=g[s];if(null!==v){const I=c.setInput;for(let E=0;E<v.length;){const S=v[E++],M=v[E++],k=v[E++];null!==I?c.setInput(a,k,S,M):a[M]=k}}}function zd(i,s,a){let c=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(i.hasOwnProperty(g)){null===c&&(c=[]);const v=i[g];for(let I=0;I<v.length;I+=2)if(v[I]===s){c.push(g,v[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Xg(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function Hf(i,s){const a=Wn(s,i);if(wo(a)){const c=a[rt];48&a[Pt]?Bf(c,a,c.template,a[In]):a[Mi]>0&&em(a)}}function em(i){for(let c=vd(i);null!==c;c=xu(c))for(let d=sr;d<c.length;d++){const g=c[d];if(wo(g))if(512&g[Pt]){const v=g[rt];Bf(v,g,v.template,g[In])}else g[Mi]>0&&em(g)}const a=i[rt].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Wn(a[c],i);wo(d)&&d[Mi]>0&&em(d)}}function Dw(i,s){const a=Wn(s,i),c=a[rt];(function tm(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),dv(c,a,a[In])}function Wu(i,s){return i[po]?i[Fs][Zr]=s:i[po]=s,i[Fs]=s,s}function nm(i){for(;i;){i[Pt]|=32;const s=Au(i);if($l(i)&&!s)return i;i=s}return null}function rm(i,s,a,c=!0){const d=s[ca];d.begin&&d.begin();try{Bf(i,s,i.template,a)}catch(v){throw c&&za(s,v),v}finally{d.end&&d.end()}}function im(i,s,a){yu(0),s(i,a)}function Ar(i){return i[ks]||(i[ks]=[])}function mv(i){return i.cleanup||(i.cleanup=[])}function za(i,s){const a=i[zi],c=a?a.get(Jn,null):null;c&&c.handleError(s)}function sm(i,s,a,c,d){for(let g=0;g<a.length;){const v=a[g++],I=a[g++],E=s[v],S=i.data[v];null!==S.setInput?S.setInput(E,d,c,I):E[I]=d}}function qa(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==s)for(let v=0;v<s.length;v++){const I=s[v];"number"==typeof I?g=I:1==g?d=ae(d,I):2==g&&(c=ae(c,I+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function om(i,s,a,c,d=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&c.push(Sn(g)),Yr(g))for(let I=sr;I<g.length;I++){const E=g[I],S=E[rt].firstChild;null!==S&&om(E[rt],E,S,c)}const v=a.type;if(8&v)om(i,s,a.child,c);else if(32&v){const I=yd(a,s);let E;for(;E=I();)c.push(E)}else if(16&v){const I=Ig(s,a);if(Array.isArray(I))c.push(...I);else{const E=Au(s[ir]);om(E[rt],E,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class qd{get rootNodes(){const s=this._lView,a=s[rt];return om(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[In]}set context(s){this._lView[In]=s}get destroyed(){return 128==(128&this._lView[Pt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[ln];if(Yr(s)){const a=s[ui],c=a?a.indexOf(this):-1;c>-1&&(Df(s,c),Sa(a,c))}this._attachedToViewContainer=!1}_g(this._lView[rt],this._lView)}onDestroy(s){fv(this._lView[rt],this._lView,null,s)}markForCheck(){nm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pt]&=-65}reattach(){this._lView[Pt]|=64}detectChanges(){rm(this._lView[rt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Id(i,s){eo(i,s,s[Ut],2,null,null)}(this._lView[rt],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=s}}class Yt extends qd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;rm(s[rt],s,s[In],!1)}checkNoChanges(){}get context(){return null}}class cn extends ju{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Zt(s);return new Zd(a,this.ngModule)}}function ml(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class vv{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=bt(c);const d=this.injector.get(s,Xy,c);return d!==Xy||a===Xy?d:this.parentInjector.get(s,a,c)}}class Zd extends Bu{get inputs(){return ml(this.componentDef.inputs)}get outputs(){return ml(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function wt(i){return i.map(Un).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let g=(d=d||this.ngModule)instanceof jo?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new vv(s,g):s,I=v.get(ow,null);if(null===I)throw new de(407,!1);const E=v.get(kD,null),S=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=c?function hl(i,s,a){return i.selectRootElement(s,a===J.ShadowDom)}(S,c,this.componentDef.encapsulation):Pa(S,M,function yv(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),G=this.componentDef.onPush?288:272,K=pr(0,null,null,1,0,null,null,null,null,null),fe=Zg(null,K,null,G,null,null,I,S,E,v,null);let ke,Qe;Jl(fe);try{const ct=this.componentDef;let Dt,xe=null;ct.findHostDirectiveDefs?(Dt=[],xe=new Map,ct.findHostDirectiveDefs(ct,Dt,xe),Dt.push(ct)):Dt=[ct];const kt=function bw(i,s){const a=i[rt],c=Ht;return i[c]=s,Gd(a,c,2,"#host",null)}(fe,k),Ln=function Cw(i,s,a,c,d,g,v,I){const E=d[rt];!function sb(i,s,a,c){for(const d of i)s.mergedAttrs=vs(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(qa(s,s.mergedAttrs,!0),null!==a&&el(c,a,s))}(c,i,s,v);const S=g.createRenderer(s,a),M=Zg(d,Yg(a),null,a.onPush?32:16,d[i.index],i,g,S,I||null,null,null);return E.firstCreatePass&&pv(E,i,c.length-1),Wu(d,M),d[i.index]=M}(kt,k,ct,Dt,fe,I,S);Qe=Cc(K,Ht),k&&function ab(i,s,a,c){if(c)Pi(i,a,["ng-version",Jy.full]);else{const{attrs:d,classes:g}=function Of(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===d?""!==g&&s.push(g,i[++c]):8===d&&a.push(g);else{if(!Ss(d))break;d=g}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Pi(i,a,d),g&&g.length>0&&Va(i,a,g.join(" "))}}(S,ct,k,c),void 0!==a&&function Tw(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const g=a[d];c.push(null!=g?Array.from(g):null)}}(Qe,this.ngContentSelectors,a),ke=function ob(i,s,a,c,d,g){const v=Kn(),I=d[rt],E=Ir(v,d);ww(I,d,v,a,null,c);for(let M=0;M<a.length;M++)ar(qs(d,I,v.directiveStart+M,v),d);Qg(I,d,v),E&&ar(E,d);const S=qs(d,I,v.directiveStart+v.componentOffset,v);if(i[In]=d[In]=S,null!==g)for(const M of g)M(S,s);return Wg(I,v,i),S}(Ln,ct,Dt,xe,fe,[ub]),dv(K,fe,null)}finally{Qh()}return new _v(this.componentType,ke,ll(Qe,fe),fe,Qe)}}class _v extends rw{constructor(s,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Yt(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const g=this._rootLView;sm(g[rt],g,d,s,a),Ei(g,this._tNode.index)}}get injector(){return new Er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function ub(){const i=Kn();Pc(Ce()[rt],i)}function Iv(i){let s=function wv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(wr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new de(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=Ev(i.inputs),v.declaredInputs=Ev(i.declaredInputs),v.outputs=Ev(i.outputs);const I=d.hostBindings;I&&Gf(i,I);const E=d.viewQuery,S=d.contentQueries;if(E&&Dv(i,E),S&&yl(i,S),le(i.inputs,d.inputs),le(i.declaredInputs,d.declaredInputs),le(i.outputs,d.outputs),wr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(i),I===Iv&&(a=!1)}}s=Object.getPrototypeOf(s)}!function cb(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=vs(d.hostAttrs,a=vs(a,d.hostAttrs))}}(c)}function Ev(i){return i===nt?{}:i===We?[]:i}function Dv(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function yl(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,g)=>{s(c,d,g),a(c,d,g)}:s}function Gf(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function Kd(i){return!!zf(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function zf(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ui(i,s,a){return i[s]=a}function Hr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Tv(i,s,a,c){const d=Ce();return Hr(d,_a(),s)&&(Wt(),Vi(gn(),d,i,s,a,c)),Tv}function Qd(i,s,a,c){return Hr(i,_a(),a)?s+Ee(a)+c:Ye}function Mv(i,s,a,c,d,g,v,I){const E=Ce(),S=Wt(),M=i+Ht,k=S.firstCreatePass?function hb(i,s,a,c,d,g,v,I,E){const S=s.consts,M=Gd(s,i,4,v||null,Ki(S,I));cr(s,a,M,Ki(S,E)),Pc(s,M);const k=M.tView=pr(2,M,c,d,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,S,E,s,a,c,d,g,v):S.data[M];Jr(k,!1);const G=E[Ut].createComment("");Td(S,E,G,k),ar(G,E),Wu(E,E[M]=Xg(G,E,G,k)),ps(k)&&Kg(S,E,k),null!=v&&hv(E,k,I)}function Ku(i){return Oi(function Kl(){return At.lFrame.contextLView}(),Ht+i)}function dm(i,s,a){const c=Ce();return Hr(c,_a(),s)&&$r(Wt(),gn(),c,i,s,c[Ut],a,!1),dm}function Za(i,s,a,c,d){const v=d?"class":"style";sm(i,a,s.inputs[v],v,c)}function Wa(i,s,a,c){const d=Ce(),g=Wt(),v=Ht+i,I=d[Ut],E=g.firstCreatePass?function Nw(i,s,a,c,d,g){const v=s.consts,E=Gd(s,i,2,c,Ki(v,d));return cr(s,a,E,Ki(v,g)),null!==E.attrs&&qa(E,E.attrs,!1),null!==E.mergedAttrs&&qa(E,E.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,E),E}(v,g,d,s,a,c):g.data[v],S=d[v]=Pa(I,s,function eg(){return At.lFrame.currentNamespace}()),M=ps(E);return Jr(E,!0),el(I,S,E),32!=(32&E.flags)&&Td(g,d,S,E),0===function Zl(){return At.lFrame.elementDepthCount}()&&ar(S,d),function ya(){At.lFrame.elementDepthCount++}(),M&&(Kg(g,d,E),Wg(g,E,d)),null!==c&&hv(d,E),Wa}function Kf(){let i=Kn();Wl()?function Do(){At.lFrame.isParent=!1}():(i=i.parent,Jr(i,!1));const s=i;!function Wh(){At.lFrame.elementDepthCount--}();const a=Wt();return a.firstCreatePass&&(Pc(a,i),Zi(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function rg(i){return 0!=(8&i.flags)}(s)&&Za(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function hi(i){return 0!=(16&i.flags)}(s)&&Za(a,s,Ce(),s.stylesWithoutHost,!1),Kf}function hm(i,s,a,c){return Wa(i,s,a,c),Kf(),hm}function Qf(){return Ce()}function Xd(i){return!!i&&"function"==typeof i.then}function Ov(i){return!!i&&"function"==typeof i.subscribe}const Ow=Ov;function El(i,s,a,c){const d=Ce(),g=Wt(),v=Kn();return function Dl(i,s,a,c,d,g,v){const I=ps(c),S=i.firstCreatePass&&mv(i),M=s[In],k=Ar(s);let G=!0;if(3&c.type||v){const ke=Ir(c,s),Qe=v?v(ke):ke,ct=k.length,Dt=v?kt=>v(Sn(kt[c.index])):c.index;let xe=null;if(!v&&I&&(xe=function kw(i,s,a,c){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===c){const I=s[ks],E=d[g+2];return I.length>E?I[E]:null}"string"==typeof v&&(g+=2)}return null}(i,s,d,c.index)),null!==xe)(xe.__ngLastListenerFn__||xe).__ngNextListenerFn__=g,xe.__ngLastListenerFn__=g,G=!1;else{g=Pv(c,s,M,g,!1);const kt=a.listen(Qe,d,g);k.push(g,kt),S&&S.push(d,Dt,ct,ct+1)}}else g=Pv(c,s,M,g,!1);const K=c.outputs;let fe;if(G&&null!==K&&(fe=K[d])){const ke=fe.length;if(ke)for(let Qe=0;Qe<ke;Qe+=2){const Ln=s[fe[Qe]][fe[Qe+1]].subscribe(g),Dn=k.length;k.push(g,Ln),S&&S.push(d,c.index,Dn,-(Dn+1))}}}(g,d,d[Ut],v,i,s,c),El}function Jo(i,s,a,c){try{return Jt(6,s,a),!1!==a(c)}catch(d){return za(i,d),!1}finally{Jt(7,s,a)}}function Pv(i,s,a,c,d){return function g(v){if(v===Function)return c;nm(i.componentOffset>-1?Wn(i.index,s):s);let E=Jo(s,a,c,v),S=g.__ngNextListenerFn__;for(;S;)E=Jo(s,a,S,v)&&E,S=S.__ngNextListenerFn__;return d&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function kv(i=1){return function Xl(i){return(At.lFrame.contextLView=function Jp(i,s){for(;i>0;)s=s[la],i--;return s}(i,At.lFrame.contextLView))[In]}(i)}function Jf(i,s,a){return Xf(i,"",s,"",a),Jf}function Xf(i,s,a,c,d){const g=Ce(),v=Qd(g,s,a,c);return v!==Ye&&$r(Wt(),gn(),g,i,v,g[Ut],d,!1),Xf}function ep(i,s){return i<<17|s<<2}function Xo(i){return i>>17&32767}function bl(i){return 2|i}function ea(i){return(131068&i)>>2}function mm(i,s){return-131069&i|s<<2}function ym(i){return 1|i}function $w(i,s,a,c,d){const g=i[a+1],v=null===s;let I=c?Xo(g):ea(g),E=!1;for(;0!==I&&(!1===E||v);){const M=i[I+1];gb(i[I],s)&&(E=!0,i[I+1]=c?ym(M):bl(M)),I=c?Xo(M):ea(M)}E&&(i[a+1]=c?bl(g):ym(g))}function gb(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Lr(i,s)>=0}function $v(i,s){return function is(i,s,a,c){const d=Ce(),g=Wt(),v=function li(i){const s=At.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function Gv(i,s,a,c){const d=i.data;if(null===d[a+1]){const g=d[Fr()],v=function Zw(i,s){return s>=i.expandoStartIndex}(i,a);(function Xu(i,s){return 0!=(i.flags&(s?8:16))})(g,c)&&null===s&&!v&&(s=!1),s=function _b(i,s,a,c){const d=function $s(i){const s=At.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=rh(a=Qu(null,i,s,a,c),s.attrs,c),g=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==d)if(a=Qu(d,i,s,a,c),null===g){let E=function wb(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==ea(c))return i[Xo(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=Qu(null,i,s,E[1],c),E=rh(E,s.attrs,c),function Ib(i,s,a,c){i[Xo(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else g=function Yu(i,s,a){let c;const d=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<d;g++)c=rh(c,i[g].hostAttrs,a);return rh(c,s.attrs,a)}(i,s,c)}return void 0!==g&&(c?s.residualClasses=g:s.residualStyles=g),a}(d,g,s,c),function jw(i,s,a,c,d,g){let v=g?s.classBindings:s.styleBindings,I=Xo(v),E=ea(v);i[c]=a;let M,S=!1;if(Array.isArray(a)?(M=a[1],(null===M||Lr(a,M)>0)&&(S=!0)):M=a,d)if(0!==E){const G=Xo(i[I+1]);i[c+1]=ep(G,I),0!==G&&(i[G+1]=mm(i[G+1],c)),i[I+1]=function tp(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=ep(I,0),0!==I&&(i[I+1]=mm(i[I+1],c)),I=c;else i[c+1]=ep(E,0),0===I?I=c:i[E+1]=mm(i[E+1],c),E=c;S&&(i[c+1]=bl(i[c+1])),$w(i,M,c,!0),$w(i,M,c,!1),function pb(i,s,a,c,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&Lr(g,s)>=0&&(a[c+1]=ym(a[c+1]))}(s,M,i,c,g),v=ep(I,E),g?s.classBindings=v:s.styleBindings=v}(d,g,s,a,v,c)}}(g,i,v,c),s!==Ye&&Hr(d,v,s)&&function qv(i,s,a,c,d,g,v,I){if(!(3&s.type))return;const E=i.data,S=E[I+1],M=function Bw(i){return 1==(1&i)}(S)?Ww(E,s,a,d,ea(S),v):void 0;np(M)||(np(g)||function gm(i){return 2==(2&i)}(S)&&(g=Ww(E,null,a,d,I,v)),function hn(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:Ts.DashCase;null==d?i.removeStyle(a,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Ts.Important),i.setStyle(a,c,d,g))}}(c,v,Ni(Fr(),a),d,g))}(g,g.data[Fr()],d,d[Ut],i,d[v+1]=function vm(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ue(es(i)))),i}(s,a),c,v)}(i,s,null,!0),$v}function Qu(i,s,a,c,d){let g=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(g=s[I],c=rh(c,g.hostAttrs,d),g!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function rh(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let g=0;g<s.length;g++){const v=s[g];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),An(i,v,!!a||s[++g]))}return void 0===i?null:i}function Ww(i,s,a,c,d,g){const v=null===s;let I;for(;d>0;){const E=i[d],S=Array.isArray(E),M=S?E[1]:E,k=null===M;let G=a[d+1];G===Ye&&(G=k?We:void 0);let K=k?Aa(G,c):M===c?G:void 0;if(S&&!np(K)&&(K=Aa(E,c)),np(K)&&(I=K,v))return I;const fe=i[d+1];d=v?Xo(fe):ea(fe)}if(null!==s){let E=g?s.residualClasses:s.residualStyles;null!=E&&(I=Aa(E,c))}return I}function np(i){return void 0!==i}function ec(i,s=""){const a=Ce(),c=Wt(),d=i+Ht,g=c.firstCreatePass?Gd(c,d,1,s,null):c.data[d],v=a[d]=function Kc(i,s){return i.createText(s)}(a[Ut],s);Td(c,a,v,g),Jr(g,!1)}function Ka(i){return tc("",i,""),Ka}function tc(i,s,a){const c=Ce(),d=Qd(c,i,s,a);return d!==Ye&&function Wo(i,s,a){const c=Ni(s,i);!function wd(i,s,a){i.setValue(s,a)}(i[Ut],c,a)}(c,Fr(),d),tc}const so=void 0;var rI=["en",[["a","p"],["AM","PM"],so],[["AM","PM"],so,so],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],so,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],so,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",so,"{1} 'at' {0}",so],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Rr={};function sh(i){const s=function Al(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Ya(s);if(a)return a;const c=s.split("-")[0];if(a=Ya(c),a)return a;if("en"===c)return rI;throw new de(701,!1)}function r_(i){return sh(i)[Ct.PluralCase]}function Ya(i){return i in Rr||(Rr[i]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[i]),Rr[i]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const xl="en-US";let iI=xl;function vp(i,s,a,c,d){if(i=Z(i),Array.isArray(i))for(let g=0;g<i.length;g++)vp(i[g],s,a,c,d);else{const g=Wt(),v=Ce();let I=Vu(i)?i:Z(i.provide),E=Wy(i);const S=Kn(),M=1048575&S.providerIndexes,k=S.directiveStart,G=S.providerIndexes>>20;if(Vu(i)||!i.multi){const K=new Ia(E,d,Hd),fe=gh(I,s,d?M:M+G,k);-1===fe?(Ro(Mo(S,v),g,I),ic(g,i,s.length),s.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(K),v.push(K)):(a[fe]=K,v[fe]=K)}else{const K=gh(I,s,M+G,k),fe=gh(I,s,M,M+G),Qe=fe>=0&&a[fe];if(d&&!Qe||!d&&!(K>=0&&a[K])){Ro(Mo(S,v),g,I);const ct=function __(i,s,a,c,d){const g=new Ia(i,a,Hd);return g.multi=[],g.index=s,g.componentProviders=0,Fm(g,d,c&&!a),g}(d?v_:_p,a.length,d,c,E);!d&&Qe&&(a[fe].providerFactory=ct),ic(g,i,s.length,0),s.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(ct),v.push(ct)}else ic(g,i,K>-1?K:fe,Fm(a[d?fe:K],E,!d&&c));!d&&c&&Qe&&a[fe].componentProviders++}}}function ic(i,s,a,c){const d=Vu(s),g=function qy(i){return!!i.useClass}(s);if(d||g){const E=(g?Z(s.useClass):s).prototype.ngOnDestroy;if(E){const S=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const M=S.indexOf(a);-1===M?S.push(a,[c,E]):S[M+1].push(c,E)}else S.push(a,E)}}}function Fm(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function gh(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function _p(i,s,a,c){return Lm(this.multi,[])}function v_(i,s,a,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=qs(a,a[rt],this.providerFactory.index,c);g=I.slice(0,v),Lm(d,g);for(let E=v;E<I.length;E++)g.push(I[E])}else g=[],Lm(d,g);return g}function Lm(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Vm(i,s=[]){return a=>{a.providersResolver=(c,d)=>function yp(i,s,a){const c=Wt();if(c.firstCreatePass){const d=wr(i);vp(a,c.data,c.blueprint,d,!0),vp(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class ji{}class w_{}function Wb(i,s){return new SI(i,s??null)}class SI extends ji{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cn(this);const c=Zn(s);this._bootstrapComponents=Je(c.bootstrap),this._r3Injector=Fi(s,a,[{provide:ji,useValue:this},{provide:ju,useValue:this.componentFactoryResolver}],ue(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class wp extends w_{constructor(s){super(),this.moduleType=s}create(s){return new SI(this.moduleType,s)}}class Kb extends ji{constructor(s,a,c){super(),this.componentFactoryResolver=new cn(this),this.instance=null;const d=new ew([...s,{provide:ji,useValue:this},{provide:ju,useValue:this.componentFactoryResolver}],a||Rf(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Ip(i,s,a=null){return new Kb(i,s,a).injector}let Um=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=J0(0,a.type),d=c.length>0?Ip([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=tt({token:i,providedIn:"environment",factory:()=>new i($e(jo))}),i})();function Bm(i){i.getStandaloneInjector=s=>s.get(Um).getOrCreateStandaloneInjector(i)}function Hm(i,s,a,c){return Gm(Ce(),On(),i,s,a,c)}function Ol(i,s,a,c,d){return function zm(i,s,a,c,d,g,v){const I=s+a;return function ro(i,s,a,c){const d=Hr(i,s,a);return Hr(i,s+1,c)||d}(i,I,d,g)?Ui(i,I+2,v?c.call(v,d,g):c(d,g)):Ep(i,I+2)}(Ce(),On(),i,s,a,c,d)}function Ep(i,s){const a=i[s];return a===Ye?void 0:a}function Gm(i,s,a,c,d,g){const v=s+a;return Hr(i,v,d)?Ui(i,v+1,g?c.call(g,d):c(d)):Ep(i,v+1)}function UI(i,s){const a=Wt();let c;const d=i+Ht;a.firstCreatePass?(c=function T_(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const g=c.factory||(c.factory=Qr(c.type)),v=Cn(Hd);try{const I=Ao(!1),E=g();return Ao(I),function Jd(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Ce(),d,E),E}finally{Cn(v)}}function jI(i,s,a){const c=i+Ht,d=Ce(),g=Oi(d,c);return function _h(i,s){return i[rt].data[s].pure}(d,c)?Gm(d,On(),s,g.transform,a,g):g.transform(a)}function S_(i){return s=>{setTimeout(i,void 0,s)}}const ta=class zI extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,g=a||(()=>null),v=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),g=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(g=S_(g),d&&(d=S_(d)),v&&(v=S_(v)));const I=super.subscribe({next:d,error:g,complete:v});return s instanceof Y.w0&&s.add(I),I}};function eC(){return this._results[Symbol.iterator]()}class A_{get changes(){return this._changes||(this._changes=new ta)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=A_.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=eC)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function Dr(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function ko(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],g=s[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pl=(()=>{class i{}return i.__NG_ELEMENT_ID__=tC,i})();const x_=Pl,M_=class extends x_{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tView,d=Zg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[go]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Wr];return null!==v&&(d[Wr]=v.createEmbeddedView(c)),dv(c,d,s),new qd(d)}};function tC(){return wh(Kn(),Ce())}function wh(i,s){return 4&i.type?new M_(s,i,ll(i,s)):null}let Wm=(()=>{class i{}return i.__NG_ELEMENT_ID__=R_,i})();function R_(){return Ym(Kn(),Ce())}const qI=Wm,Km=class extends qI{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return ll(this._hostTNode,this._hostLView)}get injector(){return new Er(this._hostTNode,this._hostLView)}get parentInjector(){const s=Is(this._hostTNode,this._hostLView);if(Vc(s)){const a=So(s,this._hostLView),c=To(s);return new Er(a[rt].data[c+8],a)}return new Er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=N_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(s,a,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=s.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(s,a,c,d,g){const v=s&&!function Qi(i){return"function"==typeof i}(s);let I;if(v)I=a;else{const k=a||{};I=k.index,c=k.injector,d=k.projectableNodes,g=k.environmentInjector||k.ngModuleRef}const E=v?s:new Zd(Zt(s)),S=c||this.parentInjector;if(!g&&null==E.ngModule){const G=(v?S:this.parentInjector).get(jo,null);G&&(g=G)}const M=E.create(S,d,void 0,g);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,d=c[rt];if(function ma(i){return Yr(i[ln])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=c[ln],G=new Km(k,k[pn],k[ln]);G.detach(G.indexOf(s))}}const g=this._adjustIndex(a),v=this._lContainer;!function Uy(i,s,a,c){const d=sr+c,g=a.length;c>0&&(a[d-1][Zr]=s),c<g-sr?(s[Zr]=a[d],jc(a,sr+c,s)):(a.push(s),s[Zr]=null),s[ln]=a;const v=s[go];null!==v&&a!==v&&function vg(i,s){const a=i[mo];s[ir]!==s[ln][ln][ir]&&(i[iu]=!0),null===a?i[mo]=[s]:a.push(s)}(v,s);const I=s[Wr];null!==I&&I.insertView(i),s[Pt]|=64}(d,c,v,g);const I=Sd(g,v),E=c[Ut],S=Cd(E,v[Vs]);return null!==S&&function Sr(i,s,a,c,d,g){c[oi]=d,c[pn]=s,eo(i,c,a,1,d,g)}(d,v[pn],E,c,S,I),s.attachToViewContainerRef(),jc(O_(v),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=N_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Df(this._lContainer,a);c&&(Sa(O_(this._lContainer),a),_g(c[rt],c))}detach(s){const a=this._adjustIndex(s,-1),c=Df(this._lContainer,a);return c&&null!=Sa(O_(this._lContainer),a)?new qd(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function N_(i){return i[ui]}function O_(i){return i[ui]||(i[ui]=[])}function Ym(i,s){let a;const c=s[i.index];if(Yr(c))a=c;else{let d;if(8&i.type)d=Sn(c);else{const g=s[Ut];d=g.createComment("");const v=Ir(i,s);ka(g,Cd(g,v),d,function Xc(i,s){return i.nextSibling(s)}(g,v),!1)}s[i.index]=a=Xg(c,s,d,i),Wu(s,a)}return new Km(a,i,s)}class P_{constructor(s){this.queryList=s,this.matches=null}clone(){return new P_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dp{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Dp(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Xm(s,a).matches&&this.queries[a].setDirty()}}class ZI{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class bp{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(s,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new bp(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class k_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new k_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(s,a,F_(a,g)),this.matchTNodeWithReadOption(s,a,wu(a,s,g,!1,!1))}else c===Pl?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,wu(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Ld||d===Wm||d===Pl&&4&a.type)this.addMatch(a.index,-2);else{const g=wu(a,s,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function F_(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function V_(i,s,a,c){return-1===a?function L_(i,s){return 11&i.type?ll(i,s):4&i.type?wh(i,s):null}(s,i):-2===a?function Ih(i,s,a){return a===Ld?ll(s,i):a===Pl?wh(s,i):a===Wm?Ym(s,i):void 0}(i,s,c):qs(i,i[rt],a,s)}function U_(i,s,a,c){const d=s[Wr].queries[c];if(null===d.matches){const g=i.data,v=a.matches,I=[];for(let E=0;E<v.length;E+=2){const S=v[E];I.push(S<0?null:V_(s,g[S],v[E+1],a.metadata.read))}d.matches=I}return d.matches}function Cp(i,s,a,c){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const v=U_(i,s,d,a);for(let I=0;I<g.length;I+=2){const E=g[I];if(E>0)c.push(v[I/2]);else{const S=g[I+1],M=s[-E];for(let k=sr;k<M.length;k++){const G=M[k];G[go]===G[ln]&&Cp(G[rt],G,S,c)}if(null!==M[mo]){const k=M[mo];for(let G=0;G<k.length;G++){const K=k[G];Cp(K[rt],K,S,c)}}}}}return c}function WI(i){const s=Ce(),a=Wt(),c=Rc();yu(c+1);const d=Xm(a,c);if(i.dirty&&function Tc(i){return 4==(4&i[Pt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?Cp(a,s,c,[]):U_(a,s,d,c);i.reset(g,Vd),i.notifyOnChanges()}return!0}return!1}function na(i,s,a,c){const d=Wt();if(d.firstCreatePass){const g=Kn();(function KI(i,s,a){null===i.queries&&(i.queries=new bp),i.queries.track(new k_(s,a))})(d,new ZI(s,a,c),g.index),function rC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Jm(i,s,a){const c=new A_(4==(4&a));fv(i,s,c,c.destroy),null===s[Wr]&&(s[Wr]=new Dp),s[Wr].queries.push(new P_(c))}(d,Ce(),a)}function Qm(){return function nC(i,s){return i[Wr].queries[s].queryList}(Ce(),Rc())}function Xm(i,s){return i.queries.getByIndex(s)}function ty(i){return!!Zn(i)}function Mp(...i){}const t0=new dn("Application Initializer");let vn=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Mp,this.reject=Mp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Xd(g))a.push(g);else if(Ow(g)){const v=new Promise((I,E)=>{g.subscribe({complete:I,error:E})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)($e(t0,8))},i.\u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Gr=new dn("AppId",{providedIn:"root",factory:function oo(){return`${n0()}${n0()}${n0()}`}});function n0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rp=new dn("Platform Initializer"),aE=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let r0=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ly=new dn("LocaleId",{providedIn:"root",factory:()=>at(ly,yt.Optional|yt.SkipSelf)||function wC(){return typeof $localize<"u"&&$localize.locale||xl}()}),Fn=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class cE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let IC=(()=>{class i{compileModuleSync(a){return new wp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=Je(Zn(a).declarations).reduce((v,I)=>{const E=Zt(I);return E&&v.push(new Zd(E)),v},[]);return new cE(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const CC=(()=>Promise.resolve(0))();function s0(i){typeof Zone>"u"?CC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ms{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ta(!1),this.onMicrotaskEmpty=new ta(!1),this.onStable=new ta(!1),this.onError=new ta(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function hE(){let i=Rt.requestAnimationFrame,s=Rt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function kl(i){const s=()=>{!function ES(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Th(i),i.isCheckStableRunning=!0,ao(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Th(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,v,I)=>{try{return fE(i),a.invokeTask(d,g,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),pE(i)}},onInvoke:(a,c,d,g,v,I,E)=>{try{return fE(i),a.invoke(d,g,v,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),pE(i)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,Th(i),ao(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ms.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Ms.isInAngularZone())throw new de(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,s,ia,Mp,Mp);try{return g.runTask(v,a,c)}finally{g.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const ia={};function ao(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Th(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function fE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function pE(i){i._nesting--,ao(i)}class gE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ta,this.onMicrotaskEmpty=new ta,this.onStable=new ta,this.onError=new ta}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const o0=new dn(""),Np=new dn("");let Fl,TC=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fl||(function hy(i){Fl=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ms.assertNotInAngularZone(),s0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())s0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)($e(Ms),$e(oc),$e(Np))},i.\u0275prov=tt({token:i,factory:i.\u0275fac}),i})(),oc=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Fl?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const sa=!1;let oa=null;const mE=new dn("AllowMultipleToken"),a0=new dn("PlatformDestroyListeners"),yE=new dn("appBootstrapListener");class Ll{constructor(s,a){this.name=s,this.token=a}}function EE(i,s,a=[]){const c=`Platform: ${s}`,d=new dn(c);return(g=[])=>{let v=Vl();if(!v||v.injector.get(mE,!1)){const I=[...a,...g,{provide:d,useValue:!0}];i?i(I):function wE(i){if(oa&&!oa.get(mE,!1))throw new de(400,!1);oa=i;const s=i.get(DE);(function fy(i){const s=i.get(Rp,null);s&&s.forEach(a=>a())})(i)}(function Op(i=[],s){return Ga.create({name:s,providers:[{provide:cl,useValue:"platform"},{provide:a0,useValue:new Set([()=>oa=null])},...i]})}(I,c))}return function gy(i){const s=Vl();if(!s)throw new de(401,!1);return s}()}}function Vl(){return oa?.get(DE)??null}let DE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function c0(i,s){let a;return a="noop"===i?new gE:("zone.js"===i?void 0:i)||new Ms(s),a}(c?.ngZone,function Pp(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Ms,useValue:d}];return d.run(()=>{const v=Ga.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(v),E=I.injector.get(Jn,null);if(!E)throw new de(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{ac(this._modules,I),S.unsubscribe()})}),function my(i,s,a){try{const c=a();return Xd(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const S=I.injector.get(vn);return S.runInitializers(),S.donePromise.then(()=>(function lp(i){et(i,"Expected localeId to be defined"),"string"==typeof i&&(iI=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(ly,xl)||xl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=Sh({},c);return function u0(i,s,a){const c=new wp(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(uo);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new de(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(a0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)($e(Ga))},i.\u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Sh(i,s){return Array.isArray(s)?s.reduce(Sh,i):{...i,...s}}let uo=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ms.assertNotInAngularZone(),s0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ms.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ee.T)(g,v.pipe((0,te.B)()))}bootstrap(a,c){const d=a instanceof Bu;if(!this._injector.get(vn).done){!d&&fs(a);throw new de(405,sa)}let v;v=d?a:this._injector.get(ju).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function _E(i){return i.isBoundToModule}(v)?void 0:this._injector.get(ji),S=v.create(Ga.NULL,[],c||v.selector,I),M=S.location.nativeElement,k=S.injector.get(o0,null);return k?.registerApplication(M),S.onDestroy(()=>{this.detachView(S.hostView),ac(this.components,S),k?.unregisterApplication(M)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ac(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(yE,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ac(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new de(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)($e(Ms),$e(jo),$e(Jn))},i.\u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ac(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function DS(){return!1}let AC=(()=>{class i{}return i.__NG_ELEMENT_ID__=xC,i})();function xC(i){return function yy(i,s,a){if(su(i)&&!a){const c=Wn(i.index,s);return new qd(c,c)}return 47&i.type?new qd(s[ir],s):null}(Kn(),Ce(),16==(16&i))}class Ja{constructor(){}supports(s){return Kd(s)}create(s){return new ME(s)}}const MC=(i,s)=>s;class ME{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||MC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const v=!c||a&&a.currentIndex<NE(c,d,g)?a:c,I=NE(v,d,g),E=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const S=I-d,M=E-d;if(S!=M){for(let G=0;G<S;G++){const K=G<g.length?g[G]:g[G]=0,fe=K+G;M<=fe&&fe<S&&(g[G]=K+1)}g[v.previousIndex]=M-S}}I!==E&&s(v,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Kd(s))throw new de(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,g,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)g=s[I],v=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,g,v,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,I),c=!0),a=a._next}else d=0,function Di(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,d)):s=this._addAfter(new RC(a,c),g,d),s}_verifyReinsertion(s,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?s=this._reinsertAfter(g,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,g=s._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new RE),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class RC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lc{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class RE{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new lc,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NE(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class OE{constructor(){}supports(s){return s instanceof Map||zf(s)}create(){return new NC}}class NC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||zf(s)))throw new de(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new OC(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class OC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function g0(){return new wy([new Ja])}let wy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||g0()),deps:[[i,new D,new ft]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new de(901,!1)}}return i.\u0275prov=tt({token:i,providedIn:"root",factory:g0}),i})();function PE(){return new Iy([new OE])}let Iy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||PE()),deps:[[i,new D,new ft]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new de(901,!1)}}return i.\u0275prov=tt({token:i,providedIn:"root",factory:PE}),i})();const kC=EE(null,"core",[]);let FC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)($e(uo))},i.\u0275mod=nu({type:i}),i.\u0275inj=Bn({}),i})();function LC(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(mt,De,P)=>{P.d(De,{Z:()=>Ge});var h=P(2090),Y=P(4859),O=P(9681),ee=P(1877);class te{constructor(de,Ie){this._delegate=de,this.firebase=Ie,(0,O._addComponent)(de,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,Ie=O._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(de);return!Pe.isInitialized()&&"EXPLICIT"===(null===(Ee=Pe.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:Ie})}_removeServiceInstance(de,Ie=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Ie)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ae(){const lt=function ue(lt){const de={},Ie={__esModule:!0,initializeApp:function _e(Me,V={}){const ge=O.initializeApp(Me,V);if((0,h.r3)(de,ge.name))return de[ge.name];const Ve=new lt(ge,Ie);return de[ge.name]=Ve,Ve},app:Pe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Te(Me){const V=Me.name,ge=V.replace("-compat","");if(O._registerComponent(Me)&&"PUBLIC"===Me.type){const Ve=(Ze=Pe())=>{if("function"!=typeof Ze[ge])throw le.create("invalid-app-argument",{appName:V});return Ze[ge]()};void 0!==Me.serviceProps&&(0,h.ZB)(Ve,Me.serviceProps),Ie[ge]=Ve,lt.prototype[ge]=function(...Ze){return this._getService.bind(this,V).apply(this,Me.multipleInstances?Ze:[])}}return"PUBLIC"===Me.type?Ie[ge]:null},removeApp:function Ee(Me){delete de[Me]},useAsService:function Fe(Me,V){return"serverAuth"===V?null:V},modularAPIs:O}};function Pe(Me){if(!(0,h.r3)(de,Me=Me||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Me});return de[Me]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function ye(){return Object.keys(de).map(Me=>de[Me])}}),Pe.App=lt,Ie}(te);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function de(Ie){(0,h.ZB)(lt,Ie)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),lt}(),j=new ee.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=B;!function we(lt){(0,O.registerVersion)("@firebase/app-compat","0.2.7",lt)}()},9681:(mt,De,P)=>{P.r(De),P.d(De,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>ii,_DEFAULT_ENTRY_NAME:()=>Oe,_addComponent:()=>nn,_addOrOverwriteComponent:()=>It,_apps:()=>et,_clearComponents:()=>Bn,_components:()=>Ke,_getProvider:()=>tt,_registerComponent:()=>Kt,_removeServiceInstance:()=>Tt,deleteApp:()=>ds,getApp:()=>si,getApps:()=>zr,initializeApp:()=>Rs,onLog:()=>yt,registerVersion:()=>qr,setLogLevel:()=>hs});var h=P(5861),Y=P(4859),O=P(1877),ee=P(2090),te=P(8766);class ne{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(at=>{if(function le($e){return"VERSION"===$e.getComponent()?.type}(at)){const bt=at.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(at=>at).join(" ")}}const ue="@firebase/app",B=new O.Yd("@firebase/app"),Oe="[DEFAULT]",Be={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,Ke=new Map;function nn($e,ve){try{$e.container.addComponent(ve)}catch(at){B.debug(`Component ${ve.name} failed to register with FirebaseApp ${$e.name}`,at)}}function It($e,ve){$e.container.addOrOverwriteComponent(ve)}function Kt($e){const ve=$e.name;if(Ke.has(ve))return B.debug(`There were multiple attempts to register component ${ve}.`),!1;Ke.set(ve,$e);for(const at of et.values())nn(at,$e);return!0}function tt($e,ve){const at=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return at&&at.triggerHeartbeat(),$e.container.getProvider(ve)}function Tt($e,ve,at=Oe){tt($e,ve).clearInstance(at)}function Bn(){Ke.clear()}const _n=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class bn{constructor(ve,at,bt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},at),this._name=at.name,this._automaticDataCollectionEnabled=at.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}const ii="9.19.1";function Rs($e,ve={}){let at=$e;"object"!=typeof ve&&(ve={name:ve});const bt=Object.assign({name:Oe,automaticDataCollectionEnabled:!1},ve),xt=bt.name;if("string"!=typeof xt||!xt)throw _n.create("bad-app-name",{appName:String(xt)});if(at||(at=(0,ee.aH)()),!at)throw _n.create("no-options");const Lt=et.get(xt);if(Lt){if((0,ee.vZ)(at,Lt.options)&&(0,ee.vZ)(bt,Lt.config))return Lt;throw _n.create("duplicate-app",{appName:xt})}const vr=new Y.H0(xt);for(const L of Ke.values())vr.addComponent(L);const U=new bn(at,bt,vr);return et.set(xt,U),U}function si($e=Oe){const ve=et.get($e);if(!ve&&$e===Oe)return Rs();if(!ve)throw _n.create("no-app",{appName:$e});return ve}function zr(){return Array.from(et.values())}function ds($e){return wn.apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*($e){const ve=$e.name;et.has(ve)&&(et.delete(ve),yield Promise.all($e.container.getProviders().map(at=>at.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function qr($e,ve,at){var bt;let xt=null!==(bt=Be[$e])&&void 0!==bt?bt:$e;at&&(xt+=`-${at}`);const Lt=xt.match(/\s|\//),vr=ve.match(/\s|\//);if(Lt||vr){const U=[`Unable to register library "${xt}" with version "${ve}":`];return Lt&&U.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Lt&&vr&&U.push("and"),vr&&U.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void B.warn(U.join(" "))}Kt(new Y.wA(`${xt}-version`,()=>({library:xt,version:ve}),"VERSION"))}function yt($e,ve){if(null!==$e&&"function"!=typeof $e)throw _n.create("invalid-log-argument");(0,O.Am)($e,ve)}function hs($e){(0,O.Ub)($e)}const mi="firebase-heartbeat-database",Cn=1,mr="firebase-heartbeat-store";let Ns=null;function Rt(){return Ns||(Ns=(0,te.X3)(mi,Cn,{upgrade:($e,ve)=>{0===ve&&$e.createObjectStore(mr)}}).catch($e=>{throw _n.create("idb-open",{originalErrorMessage:$e.message})})),Ns}function St(){return(St=(0,h.Z)(function*($e){try{return(yield Rt()).transaction(mr).objectStore(mr).get(jn($e))}catch(ve){if(ve instanceof ee.ZR)B.warn(ve.message);else{const at=_n.create("idb-get",{originalErrorMessage:ve?.message});B.warn(at.message)}}})).apply(this,arguments)}function Os($e,ve){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*($e,ve){try{const bt=(yield Rt()).transaction(mr,"readwrite");return yield bt.objectStore(mr).put(ve,jn($e)),bt.done}catch(at){if(at instanceof ee.ZR)B.warn(at.message);else{const bt=_n.create("idb-set",{originalErrorMessage:at?.message});B.warn(bt.message)}}})).apply(this,arguments)}function jn($e){return`${$e.name}!${$e.options.appId}`}class ua{constructor(ve){this.container=ve,this._heartbeatsCache=null;const at=this.container.getProvider("app").getImmediate();this._storage=new qt(at),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var ve=this;return(0,h.Z)(function*(){const bt=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=rn();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==xt&&!ve._heartbeatsCache.heartbeats.some(Lt=>Lt.date===xt))return ve._heartbeatsCache.heartbeats.push({date:xt,agent:bt}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(Lt=>{const vr=new Date(Lt.date).valueOf();return Date.now()-vr<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,h.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const at=rn(),{heartbeatsToSend:bt,unsentEntries:xt}=function Gi($e,ve=1024){const at=[];let bt=$e.slice();for(const xt of $e){const Lt=at.find(vr=>vr.agent===xt.agent);if(Lt){if(Lt.dates.push(xt.date),Pr(at)>ve){Lt.dates.pop();break}}else if(at.push({agent:xt.agent,dates:[xt.date]}),Pr(at)>ve){at.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:at,unsentEntries:bt}}(ve._heartbeatsCache.heartbeats),Lt=(0,ee.L)(JSON.stringify({version:2,heartbeats:bt}));return ve._heartbeatsCache.lastSentHeartbeatDate=at,xt.length>0?(ve._heartbeatsCache.heartbeats=xt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),Lt})()}}function rn(){return(new Date).toISOString().substring(0,10)}class qt{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,h.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function _t($e){return St.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var at=this;return(0,h.Z)(function*(){var bt;if(yield at._canUseIndexedDBPromise){const Lt=yield at.read();return Os(at.app,{lastSentHeartbeatDate:null!==(bt=ve.lastSentHeartbeatDate)&&void 0!==bt?bt:Lt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var at=this;return(0,h.Z)(function*(){var bt;if(yield at._canUseIndexedDBPromise){const Lt=yield at.read();return Os(at.app,{lastSentHeartbeatDate:null!==(bt=ve.lastSentHeartbeatDate)&&void 0!==bt?bt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...ve.heartbeats]})}})()}}function Pr($e){return(0,ee.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Ai($e){Kt(new Y.wA("platform-logger",ve=>new ne(ve),"PRIVATE")),Kt(new Y.wA("heartbeat",ve=>new ua(ve),"PRIVATE")),qr(ue,"0.9.7",$e),qr(ue,"0.9.7","esm2017"),qr("fire-js","")}("")},4859:(mt,De,P)=>{P.d(De,{H0:()=>ue,wA:()=>O});var h=P(5861),Y=P(2090);class O{constructor(B,j,Z){this.name=B,this.instanceFactory=j,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ee="[DEFAULT]";class te{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Z=new Y.BH;if(this.instancesDeferred.set(j,Z),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:j});Ue&&Z.resolve(Ue)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Z=this.normalizeInstanceIdentifier(B?.identifier),Ue=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(we){if(Ue)return null;throw we}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(ae){return"EAGER"===ae.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[j,Z]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(j);try{const we=this.getOrInitializeService({instanceIdentifier:Ue});Z.resolve(we)}catch{}}}}clearInstance(B=ee){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,h.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...j.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ee){return this.instances.has(B)}getOptions(B=ee){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Z=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Z,options:j});for(const[we,Ge]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(we)&&Ge.resolve(Ue);return Ue}onInit(B,j){var Z;const Ue=this.normalizeInstanceIdentifier(j),we=null!==(Z=this.onInitCallbacks.get(Ue))&&void 0!==Z?Z:new Set;we.add(B),this.onInitCallbacks.set(Ue,we);const Ge=this.instances.get(Ue);return Ge&&B(Ge,Ue),()=>{we.delete(B)}}invokeOnInitCallbacks(B,j){const Z=this.onInitCallbacks.get(j);if(Z)for(const Ue of Z)try{Ue(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Z=this.instances.get(B);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=B,ae===ee?void 0:ae),options:j}),this.instances.set(B,Z),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Z,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Z)}catch{}var ae;return Z||null}normalizeInstanceIdentifier(B=ee){return this.component?this.component.multipleInstances?B:ee:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new te(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,De,P)=>{P.d(De,{Am:()=>ae,Ub:()=>ue,Yd:()=>le,in:()=>Y});const h=[];var Y=(()=>{return(B=Y||(Y={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Y;var B})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ee=Y.INFO,te={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ne=(B,j,...Z)=>{if(j<B.logLevel)return;const Ue=(new Date).toISOString(),we=te[j];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[we](`[${Ue}]  ${B.name}:`,...Z)};class le{constructor(j){this.name=j,this._logLevel=ee,this._logHandler=ne,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Y))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...j),this._logHandler(this,Y.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...j),this._logHandler(this,Y.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...j),this._logHandler(this,Y.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...j),this._logHandler(this,Y.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...j),this._logHandler(this,Y.ERROR,...j)}}function ue(B){h.forEach(j=>{j.setLogLevel(B)})}function ae(B,j){for(const Z of h){let Ue=null;j&&j.level&&(Ue=O[j.level]),Z.userLogHandler=null===B?null:(we,Ge,...lt)=>{const de=lt.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch{return null}}).filter(Ie=>Ie).join(" ");Ge>=(Ue??we.logLevel)&&B({level:Y[Ge].toLowerCase(),message:de,args:lt,type:we.name})}}}},259:(mt,De,P)=>{P.d(De,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=P(9681);(0,h.registerVersion)("firebase","9.19.1","app")},9260:(mt,De,P)=>{P.d(De,{Z:()=>h.Z});var h=P(3942);h.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(mt,De,P)=>{P.r(De);var h=P(5861),Y=P(3942),O=P(2090),ee=P(9681),te=P(1877),ne=P(655),le=P(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z_EMAIL_SIGNIN="EMAIL_SIGNIN",Z_PASSWORD_RESET="PASSWORD_RESET",Z_RECOVER_EMAIL="RECOVER_EMAIL",Z_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Z_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Z_VERIFY_EMAIL="VERIFY_EMAIL";const Ge=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},lt=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new te.Yd("@firebase/auth");function Pe(y,...f){Ee.logLevel<=te.in.ERROR&&Ee.error(`Auth (${ee.SDK_VERSION}): ${y}`,...f)}function _e(y,...f){throw Me(y,...f)}function ye(y,...f){return Me(y,...f)}function Te(y,f,p){const _=Object.assign(Object.assign({},lt()),{[f]:p});return new O.LL("auth","Firebase",_).create(f,{appName:y.name})}function Fe(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&_e(y,"argument-error"),Te(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Me(y,...f){if("string"!=typeof y){const p=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return de.create(y,...f)}function V(y,f,...p){if(!y)throw Me(f,...p)}function ge(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Pe(f),new Error(f)}function Ve(y,f){y||ge(f)}const Ze=new Map;function pt(y){Ve(y instanceof Function,"Expected a class definition");let f=Ze.get(y);return f?(Ve(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Ze.set(y,f),f)}function ce(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function me(){return"http:"===Se()||"https:"===Se()}function Se(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class et{constructor(f,p){this.shortDelay=f,this.longDelay=p,Ve(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Oe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(me()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ke(y,f){Ve(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class nn{static initialize(f,p,_){this.fetchImpl=f,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const It={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new et(3e4,6e4);function tt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Tt(y,f,p,_){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,h.Z)(function*(y,f,p,_,T={}){return an(y,T,(0,h.Z)(function*(){let R={},H={};_&&("GET"===f?H=_:R={body:JSON.stringify(_)});const oe=(0,O.xO)(Object.assign({key:y.config.apiKey},H)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),nn.fetch()(Rs(y,y.config.apiHost,p,oe),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function an(y,f,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(y,f,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},It),f);try{const T=new si(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const H=yield R.json();if("needConfirmation"in H)throw zr(y,"account-exists-with-different-credential",H);if(R.ok&&!("errorMessage"in H))return H;{const oe=R.ok?H.errorMessage:H.error.message,[Le,ot]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw zr(y,"credential-already-in-use",H);if("EMAIL_EXISTS"===Le)throw zr(y,"email-already-in-use",H);if("USER_DISABLED"===Le)throw zr(y,"user-disabled",H);const He=_[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw Te(y,He,ot);_e(y,He)}}catch(T){if(T instanceof O.ZR)throw T;_e(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function bn(y,f,p,_){return ii.apply(this,arguments)}function ii(){return(ii=(0,h.Z)(function*(y,f,p,_,T={}){const R=yield Tt(y,f,p,_,T);return"mfaPendingCredential"in R&&_e(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Rs(y,f,p,_){const T=`${f}${p}?${_}`;return y.config.emulator?Ke(y.config,T):`${y.config.apiScheme}://${T}`}class si{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ye(this.auth,"network-request-failed")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zr(y,f,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const T=ye(y,f,_);return T.customData._tokenResponse=p,T}function wn(){return(wn=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function yt(){return(yt=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function mi(){return(mi=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Cn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Rt(){return(Rt=(0,h.Z)(function*(y,f=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(f),T=St(_);V(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,H=R?.sign_in_provider;return{claims:T,token:_,authTime:Cn(_t(T.auth_time)),issuedAtTime:Cn(_t(T.iat)),expirationTime:Cn(_t(T.exp)),signInProvider:H||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(y){return 1e3*Number(y)}function St(y){const[f,p,_]=y.split(".");if(void 0===f||void 0===p||void 0===_)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Pe("Failed to decode base64 JWT payload"),null)}catch(T){return Pe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function fn(y,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,h.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(_){throw _ instanceof O.ZR&&function Or({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class yr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield p.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class ua{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cn(this.lastLoginAt),this.creationTime=Cn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(y){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,h.Z)(function*(y){var f;const p=y.auth,_=yield y.getIdToken(),T=yield fn(y,function hs(y,f){return mi.apply(this,arguments)}(p,{idToken:_}));V(T?.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const H=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?function $e(y){return y.map(f=>{var{providerId:p}=f,_=(0,ne._T)(f,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(R.providerUserInfo):[],oe=function Ai(y,f){return[...y.filter(_=>!f.some(T=>T.providerId===_.providerId)),...f]}(y.providerData,H),He=!!y.isAnonymous&&!(y.email&&R.passwordHash||oe?.length),dt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:oe,metadata:new ua(R.createdAt,R.lastLoginAt),isAnonymous:He};Object.assign(y,dt)}),Gi.apply(this,arguments)}function Pr(){return(Pr=(0,h.Z)(function*(y){const f=(0,O.m9)(y);yield rn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function at(){return(at=(0,h.Z)(function*(y,f){const p=yield an(y,{},(0,h.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,H=Rs(y,T,"/v1/token",`key=${R}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(H,{method:"POST",headers:oe,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){V(f.idToken,"internal-error"),V(typeof f.idToken<"u","internal-error"),V(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Os(y){const f=St(y);return V(f,"internal-error"),V(typeof f.exp<"u","internal-error"),V(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var _=this;return(0,h.Z)(function*(){return V(!_.accessToken||_.refreshToken,f,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var _=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:H}=yield function ve(y,f){return at.apply(this,arguments)}(f,p);_.updateTokensAndExpiration(T,R,Number(H))})()}updateTokensAndExpiration(f,p,_){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,p){const{refreshToken:_,accessToken:T,expirationTime:R}=p,H=new bt;return _&&(V("string"==typeof _,"internal-error",{appName:f}),H.refreshToken=_),T&&(V("string"==typeof T,"internal-error",{appName:f}),H.accessToken=T),R&&(V("number"==typeof R,"internal-error",{appName:f}),H.expirationTime=R),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return ge("not implemented")}}function xt(y,f){V("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Lt{constructor(f){var{uid:p,auth:_,stsTokenManager:T}=f,R=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ua(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,h.Z)(function*(){const _=yield fn(p,p.stsTokenManager.getToken(p.auth,f));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(f){return function Ns(y){return Rt.apply(this,arguments)}(this,f)}reload(){return function qt(y){return Pr.apply(this,arguments)}(this)}_assign(f){this!==f&&(V(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Lt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var _=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield rn(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const p=yield f.getIdToken();return yield fn(f,function ds(y,f){return wn.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var _,T,R,H,oe,Le,ot,He;const dt=null!==(_=p.displayName)&&void 0!==_?_:void 0,xn=null!==(T=p.email)&&void 0!==T?T:void 0,Ur=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,il=null!==(H=p.photoURL)&&void 0!==H?H:void 0,Tg=null!==(oe=p.tenantId)&&void 0!==oe?oe:void 0,Sg=null!==(Le=p._redirectEventId)&&void 0!==Le?Le:void 0,$y=null!==(ot=p.createdAt)&&void 0!==ot?ot:void 0,Nd=null!==(He=p.lastLoginAt)&&void 0!==He?He:void 0,{uid:sl,emailVerified:ol,isAnonymous:Vo,providerData:al,stsTokenManager:Af}=p;V(sl&&Af,f,"internal-error");const Ag=bt.fromJSON(this.name,Af);V("string"==typeof sl,f,"internal-error"),xt(dt,f.name),xt(xn,f.name),V("boolean"==typeof ol,f,"internal-error"),V("boolean"==typeof Vo,f,"internal-error"),xt(Ur,f.name),xt(il,f.name),xt(Tg,f.name),xt(Sg,f.name),xt($y,f.name),xt(Nd,f.name);const Uo=new Lt({uid:sl,auth:f,email:xn,emailVerified:ol,displayName:dt,isAnonymous:Vo,photoURL:il,phoneNumber:Ur,tenantId:Tg,stsTokenManager:Ag,createdAt:$y,lastLoginAt:Nd});return al&&Array.isArray(al)&&(Uo.providerData=al.map(Hy=>Object.assign({},Hy))),Sg&&(Uo._redirectEventId=Sg),Uo}static _fromIdTokenResponse(f,p,_=!1){return(0,h.Z)(function*(){const T=new bt;T.updateFromServerResponse(p);const R=new Lt({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:_});return yield rn(R),R})()}}const U=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(p,_){var T=this;return(0,h.Z)(function*(){T.storage[p]=_})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=_.storage[p];return void 0===T?null:T})()}_remove(p){var _=this;return(0,h.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function L(y,f,p){return`firebase:${y}:${f}:${p}`}class z{constructor(f,p,_){this.persistence=f,this.auth=p,this.userKey=_;const{config:T,name:R}=this.auth;this.fullUserKey=L(this.userKey,T.apiKey,R),this.fullPersistenceKey=L("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Lt._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,h.Z)(function*(){if(p.persistence===f)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,_="authUser"){return(0,h.Z)(function*(){if(!p.length)return new z(pt(U),f,_);const T=(yield Promise.all(p.map(function(){var ot=(0,h.Z)(function*(He){if(yield He._isAvailable())return He});return function(He){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let R=T[0]||pt(U);const H=L(_,f.config.apiKey,f.name);let oe=null;for(const ot of p)try{const He=yield ot._get(H);if(He){const dt=Lt._fromJSON(f,He);ot!==R&&(oe=dt),R=ot;break}}catch{}const Le=T.filter(ot=>ot._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],oe&&(yield R._set(H,oe.toJSON())),yield Promise.all(p.map(function(){var ot=(0,h.Z)(function*(He){if(He!==R)try{yield He._remove(H)}catch{}});return function(He){return ot.apply(this,arguments)}}())),new z(R,f,_)):new z(R,f,_)})()}}function he(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(on(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(J(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Rn(f))return"Blackberry";if(qn(f))return"Webos";if(nt(f))return"Safari";if((f.includes("chrome/")||We(f))&&!f.includes("edge/"))return"Chrome";if(Tn(f))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function J(y=(0,O.z$)()){return/firefox\//i.test(y)}function nt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function We(y=(0,O.z$)()){return/crios\//i.test(y)}function on(y=(0,O.z$)()){return/iemobile/i.test(y)}function Tn(y=(0,O.z$)()){return/android/i.test(y)}function Rn(y=(0,O.z$)()){return/blackberry/i.test(y)}function qn(y=(0,O.z$)()){return/webos/i.test(y)}function Ot(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Hh(y=(0,O.z$)()){return Ot(y)||Tn(y)||qn(y)||Rn(y)||/windows phone/i.test(y)||on(y)}function tu(y,f=[]){let p;switch(y){case"Browser":p=he((0,O.z$)());break;case"Worker":p=`${he((0,O.z$)())}-${y}`;break;default:p=y}const _=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ee.SDK_VERSION}/${_}`}class nu{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const _=R=>new Promise((H,oe)=>{try{H(f(R))}catch(Le){oe(Le)}});_.onAbort=p,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,h.Z)(function*(){if(p.auth.currentUser===f)return;const _=[];try{for(const T of p.queue)yield T(f),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const R of _)try{R()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Gh{constructor(f,p,_){this.app=f,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mc(this),this.idTokenSubscription=new mc(this),this.beforeStateQueue=new nu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(f,p){var _=this;return p&&(this._popupRedirectResolver=pt(p)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,R;if(!_._deleted&&(_.persistenceManager=yield z.create(_,f),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,h.Z)(function*(){var _;const T=yield p.assertedPersistence.getCurrentUser();let R=T,H=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const oe=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Le=R?._redirectEventId,ot=yield p.tryRedirectSignIn(f);(!oe||oe===Le)&&ot?.user&&(R=ot.user,H=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(H)try{yield p.beforeStateQueue.runMiddleware(R)}catch(oe){R=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(oe))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var p=this;return(0,h.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,h.Z)(function*(){try{yield rn(f)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Be(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,h.Z)(function*(){const _=f?(0,O.m9)(f):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(f,p=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&V(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,h.Z)(function*(){yield p.assertedPersistence.setPersistence(pt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,p,_){return this.registerStateListener(this.authStateSubscription,f,p,_)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,_){return this.registerStateListener(this.idTokenSubscription,f,p,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var _=this;return(0,h.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,h.Z)(function*(){if(!p.redirectPersistenceManager){const _=f&&pt(f)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield z.create(p,[pt(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,h.Z)(function*(){var _,T;return p._isInitialized&&(yield p.queue((0,h.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,h.Z)(function*(){if(f===p.currentUser)return p.queue((0,h.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,_,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),H=this._isInitialized?Promise.resolve():this._initializationPromise;return V(H,this,"internal-error"),H.then(()=>R(this.currentUser)),"function"==typeof p?f.addObserver(p,_,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,h.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=tu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var p;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(_["X-Firebase-Client"]=T),_})()}}function Nn(y){return(0,O.m9)(y)}class mc{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zt(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function rr(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Zn{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(f){return ge("not implemented")}_linkToIdToken(f,p){return ge("not implemented")}_getReauthenticationResolver(f){return ge("not implemented")}}function _r(y,f){return ru.apply(this,arguments)}function ru(){return(ru=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:resetPassword",tt(y,f))})).apply(this,arguments)}function Ps(y,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",tt(y,f))})).apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signInWithPassword",tt(y,f))})).apply(this,arguments)}function Mi(y,f){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:sendOobCode",tt(y,f))})).apply(this,arguments)}function In(){return(In=(0,h.Z)(function*(y,f){return Mi(y,f)})).apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(y,f){return Mi(y,f)})).apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(y,f){return Mi(y,f)})).apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(y,f){return Mi(y,f)})).apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signInWithEmailLink",tt(y,f))})).apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signInWithEmailLink",tt(y,f))})).apply(this,arguments)}class Wr extends Zn{constructor(f,p,_,T=null){super("password",_),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new Wr(f,p,"password")}static _fromEmailAndCode(f,p,_=null){return new Wr(f,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,h.Z)(function*(){switch(p.signInMethod){case"password":return function ln(y,f){return Zr.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function la(y,f){return ir.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:_e(f,"internal-error")}})()}_linkToIdToken(f,p){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return Ps(f,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function go(y,f){return Ls.apply(this,arguments)}(f,{idToken:p,email:_._email,oobCode:_._password});default:_e(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ai(y,f){return vc.apply(this,arguments)}function vc(){return(vc=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signInWithIdp",tt(y,f))})).apply(this,arguments)}class qi extends Zn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new qi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):_e("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T}=p,R=(0,ne._T)(p,["providerId","signInMethod"]);if(!_||!T)return null;const H=new qi(_,T);return H.idToken=R.idToken||void 0,H.accessToken=R.accessToken||void 0,H.secret=R.secret,H.nonce=R.nonce,H.pendingToken=R.pendingToken||null,H}_getIdTokenResponse(f){return ai(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,ai(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ai(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,O.xO)(p)}return f}}function iu(){return(iu=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:sendVerificationCode",tt(y,f))})).apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signInWithPhoneNumber",tt(y,f))})).apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(y,f){const p=yield bn(y,"POST","/v1/accounts:signInWithPhoneNumber",tt(y,f));if(p.temporaryProof)throw zr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const zp={USER_NOT_FOUND:"user-not-found"};function Yr(){return(Yr=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signInWithPhoneNumber",tt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),zp)})).apply(this,arguments)}class Zi extends Zn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Zi({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Zi({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Vs(y,f){return ui.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function mo(y,f){return sr.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Kr(y,f){return Yr.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:_,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:_,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:R}=f;return _||p||T||R?new Zi({verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:R}):null}}class wr{constructor(f){var p,_,T,R,H,oe;const Le=(0,O.zd)((0,O.pd)(f)),ot=null!==(p=Le.apiKey)&&void 0!==p?p:null,He=null!==(_=Le.oobCode)&&void 0!==_?_:null,dt=function su(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Le.mode)&&void 0!==T?T:null);V(ot&&He&&dt,"argument-error"),this.apiKey=ot,this.operation=dt,this.code=He,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(H=Le.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const p=function ps(y){const f=(0,O.zd)((0,O.pd)(y)).link,p=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||f||y}(f);try{return new wr(p)}catch{return null}}}let Hl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return Wr._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const T=wr.parseLink(_);return V(T,"argument-error"),Wr._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Wi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Us extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class da extends Us{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return V("providerId"in p&&"signInMethod"in p,"argument-error"),qi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return V(f.idToken||f.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return da.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return da.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:R,nonce:H,providerId:oe}=f;if(!_&&!T&&!p&&!R||!oe)return null;try{return new da(oe)._credential({idToken:p,accessToken:_,nonce:H,pendingToken:R})}catch{return null}}}let wc=(()=>{class y extends Us{constructor(){super("facebook.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),zh=(()=>{class y extends Us{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:T}=p;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),qh=(()=>{class y extends Us{constructor(){super("github.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class yo extends Zn{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return ai(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,ai(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ai(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T,pendingToken:R}=p;return _&&T&&R&&_===T?new yo(_,R):null}static _create(f,p){return new yo(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ri extends Wi{constructor(f){V(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ri.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ri.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=yo.fromJSON(f);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:_}=f;if(!p||!_)return null;try{return yo._create(_,p)}catch{return null}}}let Zp=(()=>{class y extends Us{constructor(){super("twitter.com")}static credential(p,_){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=p;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ic(y,f){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signUp",tt(y,f))})).apply(this,arguments)}class ci{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,_,T=!1){return(0,h.Z)(function*(){const R=yield Lt._fromIdTokenResponse(f,_,T),H=Dc(_);return new ci({user:R,providerId:H,_tokenResponse:_,operationType:p})})()}static _forOperation(f,p,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const T=Dc(_);return new ci({user:f,providerId:T,_tokenResponse:_,operationType:p})})()}}function Dc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Zh(){return(Zh=(0,h.Z)(function*(y){var f;const p=Nn(y);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new ci({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield Ic(p,{returnSecureToken:!0}),T=yield ci._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class au extends O.ZR{constructor(f,p,_,T){var R;super(p.code,p.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,au.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,p,_,T){return new au(f,p,_,T)}}function Wp(y,f,p,_){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?au._fromErrorAndOperation(y,R,f,_):R})}function Qr(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function js(){return js=(0,h.Z)(function*(y,f){const p=(0,O.m9)(y);yield _o(!0,p,f);const{providerUserInfo:_}=yield function qr(y,f){return yt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=Qr(_||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),js.apply(this,arguments)}function ha(y,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,h.Z)(function*(y,f,p=!1){const _=yield fn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return ci._forOperation(y,"link",_)})).apply(this,arguments)}function _o(y,f,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(y,f,p){yield rn(f);const T=!1===y?"provider-already-linked":"no-such-provider";V(Qr(f.providerData).has(p)===y,f.auth,T)})).apply(this,arguments)}function bc(y,f){return uu.apply(this,arguments)}function uu(){return(uu=(0,h.Z)(function*(y,f,p=!1){const{auth:_}=y,T="reauthenticate";try{const R=yield fn(y,Wp(_,T,f,y),p);V(R.idToken,_,"internal-error");const H=St(R.idToken);V(H,_,"internal-error");const{sub:oe}=H;return V(y.uid===oe,_,"user-mismatch"),ci._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===R?.code&&_e(_,"user-mismatch"),R}})).apply(this,arguments)}function gs(y,f){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(y,f,p=!1){const _="signIn",T=yield Wp(y,_,f),R=yield ci._fromIdTokenResponse(y,_,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Jt(y,f){return cu.apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(y,f){return gs(Nn(y),f)})).apply(this,arguments)}function pa(y,f){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(y,f){const p=(0,O.m9)(y);return yield _o(!1,p,f.providerId),ha(p,f)})).apply(this,arguments)}function lu(y,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(y,f){return bc((0,O.m9)(y),f)})).apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(y,f){return bn(y,"POST","/v1/accounts:signInWithCustomToken",tt(y,f))})).apply(this,arguments)}function Oi(){return Oi=(0,h.Z)(function*(y,f){const p=Nn(y),_=yield function Ir(y,f){return ga.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),T=yield ci._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(T.user),T}),Oi.apply(this,arguments)}class Wn{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?Tc._fromServerResponse(f,p):"totpInfo"in p?wo._fromServerResponse(f,p):_e(f,"internal-error")}}class Tc extends Wn{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new Tc(p)}}class wo extends Wn{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new wo(p)}}function ma(y,f,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function Io(){return Io=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};p&&ma(_,T,p),yield function zi(y,f){return ca.apply(this,arguments)}(_,T)}),Io.apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(y,f,p){yield _r((0,O.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function du(){return du=(0,h.Z)(function*(y,f){yield function rt(y,f){return Pt.apply(this,arguments)}((0,O.m9)(y),{oobCode:f})}),du.apply(this,arguments)}function Zl(y,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(y,f){const p=(0,O.m9)(y),_=yield _r(p,{oobCode:f}),T=_.requestType;switch(V(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=Wn._fromServerResponse(Nn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(y,f){const{data:p}=yield Zl((0,O.m9)(y),f);return p.email})).apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(y,f,p){const _=Nn(y),T=yield Ic(_,{returnSecureToken:!0,email:f,password:p}),R=yield ci._fromIdTokenResponse(_,"signIn",T);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function fu(){return fu=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};V(p.handleCodeInApp,_,"argument-error"),p&&ma(_,T,p),yield function Ut(y,f){return fo.apply(this,arguments)}(_,T)}),fu.apply(this,arguments)}function Ac(){return(Ac=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y),T=Hl.credentialWithLink(f,p||ce());return V(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Jt(_,T)})).apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:createAuthUri",tt(y,f))})).apply(this,arguments)}function Do(){return Do=(0,h.Z)(function*(y,f){const _={identifier:f,continueUri:me()?ce():"http://localhost"},{signinMethods:T}=yield function Eo(y,f){return Jr.apply(this,arguments)}((0,O.m9)(y),_);return T||[]}),Do.apply(this,arguments)}function pu(){return pu=(0,h.Z)(function*(y,f){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ma(p.auth,T,f);const{email:R}=yield function ks(y,f){return In.apply(this,arguments)}(p.auth,T);R!==y.email&&(yield y.reload())}),pu.apply(this,arguments)}function On(){return On=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&ma(_.auth,R,p);const{email:H}=yield function po(y,f){return Fs.apply(this,arguments)}(_.auth,R);H!==y.email&&(yield y.reload())}),On.apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function li(){return li=(0,h.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},H=yield fn(_,function Xr(y,f){return va.apply(this,arguments)}(_.auth,R));_.displayName=H.displayName||null,_.photoURL=H.photoUrl||null;const oe=_.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=_.displayName,oe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(H)}),li.apply(this,arguments)}function Ql(y,f,p){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,h.Z)(function*(y,f,p){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),p&&(R.password=p);const H=yield fn(y,Ps(_,R));yield y._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class $s{constructor(f,p,_={}){this.isNewUser=f,this.providerId=p,this.profile=_}}class Rc extends $s{constructor(f,p,_,T){super(f,p,_),this.username=T}}class yu extends $s{constructor(f,p){super(f,"facebook.com",p)}}class Kp extends Rc{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Nc extends $s{constructor(f,p){super(f,"google.com",p)}}class Jl extends Rc{constructor(f,p,_){super(f,"twitter.com",p,_)}}function Yp(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function mu(y){var f,p;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const H=null===(p=null===(f=St(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(H)return new $s(R,"anonymous"!==H&&"custom"!==H?H:null)}if(!_)return null;switch(_){case"facebook.com":return new yu(R,T);case"github.com":return new Kp(R,T);case"google.com":return new Nc(R,T);case"twitter.com":return new Jl(R,T,y.screenName||null);case"custom":case"anonymous":return new $s(R,null);default:return new $s(R,_,T)}}(p)}class ms{constructor(f,p,_){this.type=f,this.credential=p,this.auth=_}static _fromIdtoken(f,p){return new ms("enroll",f,p)}static _fromMfaPendingCredential(f){return new ms("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,_;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return ms._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return ms._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Hn{constructor(f,p,_){this.session=f,this.hints=p,this.signInResolver=_}static _fromError(f,p){const _=Nn(f),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(oe=>Wn._fromServerResponse(_,oe));V(T.mfaPendingCredential,_,"internal-error");const H=ms._fromMfaPendingCredential(T.mfaPendingCredential);return new Hn(H,R,function(){var oe=(0,h.Z)(function*(Le){const ot=yield Le._process(_,H);delete T.mfaInfo,delete T.mfaPendingCredential;const He=Object.assign(Object.assign({},T),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(p.operationType){case"signIn":const dt=yield ci._fromIdTokenResponse(_,p.operationType,He);return yield _._updateCurrentUser(dt.user),dt;case"reauthenticate":return V(p.user,_,"internal-error"),ci._forOperation(p.user,p.operationType,He);default:_e(_,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,h.Z)(function*(){return p.signInResolver(f)})()}}class bo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>Wn._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new bo(f)}getSession(){var f=this;return(0,h.Z)(function*(){return ms._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var _=this;return(0,h.Z)(function*(){const T=f,R=yield _.getSession(),H=yield fn(_.user,T._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(H),_.user.reload()})()}unenroll(f){var p=this;return(0,h.Z)(function*(){const _="string"==typeof f?f:f.uid,T=yield p.user.getIdToken();try{const R=yield fn(p.user,function kc(y,f){return Tt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(y,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:H})=>H!==_),yield p.user._updateTokensIfNecessary(R),yield p.user.reload()}catch(R){throw R}})()}}const Hs=new WeakMap,vu="__sak";class di{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(vu,"1"),this.storage.removeItem(vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fc=(()=>{class y extends di{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ia(){const y=(0,O.z$)();return nt(y)||Ot(y)}()&&function gc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hh(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),R=this.localCache[_];T!==R&&p(_,R,T)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((oe,Le,ot)=>{this.notifyListeners(oe,ot)});const T=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(T);if(p.newValue!==oe)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!_)return}const R=()=>{const oe=this.storage.getItem(T);!_&&this.localCache[T]===oe||this.notifyListeners(T,oe)},H=this.storage.getItem(T);!function eu(){return(0,O.w1)()&&10===document.documentMode}()||H===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var T=()=>super._set,R=this;return(0,h.Z)(function*(){yield T().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,T=this;return(0,h.Z)(function*(){const R=yield _().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,T=this;return(0,h.Z)(function*(){yield _().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),hi=(()=>{class y extends di{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let Jh=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,h.Z)(function*(){const T=p,{eventId:R,eventType:H,data:oe}=T.data,Le=_.handlersMap[H];if(!Le?.size)return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:H});const ot=Array.from(Le).map(function(){var dt=(0,h.Z)(function*(xn){return xn(T.origin,oe)});return function(xn){return dt.apply(this,arguments)}}()),He=yield function Lc(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return f.apply(this,arguments)}}()))}(ot);T.ports[0].postMessage({status:"done",eventId:R,eventType:H,response:He})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Pi(y="",f=10){let p="";for(let _=0;_<f;_++)p+=Math.floor(10*Math.random());return y+p}class Co{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,_=50){var T=this;return(0,h.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let H,oe;return new Promise((Le,ot)=>{const He=Pi("",20);R.port1.start();const dt=setTimeout(()=>{ot(new Error("unsupported_event"))},_);oe={messageChannel:R,onMessage(xn){const Ur=xn;if(Ur.data.eventId===He)switch(Ur.data.status){case"ack":clearTimeout(dt),H=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Le(Ur.data.response);break;default:clearTimeout(dt),clearTimeout(H),ot(new Error("invalid_response"))}}},T.handlers.add(oe),R.port1.addEventListener("message",oe.onMessage),T.target.postMessage({eventType:f,eventId:He,data:p},[R.port2])}).finally(()=>{oe&&T.removeMessageHandler(oe)})})()}}function mn(){return window}function Gs(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function To(){return(To=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ea="firebaseLocalStorageDb",Ao=1,Uc="firebaseLocalStorage",xo="fbase_key";class zs{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function _s(y,f){return y.transaction([Uc],f?"readwrite":"readonly").objectStore(Uc)}function Da(){const y=indexedDB.open(Ea,Ao);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Uc,{keyPath:xo})}catch(T){p(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Uc)?f(_):(_.close(),yield function fi(){const y=indexedDB.deleteDatabase(Ea);return new zs(y).toPromise()}(),f(yield Da()))}))})}function Mo(y,f,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(y,f,p){const _=_s(y,!0).put({[xo]:f,value:p});return new zs(_).toPromise()})).apply(this,arguments)}function Is(){return(Is=(0,h.Z)(function*(y,f){const p=_s(y,!1).get(f),_=yield new zs(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Ro(y,f){const p=_s(y,!0).delete(f);return new zs(p).toPromise()}const Yi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,h.Z)(function*(){return p.db||(p.db=yield Da()),p.db})()}_withRetries(p){var _=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(T++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,h.Z)(function*(){return Gs()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,h.Z)(function*(){p.receiver=Jh._getInstance(function So(){return Gs()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,h.Z)(function*(){var _,T;if(p.activeServiceWorker=yield function Vc(){return To.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Co(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(T=R[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Xh(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Da();return yield Mo(p,vu,"1"),yield Ro(p,vu),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(R=>Mo(R,p,_)),T.localCache[p]=_,T.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=yield _._withRetries(R=>function _u(y,f){return Is.apply(this,arguments)}(R,p));return _.localCache[p]=T,T})()}_remove(p){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(T=>Ro(T,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,h.Z)(function*(){const _=yield p._withRetries(H=>{const oe=_s(H,!1).getAll();return new zs(oe).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:H,value:oe}of _)R.add(H),JSON.stringify(p.localCache[H])!==JSON.stringify(oe)&&(p.notifyListeners(H,oe),T.push(H));for(const H of Object.keys(p.localCache))p.localCache[H]&&!R.has(H)&&(p.notifyListeners(H,null),T.push(H));return T})()}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Zs(){return(Zs=(0,h.Z)(function*(y){return(yield Tt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Iu(y){return new Promise((f,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=f,_.onerror=T=>{const R=ye("internal-error");R.customData=T,p(R)},_.type="text/javascript",_.charset="UTF-8",function rd(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(_)})}function Er(y){return`__${y}${Math.floor(1e6*Math.random())}`}const No=1e12;class sd{constructor(f){this.auth=f,this.counter=No,this._widgets=new Map}render(f,p){const _=this.counter;return this._widgets.set(_,new od(f,this.auth.name,p||{})),this.counter++,_}reset(f){var p;const _=f||No;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(f){var p;return(null===(p=this._widgets.get(f||No))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,h.Z)(function*(){var _;return null===(_=p._widgets.get(f||No))||void 0===_||_.execute(),""})()}}class od{constructor(f,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;V(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Eu(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Es=Er("rcb"),Ws=new et(3e4,6e4);class ig{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=mn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return V(function ad(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(mn().grecaptcha):new Promise((_,T)=>{const R=mn().setTimeout(()=>{T(ye(f,"network-request-failed"))},Ws.get());mn()[Es]=()=>{mn().clearTimeout(R),delete mn()[Es];const oe=mn().grecaptcha;if(!oe)return void T(ye(f,"internal-error"));const Le=oe.render;oe.render=(ot,He)=>{const dt=Le(ot,He);return this.counter++,dt},this.hostLanguage=p,_(oe)},Iu(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Es,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(ye(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=mn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oo{load(f){return(0,h.Z)(function*(){return new sd(f)})()}clearedOneInstance(){}}const nf="recaptcha",Ds={theme:"light",type:"image"};class dn{constructor(f,p=Object.assign({},Ds),_){this.parameters=p,this.type=nf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;V(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oo:new ig,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const H=oe=>{oe&&(f.tokenChangeListeners.delete(H),R(oe))};f.tokenChangeListeners.add(H),f.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof f)f(p);else if("string"==typeof f){const _=mn()[f];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){V(me()&&!Gs(),f.auth,"internal-error"),yield function rf(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function qs(y){return Zs.apply(this,arguments)}(f.auth);V(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ta{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Zi._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function af(){return(af=(0,h.Z)(function*(y,f,p){const _=Nn(y),T=yield cf(_,f,(0,O.m9)(p));return new Ta(T,R=>Jt(_,R))})).apply(this,arguments)}function uf(){return(uf=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y);yield _o(!1,_,"phone");const T=yield cf(_.auth,f,(0,O.m9)(p));return new Ta(T,R=>pa(_,R))})).apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y),T=yield cf(_.auth,f,(0,O.m9)(p));return new Ta(T,R=>lu(_,R))})).apply(this,arguments)}function cf(y,f,p){return lf.apply(this,arguments)}function lf(){return lf=(0,h.Z)(function*(y,f,p){var _;const T=yield p.verify();try{let R;if(V("string"==typeof T,y,"argument-error"),V(p.type===nf,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const H=R.session;if("phoneNumber"in R)return V("enroll"===H.type,y,"internal-error"),(yield function ei(y,f){return Tt(y,"POST","/v2/accounts/mfaEnrollment:start",tt(y,f))}(y,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{V("signin"===H.type,y,"internal-error");const oe=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(oe,y,"missing-multi-factor-info"),(yield function nd(y,f){return Tt(y,"POST","/v2/accounts/mfaSignIn:start",tt(y,f))}(y,{mfaPendingCredential:H.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function _c(y,f){return iu.apply(this,arguments)}(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return H}}finally{p._reset()}}),lf.apply(this,arguments)}function Du(){return(Du=(0,h.Z)(function*(y,f){yield ha((0,O.m9)(y),f)})).apply(this,arguments)}let Qi=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Nn(p)}verifyPhoneNumber(p,_){return cf(this.auth,p,(0,O.m9)(_))}static credential(p,_){return Zi._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:T}=p;return _&&T?Zi._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ko(y,f){return f?pt(f):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Dr extends Zn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ai(f,this._buildIdpRequest())}_linkToIdToken(f,p){return ai(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return ai(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function bs(y){return gs(y.auth,new Dr(y),y.bypassAuthState)}function jc(y){const{auth:f,user:p}=y;return V(p,f,"internal-error"),bc(p,new Dr(y),y.bypassAuthState)}function Sa(y){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(y){const{auth:f,user:p}=y;return V(p,f,"internal-error"),ha(p,new Dr(y),y.bypassAuthState)})).apply(this,arguments)}class $c{constructor(f,p,_,T,R=!1){this.auth=f,this.resolver=_,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,h.Z)(function*(_,T){f.pendingPromise={resolve:_,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(_,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:R,tenantId:H,error:oe,type:Le}=f;if(oe)return void p.reject(oe);const ot={auth:p.auth,requestUri:_,sessionId:T,tenantId:H||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Le)(ot))}catch(He){p.reject(He)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return bs;case"linkViaPopup":case"linkViaRedirect":return Sa;case"reauthViaPopup":case"reauthViaRedirect":return jc;default:_e(this.auth,"internal-error")}}resolve(f){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const df=new et(2e3,1e4);function ag(){return(ag=(0,h.Z)(function*(y,f,p){const _=Nn(y);Fe(y,f,Wi);const T=ko(_,p);return new ki(_,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Aa(){return(Aa=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y);Fe(_.auth,f,Wi);const T=ko(_.auth,p);return new ki(_.auth,"reauthViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}function Xt(){return(Xt=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y);Fe(_.auth,f,Wi);const T=ko(_.auth,p);return new ki(_.auth,"linkViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}let ki=(()=>{class y extends $c{constructor(p,_,T,R,H){super(p,_,R,H),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,h.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,h.Z)(function*(){Ve(1===p.filter.length,"Popup operations only handle one event");const _=Pi();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,df.get())};p()}}return y.currentPopupAction=null,y})();const gt="pendingRedirect",Pn=new Map;class vi extends $c{constructor(f,p,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,h.Z)(function*(){let _=Pn.get(p.auth._key());if(!_){try{const R=(yield function hf(y,f){return _i.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;_=()=>Promise.resolve(R)}catch(T){_=()=>Promise.reject(T)}Pn.set(p.auth._key(),_)}return p.bypassAuthState||Pn.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(_,f);if("unknown"!==f.type){if(f.eventId){const T=yield _.auth._redirectUserForId(f.eventId);if(T)return _.user=T,p().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function _i(){return(_i=(0,h.Z)(function*(y,f){const p=ud(f),_=ft(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(p));return yield _._remove(p),T})).apply(this,arguments)}function dr(y,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(y,f){return ft(y)._set(ud(f),"true")})).apply(this,arguments)}function Ys(y,f){Pn.set(y._key(),f)}function ft(y){return pt(y._redirectPersistence)}function ud(y){return L(gt,y.config.apiKey,y.name)}function D(y,f,p){return function C(y,f,p){return x.apply(this,arguments)}(y,f,p)}function x(){return(x=(0,h.Z)(function*(y,f,p){const _=Nn(y);Fe(y,f,Wi),yield _._initializationPromise;const T=ko(_,p);return yield dr(T,_),T._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function F(y,f,p){return function q(y,f,p){return X.apply(this,arguments)}(y,f,p)}function X(){return(X=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y);Fe(_.auth,f,Wi),yield _.auth._initializationPromise;const T=ko(_.auth,p);yield dr(T,_.auth);const R=yield un(_);return T._openRedirect(_.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Ae(y,f,p){return function W(y,f,p){return st.apply(this,arguments)}(y,f,p)}function st(){return(st=(0,h.Z)(function*(y,f,p){const _=(0,O.m9)(y);Fe(_.auth,f,Wi),yield _.auth._initializationPromise;const T=ko(_.auth,p);yield _o(!1,_,f.providerId),yield dr(T,_.auth);const R=yield un(_);return T._openRedirect(_.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function Mt(){return(Mt=(0,h.Z)(function*(y,f){return yield Nn(y)._initializationPromise,ze(y,f,!1)})).apply(this,arguments)}function ze(y,f){return br.apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(y,f,p=!1){const _=Nn(y),T=ko(_,f),H=yield new vi(_,T,p).execute();return H&&!p&&(delete H.user._redirectEventId,yield _._persistUserIfCurrent(H.user),yield _._setRedirectUser(null,f)),H})).apply(this,arguments)}function un(y){return ut.apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(y){const f=Pi(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Et{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(p=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Qs(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tr(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var _;if(f.error&&!Tr(f)){const T=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const _=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cr(f))}saveEventToCache(f){this.cachedEventUids.add(Cr(f)),this.lastProcessedEventTime=Date.now()}}function Cr(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Tr({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function ug(y){return bu.apply(this,arguments)}function bu(){return(bu=(0,h.Z)(function*(y,f={}){return Tt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const H0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cg=/^https?/;function hr(){return(hr=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ug(y);for(const p of f)try{if(cd(p))return}catch{}_e(y,"unauthorized-domain")})).apply(this,arguments)}function cd(y){const f=ce(),{protocol:p,hostname:_}=new URL(f);if(y.startsWith("chrome-extension://")){const H=new URL(y);return""===H.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&H.hostname===_}if(!cg.test(p))return!1;if(H0.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const or=new et(3e4,6e4);function Fo(){const y=mn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ma=null;const Ly=new et(5e3,15e3),ti="__/auth/iframe",q0="emulator/auth/iframe",ff={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ld(y){const f=y.config;V(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?Ke(f,q0):`https://${y.config.authDomain}/${ti}`,_={apiKey:f.apiKey,appName:y.name,v:ee.SDK_VERSION},T=dg.get(y.config.apiHost);T&&(_.eid=T);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function wi(){return wi=(0,h.Z)(function*(y){const f=yield function lg(y){return Ma=Ma||function z0(y){return new Promise((f,p)=>{var _,T,R;function H(){Fo(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Fo(),p(ye(y,"network-request-failed"))},timeout:or.get()})}if(null!==(T=null===(_=mn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(R=mn().gapi)||void 0===R||!R.load){const oe=Er("iframefcb");return mn()[oe]=()=>{gapi.load?H():p(ye(y,"network-request-failed"))},Iu(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>p(Le))}H()}}).catch(f=>{throw Ma=null,f})}(y),Ma}(y),p=mn().gapi;return V(p,y,"internal-error"),f.open({where:document.body,url:ld(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ff,dontclear:!0},_=>new Promise(function(){var T=(0,h.Z)(function*(R,H){yield _.restyle({setHideOnLeave:!1});const oe=ye(y,"network-request-failed"),Le=mn().setTimeout(()=>{H(oe)},Ly.get());function ot(){mn().clearTimeout(Le),R(_)}_.ping(ot).then(ot,()=>{H(oe)})});return function(R,H){return T.apply(this,arguments)}}()))}),wi.apply(this,arguments)}const dd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hg=500,Ts=600,Tu="_blank",fg="http://localhost";class hd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const pg="__/auth/handler",fd="emulator/auth/handler";function Hc(y,f,p,_,T,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const H={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:ee.SDK_VERSION,eventId:T};if(f instanceof Wi){f.setDefaultLanguage(y.languageCode),H.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(H.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,ot]of Object.entries(R||{}))H[Le]=ot}if(f instanceof Us){const Le=f.getScopes().filter(ot=>""!==ot);Le.length>0&&(H.scopes=Le.join(","))}y.tenantId&&(H.tid=y.tenantId);const oe=H;for(const Le of Object.keys(oe))void 0===oe[Le]&&delete oe[Le];return`${function pd({config:y}){return y.emulator?Ke(y,fd):`https://${y.authDomain}/${pg}`}(y)}?${(0,O.xO)(oe).slice(1)}`}const Gc="webStorageSupport",ni=class Vy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hi,this._completeRedirectFn=ze,this._overrideRedirectResult=Ys}_openPopup(f,p,_,T){var R=this;return(0,h.Z)(function*(){var H;Ve(null===(H=R.eventManagers[f._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const oe=Hc(f,p,_,ce(),T);return function pf(y,f,p,_=hg,T=Ts){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),H=Math.max((window.screen.availWidth-_)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},dd),{width:_.toString(),height:T.toString(),top:R,left:H}),ot=(0,O.z$)().toLowerCase();p&&(oe=We(ot)?Tu:p),J(ot)&&(f=f||fg,Le.scrollbars="yes");const He=Object.entries(Le).reduce((xn,[Ur,il])=>`${xn}${Ur}=${il},`,"");if(function xi(y=(0,O.z$)()){var f;return Ot(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(ot)&&"_self"!==oe)return function gf(y,f){const p=document.createElement("a");p.href=y,p.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(f||"",oe),new hd(null);const dt=window.open(f||"",oe,He);V(dt,y,"popup-blocked");try{dt.focus()}catch{}return new hd(dt)}(f,oe,Pi())})()}_openRedirect(f,p,_,T){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function vs(y){mn().location.href=y}(Hc(f,p,_,ce(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(Ve(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(f);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(f){var p=this;return(0,h.Z)(function*(){const _=yield function Cu(y){return wi.apply(this,arguments)}(f),T=new Et(f);return _.register("authEvent",R=>(V(R?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=_,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Gc,{type:Gc},T=>{var R;const H=null===(R=T?.[0])||void 0===R?void 0:R[Gc];void 0!==H&&p(!!H),_e(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function G0(y){return hr.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Hh()||nt()||Ot()}};class zc{constructor(f){this.factorId=f}_process(f,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,_);case"signin":return this._finalizeSignIn(f,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}class qc extends zc{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new qc(f)}_finalizeEnroll(f,p,_){return function eg(y,f){return Tt(y,"POST","/v2/accounts/mfaEnrollment:finalize",tt(y,f))}(f,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function yi(y,f){return Tt(y,"POST","/v2/accounts/mfaSignIn:finalize",tt(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mf=(()=>{class y{constructor(){}static assertion(p){return qc._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var gg="@firebase/auth";class yf{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,h.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(_=>{f(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Js(){return window}(0,O.Pz)("authIdTokenMaxAge"),function mg(y){(0,ee._registerComponent)(new le.wA("auth",(f,{options:p})=>{const _=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:H}=_.options;return((oe,Le)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:oe.name}),V(!H?.includes(":"),"argument-error",{appName:oe.name});const ot={apiKey:R,authDomain:H,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tu(y)},He=new Gh(oe,Le,ot);return function ie(y,f){const p=f?.persistence||[],_=(Array.isArray(p)?p:[p]).map(pt);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(_,f?.popupRedirectResolver)}(He,p),He})(_,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,_)=>{f.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new le.wA("auth-internal",f=>{const p=Nn(f.getProvider("auth").getImmediate());return new yf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(gg,"0.22.0",function vf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ee.registerVersion)(gg,"0.22.0","esm2017")}("Browser");const Au=2e3;function wf(){return wf=(0,h.Z)(function*(y,f,p){var _;const{BuildInfo:T}=Js();Ve(f.sessionId,"AuthEvent did not contain a session ID");const R=yield function If(y){return Pa.apply(this,arguments)}(f.sessionId),H={};return Ot()?H.ibi=T.packageName:Tn()?H.apn=T.packageName:_e(y,"operation-not-supported-in-this-environment"),T.displayName&&(H.appDisplayName=T.displayName),H.sessionId=R,Hc(y,p,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,H)}),wf.apply(this,arguments)}function xu(){return(xu=(0,h.Z)(function*(y){const{BuildInfo:f}=Js(),p={};Ot()?p.iosBundleId=f.packageName:Tn()?p.androidPackageName=f.packageName:_e(y,"operation-not-supported-in-this-environment"),yield ug(y,p)})).apply(this,arguments)}function Kc(){return(Kc=(0,h.Z)(function*(y,f,p){const{cordova:_}=Js();let T=()=>{};try{yield new Promise((R,H)=>{let oe=null;function Le(){var dt;R();const xn=null===(dt=_.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof xn&&xn(),"function"==typeof p?.close&&p.close()}function ot(){oe||(oe=window.setTimeout(()=>{H(ye(y,"redirect-cancelled-by-user"))},Au))}function He(){"visible"===document?.visibilityState&&ot()}f.addPassiveListener(Le),document.addEventListener("resume",ot,!1),Tn()&&document.addEventListener("visibilitychange",He,!1),T=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",ot,!1),document.removeEventListener("visibilitychange",He,!1),oe&&window.clearTimeout(oe)}})}finally{T()}})).apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(y){const f=function fr(y){if(Ve(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Sr=20;class Id extends Et{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function vg(y){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,h.Z)(function*(y){const f=yield Mu()._get(Qc(y));return f&&(yield Mu()._remove(Qc(y))),f})).apply(this,arguments)}function _g(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<Sr;p++){const _=Math.floor(Math.random()*f.length);y.push(f.charAt(_))}return y.join("")}function Mu(){return pt(Fc)}function Qc(y){return L("authEvent",y.config.apiKey,y.name)}function Ru(y){if(!y?.includes("?"))return{};const[f,...p]=y.split("?");return(0,O.zd)(p.join("?"))}const Dd=class Jc{constructor(){this._redirectPersistence=hi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ze,this._overrideRedirectResult=Ys}_initialize(f){var p=this;return(0,h.Z)(function*(){const _=f._key();let T=p.eventManagers.get(_);return T||(T=new Id(f),p.eventManagers.set(_,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){_e(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,_,T){var R=this;return(0,h.Z)(function*(){!function wd(y){var f,p,_,T,R,H,oe,Le,ot,He;const dt=Js();V("function"==typeof(null===(f=dt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=dt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(T=null===(_=dt?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Le=null===(oe=null===(H=dt?.cordova)||void 0===H?void 0:H.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(He=null===(ot=dt?.cordova)||void 0===ot?void 0:ot.InAppBrowser)||void 0===He?void 0:He.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const H=yield R._initialize(f);yield H.initialized(),H.resetRedirect(),function Vn(){Pn.clear()}(),yield R._originValidation(f);const oe=function Ef(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:_g(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(f,_,T);yield function Uy(y,f){return Mu()._set(Qc(y),f)}(f,oe);const Le=yield function yg(y,f,p){return wf.apply(this,arguments)}(f,oe,p),ot=yield function _d(y){const{cordova:f}=Js();return new Promise(p=>{f.plugins.browsertab.isAvailable(_=>{let T=null;_?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function kr(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Le);return function Oa(y,f,p){return Kc.apply(this,arguments)}(f,H,ot)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function vd(y){return xu.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:_,handleOpenURL:T,BuildInfo:R}=Js(),H=setTimeout((0,h.Z)(function*(){yield vg(f),p.onEvent(bd())}),500),oe=function(){var He=(0,h.Z)(function*(dt){clearTimeout(H);const xn=yield vg(f);let Ur=null;xn&&dt?.url&&(Ur=function Df(y,f){var p,_;const T=function Ed(y){const f=Ru(y),p=f.link?decodeURIComponent(f.link):void 0,_=Ru(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Ru(T).link||T||_||p||y}(f);if(T.includes("/__/auth/callback")){const R=Ru(T),H=R.firebaseError?function By(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,oe=null===(_=null===(p=H?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Le=oe?ye(oe):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(xn,dt.url)),p.onEvent(Ur||bd())});return function(xn){return He.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,oe);const Le=T,ot=`${R.packageName.toLowerCase()}://`;Js().handleOpenURL=function(){var He=(0,h.Z)(function*(dt){if(dt.toLowerCase().startsWith(ot)&&oe({url:dt}),"function"==typeof Le)try{Le(dt)}catch(xn){console.error(xn)}});return function(dt){return He.apply(this,arguments)}}()}};function bd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}const bf=1e3;function Fa(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function La(y=(0,O.z$)()){return!("file:"!==Fa()&&"ionic:"!==Fa()&&"capacitor:"!==Fa()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sd(){try{const y=self.localStorage,f=Pi();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ig(y=(0,O.z$)()){return function Td(){return(0,O.w1)()&&11===document?.documentMode}()||function Xs(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Ji()&&(0,O.hl)()}return!1}function Ji(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nu(){return(function Cf(){return"http:"===Fa()||"https:"===Fa()}()||(0,O.ru)()||La())&&!function wg(){return(0,O.b$)()||(0,O.UG)()}()&&Sd()&&!Ji()}function eo(){return La()&&typeof document<"u"}function Lo(){return(Lo=(0,h.Z)(function*(){return!!eo()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},bf);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const hn={LOCAL:"local",NONE:"none",SESSION:"session"},Ou=V,Va="persistence";function Ua(y){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,h.Z)(function*(y){yield y._initializationPromise;const f=Tf(),p=L(Va,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function Tf(){var y;try{return(null===(y=function Dg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const tl=V;class to{constructor(){this.browserResolver=pt(ni),this.cordovaResolver=pt(Dd),this.underlyingResolver=null,this._redirectPersistence=hi,this._completeRedirectFn=ze,this._overrideRedirectResult=Ys}_initialize(f){var p=this;return(0,h.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,_,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,p,_,T)})()}_openRedirect(f,p,_,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,p,_,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return eo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Eg(){return Lo.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function Ad(y){return y.unwrap()}function xd(y){return ku(y)}function ku(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Qi.credentialFromResult(y);const p=f.providerId;if(!p||p===ae.PASSWORD)return null;let _;switch(p){case ae.GOOGLE:_=zh;break;case ae.FACEBOOK:_=wc;break;case ae.GITHUB:_=qh;break;case ae.TWITTER:_=Zp;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:H,pendingToken:oe,nonce:Le}=f;return R||H||T||oe?oe?p.startsWith("saml.")?yo._create(p,oe):qi._fromParams({providerId:p,signInMethod:p,pendingToken:oe,idToken:T,accessToken:R}):new da(p).credential({idToken:T,accessToken:R,rawNonce:Le}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function Vr(y,f){return f.catch(p=>{throw p instanceof O.ZR&&function Pu(y,f){var p;const _=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Md(y,function Xp(y,f){var p;const _=(0,O.m9)(y),T=f;return V(f.customData.operationType,_,"argument-error"),V(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Hn._fromError(_,T)}(y,f));else if(_){const T=ku(f),R=f;T&&(R.credential=T,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:xd(p),additionalUserInfo:Yp(p),user:Xi.getOrCreate(T)}})}function Fu(y,f){return $a.apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:_=>Vr(y,p.confirm(_))}})).apply(this,arguments)}class Md{constructor(f,p){this.resolver=p,this.auth=function nl(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Vr(Ad(this.auth),this.resolver.resolveSignIn(f))}}class Xi{constructor(f){this._delegate=f,this.multiFactor=function ys(y){const f=(0,O.m9)(y);return Hs.has(f)||Hs.set(f,bo._fromUser(f)),Hs.get(f)}(f)}static getOrCreate(f){return Xi.USER_MAP.has(f)||Xi.USER_MAP.set(f,new Xi(f)),Xi.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,h.Z)(function*(){return Vr(p.auth,pa(p._delegate,f))})()}linkWithPhoneNumber(f,p){var _=this;return(0,h.Z)(function*(){return Fu(_.auth,function Fy(y,f,p){return uf.apply(this,arguments)}(_._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,h.Z)(function*(){return Vr(p.auth,function Lr(y,f,p){return Xt.apply(this,arguments)}(p._delegate,f,to))})()}linkWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield Ua(Nn(p.auth)),Ae(p._delegate,f,to)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,h.Z)(function*(){return Vr(p.auth,lu(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return Fu(this.auth,function sg(y,f,p){return Po.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return Vr(this.auth,function An(y,f,p){return Aa.apply(this,arguments)}(this._delegate,f,to))}reauthenticateWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield Ua(Nn(p.auth)),F(p._delegate,f,to)})()}sendEmailVerification(f){return function Kl(y,f){return pu.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,h.Z)(function*(){return yield function Gl(y,f){return js.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function gu(y,f){return Ql((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Yl(y,f){return Ql((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Yn(y,f){return Du.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function _a(y,f){return li.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function xc(y,f,p){return On.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xi.USER_MAP=new WeakMap;const Lu=V;let Sf=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Lu(T,"invalid-api-key",{appName:p.name}),Lu(T,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?to:void 0;this._delegate=_.initialize({options:{persistence:rl(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ge),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function yc(y,f,p){const _=Nn(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const T=!!p?.disableWarnings,R=Zt(f),{host:H,port:oe}=function $n(y){const f=Zt(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const R=T[1];return{host:R,port:rr(_.substr(R.length+1))}}{const[R,H]=_.split(":");return{host:R,port:rr(H)}}}(f);_.config.emulator={url:`${R}//${H}${null===oe?"":`:${oe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:H,port:oe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function fs(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function ql(y,f){return du.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Zl(this._delegate,p)}confirmPasswordReset(p,_){return function Sc(y,f,p){return At.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var T=this;return(0,h.Z)(function*(){return Vr(T._delegate,function Kh(y,f,p){return En.apply(this,arguments)}(T._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Wl(y,f){return Do.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Yh(y,f){return"EMAIL_SIGNIN"===wr.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,h.Z)(function*(){Lu(Nu(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function ht(y,f){return Mt.apply(this,arguments)}(p._delegate,to);return _?Vr(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function jy(y,f){Nn(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,_,T){const{next:R,error:H,complete:oe}=bg(p,_,T);return this._delegate.onAuthStateChanged(R,H,oe)}onIdTokenChanged(p,_,T){const{next:R,error:H,complete:oe}=bg(p,_,T);return this._delegate.onIdTokenChanged(R,H,oe)}sendSignInLinkToEmail(p,_){return function Wt(y,f,p){return fu.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function Ki(y,f,p){return Io.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,h.Z)(function*(){let T;switch(function el(y,f){Ou(Object.values(hn).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Ou(f!==hn.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Ou(f===hn.NONE,y,"unsupported-persistence-type"):Ji()?Ou(f===hn.NONE||f===hn.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Ou(f===hn.NONE||Sd(),y,"unsupported-persistence-type")}(_._delegate,p),p){case hn.SESSION:T=hi;break;case hn.LOCAL:T=(yield pt(Yi)._isAvailable())?Yi:Fc;break;case hn.NONE:T=U;break;default:return _e("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Vr(this._delegate,function ou(y){return Zh.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Vr(this._delegate,Jt(this._delegate,p))}signInWithCustomToken(p){return Vr(this._delegate,function Cc(y,f){return Oi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return Vr(this._delegate,function Ce(y,f,p){return Jt((0,O.m9)(y),Hl.credential(f,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return Vr(this._delegate,function Kn(y,f,p){return Ac.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Fu(this._delegate,function sf(y,f,p){return af.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,h.Z)(function*(){return Lu(Nu(),_._delegate,"operation-not-supported-in-this-environment"),Vr(_._delegate,function og(y,f,p){return ag.apply(this,arguments)}(_._delegate,p,to))})()}signInWithRedirect(p){var _=this;return(0,h.Z)(function*(){return Lu(Nu(),_._delegate,"operation-not-supported-in-this-environment"),yield Ua(_._delegate),D(_._delegate,p,to)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Wh(y,f){return hu.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=hn,y})();function bg(y,f,p){let _=y;"function"!=typeof y&&({next:_,error:f,complete:p}=y);const T=_;return{next:H=>T(H&&Xi.getOrCreate(H)),error:f,complete:p}}function rl(y,f){const p=function ja(y,f){const p=Tf();if(!p)return[];const _=L(Va,y,f);switch(p.getItem(_)){case hn.NONE:return[U];case hn.LOCAL:return[Yi,hi];case hn.SESSION:return[hi];default:return[]}}(y,f);if(typeof self<"u"&&!p.includes(Yi)&&p.push(Yi),typeof window<"u")for(const _ of[Fc,hi])p.includes(_)||p.push(_);return p.includes(U)||p.push(U),p}class Rd{constructor(){this.providerId="phone",this._delegate=new Qi(Ad(Y.Z.auth()))}static credential(f,p){return Qi.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}Rd.PHONE_SIGN_IN_METHOD=Qi.PHONE_SIGN_IN_METHOD,Rd.PROVIDER_ID=Qi.PROVIDER_ID;const es=V;class no{constructor(f,p,_=Y.Z.app()){var T;es(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new dn(f,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Cg(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new Sf(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Z_EMAIL_SIGNIN,PASSWORD_RESET:Z_PASSWORD_RESET,RECOVER_EMAIL:Z_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Z_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Z_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Z_VERIFY_EMAIL}},EmailAuthProvider:Hl,FacebookAuthProvider:wc,GithubAuthProvider:qh,GoogleAuthProvider:zh,OAuthProvider:da,SAMLAuthProvider:Ri,PhoneAuthProvider:Rd,PhoneMultiFactorGenerator:mf,RecaptchaVerifier:no,TwitterAuthProvider:Zp,Auth:Sf,AuthCredential:Zn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.7")}(Y.Z)},8766:(mt,De,P)=>{P.d(De,{Lj:()=>_e,X3:()=>Pe});var h=P(5861);const Y=(V,ge)=>ge.some(Ve=>V instanceof Ve);let O,ee;const le=new WeakMap,ue=new WeakMap,ae=new WeakMap,B=new WeakMap,j=new WeakMap;let we={get(V,ge,Ve){if(V instanceof IDBTransaction){if("done"===ge)return ue.get(V);if("objectStoreNames"===ge)return V.objectStoreNames||ae.get(V);if("store"===ge)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return Ie(V[ge])},set:(V,ge,Ve)=>(V[ge]=Ve,!0),has:(V,ge)=>V instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in V};function de(V){return"function"==typeof V?function lt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ge){return V.apply(Ee(this),ge),Ie(le.get(this))}:function(...ge){return Ie(V.apply(Ee(this),ge))}:function(ge,...Ve){const Ze=V.call(Ee(this),ge,...Ve);return ae.set(Ze,ge.sort?ge.sort():[ge]),Ie(Ze)}}(V):(V instanceof IDBTransaction&&function Ue(V){if(ue.has(V))return;const ge=new Promise((Ve,Ze)=>{const pt=()=>{V.removeEventListener("complete",it),V.removeEventListener("error",ie),V.removeEventListener("abort",ie)},it=()=>{Ve(),pt()},ie=()=>{Ze(V.error||new DOMException("AbortError","AbortError")),pt()};V.addEventListener("complete",it),V.addEventListener("error",ie),V.addEventListener("abort",ie)});ue.set(V,ge)}(V),Y(V,function te(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,we):V)}function Ie(V){if(V instanceof IDBRequest)return function Z(V){const ge=new Promise((Ve,Ze)=>{const pt=()=>{V.removeEventListener("success",it),V.removeEventListener("error",ie)},it=()=>{Ve(Ie(V.result)),pt()},ie=()=>{Ze(V.error),pt()};V.addEventListener("success",it),V.addEventListener("error",ie)});return ge.then(Ve=>{Ve instanceof IDBCursor&&le.set(Ve,V)}).catch(()=>{}),j.set(ge,V),ge}(V);if(B.has(V))return B.get(V);const ge=de(V);return ge!==V&&(B.set(V,ge),j.set(ge,V)),ge}const Ee=V=>j.get(V);function Pe(V,ge,{blocked:Ve,upgrade:Ze,blocking:pt,terminated:it}={}){const ie=indexedDB.open(V,ge),ce=Ie(ie);return Ze&&ie.addEventListener("upgradeneeded",me=>{Ze(Ie(ie.result),me.oldVersion,me.newVersion,Ie(ie.transaction))}),Ve&&ie.addEventListener("blocked",()=>Ve()),ce.then(me=>{it&&me.addEventListener("close",()=>it()),pt&&me.addEventListener("versionchange",()=>pt())}).catch(()=>{}),ce}function _e(V,{blocked:ge}={}){const Ve=indexedDB.deleteDatabase(V);return ge&&Ve.addEventListener("blocked",()=>ge()),Ie(Ve).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Fe=new Map;function Me(V,ge){if(!(V instanceof IDBDatabase)||ge in V||"string"!=typeof ge)return;if(Fe.get(ge))return Fe.get(ge);const Ve=ge.replace(/FromIndex$/,""),Ze=ge!==Ve,pt=Te.includes(Ve);if(!(Ve in(Ze?IDBIndex:IDBObjectStore).prototype)||!pt&&!ye.includes(Ve))return;const it=function(){var ie=(0,h.Z)(function*(ce,...me){const Se=this.transaction(ce,pt?"readwrite":"readonly");let Oe=Se.store;return Ze&&(Oe=Oe.index(me.shift())),(yield Promise.all([Oe[Ve](...me),pt&&Se.done]))[0]});return function(me){return ie.apply(this,arguments)}}();return Fe.set(ge,it),it}!function Ge(V){we=V(we)}(V=>({...V,get:(ge,Ve,Ze)=>Me(ge,Ve)||V.get(ge,Ve,Ze),has:(ge,Ve)=>!!Me(ge,Ve)||V.has(ge,Ve)}))},5861:(mt,De,P)=>{function h(O,ee,te,ne,le,ue,ae){try{var B=O[ue](ae),j=B.value}catch(Z){return void te(Z)}B.done?ee(j):Promise.resolve(j).then(ne,le)}function Y(O){return function(){var ee=this,te=arguments;return new Promise(function(ne,le){var ue=O.apply(ee,te);function ae(j){h(ue,ne,le,ae,B,"next",j)}function B(j){h(ue,ne,le,ae,B,"throw",j)}ae(void 0)})}}P.d(De,{Z:()=>Y})}},mt=>{mt(mt.s=8014)}]);